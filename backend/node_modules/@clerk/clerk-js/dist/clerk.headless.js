!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var n in i)("object"==typeof exports?exports:e)[n]=i[n]}}(globalThis,()=>(()=>{var e={2318:function(e,t,i){"use strict";let n,r,s;function a(){return"undefined"!=typeof window}i.r(t),i.d(t,{EmailLinkErrorCode:()=>U,EmailLinkErrorCodeStatus:()=>I,ClerkRuntimeError:()=>P,isEmailLinkError:()=>z,Clerk:()=>rN,isClerkAPIResponseError:()=>R,EmailLinkError:()=>A,isClerkRuntimeError:()=>M,ClerkAPIResponseError:()=>S,isMetamaskError:()=>N,isUserLockedError:()=>F,isKnownError:()=>x}),i(4096);let o=RegExp("bot|spider|crawl|APIs-Google|AdsBot|Googlebot|mediapartners|Google Favicon|FeedFetcher|Google-Read-Aloud|DuplexWeb-Google|googleweblight|bing|yandex|baidu|duckduck|yahoo|ecosia|ia_archiver|facebook|instagram|pinterest|reddit|slack|twitter|whatsapp|youtube|semrush","i");function l(){var e;let t=a()?window?.navigator:null;return!!t&&!((e=t?.userAgent)&&o.test(e))&&!t?.webdriver}function c(){let e=a()?window?.navigator:null;if(!e)return!1;let t=e?.onLine;return e?.connection?.rtt!==0&&e?.connection?.downlink!==0&&t}function d(){return c()&&l()}let h=(e,t,i,n,r)=>{let{notify:s}=r||{},a=e.get(i);a||(a=[],e.set(i,a)),a.push(n),s&&t.has(i)&&n(t.get(i))},u=(e,t,i)=>(e.get(t)||[]).map(e=>e(i)),p=(e,t,i)=>{let n=e.get(t);n&&(i?n.splice(n.indexOf(i)>>>0,1):e.set(t,[]))},f=()=>{let e=new Map,t=new Map,i=new Map;return{on:(...i)=>h(e,t,...i),prioritizedOn:(...e)=>h(i,t,...e),emit:(n,r)=>{t.set(n,r),u(i,n,r),u(e,n,r)},off:(...t)=>p(e,...t),prioritizedOff:(...e)=>p(i,...e),internal:{retrieveListeners:t=>e.get(t)||[]}}},m="status",_=new Set;function g(e){return function(t){let i=t??this;if(!i)throw TypeError(`${e.kind||e.name} type guard requires an error object`);return i instanceof e}}var y,b,w=class{static kind="ClerkApiError";code;message;longMessage;meta;constructor(e){let t={code:e.code,message:e.message,longMessage:e.long_message,meta:{paramName:e.meta?.param_name,sessionId:e.meta?.session_id,emailAddresses:e.meta?.email_addresses,identifiers:e.meta?.identifiers,zxcvbn:e.meta?.zxcvbn,plan:e.meta?.plan,isPlanUpgradePossible:e.meta?.is_plan_upgrade_possible}};this.code=t.code,this.message=t.message,this.longMessage=t.longMessage,this.meta=t.meta}};g(w);var v=class e extends Error{static kind="ClerkError";clerkError=!0;code;longMessage;docsUrl;cause;get name(){return this.constructor.name}constructor(t){super(new.target.formatMessage(new.target.kind,t.message,t.code,t.docsUrl),{cause:t.cause}),Object.setPrototypeOf(this,e.prototype),this.code=t.code,this.docsUrl=t.docsUrl,this.longMessage=t.longMessage,this.cause=t.cause}toString(){return`[${this.name}]
Message:${this.message}`}static formatMessage(e,t,i,n){let r="Clerk:",s=RegExp(r.replace(" ","\\s*"),"i");return t=t.replace(s,""),t=`${r} ${t.trim()}

(code="${i}")

`,n&&(t+=`

Docs: ${n}`),t}},S=class e extends v{static kind="ClerkAPIResponseError";status;clerkTraceId;retryAfter;errors;constructor(t,i){let{data:n,status:r,clerkTraceId:s,retryAfter:a}=i;super({...i,message:t,code:"api_response_error"}),Object.setPrototypeOf(this,e.prototype),this.status=r,this.clerkTraceId=s,this.retryAfter=a,this.errors=(n||[]).map(e=>new w(e))}toString(){let e=`[${this.name}]
Message:${this.message}
Status:${this.status}
Serialized errors: ${this.errors.map(e=>JSON.stringify(e))}`;return this.clerkTraceId&&(e+=`
Clerk Trace ID: ${this.clerkTraceId}`),e}static formatMessage(e,t,i,n){return t}};let k=g(S),C=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});var A=class e extends Error{code;constructor(t){super(t),this.code=t,this.name="EmailLinkError",Object.setPrototypeOf(this,e.prototype)}};let U={Expired:"expired",Failed:"failed",ClientMismatch:"client_mismatch"},I={Expired:"expired",Failed:"failed",ClientMismatch:"client_mismatch"};var P=class e extends v{static kind="ClerkRuntimeError";clerkRuntimeError=!0;constructor(t,i){super({...i,message:t}),Object.setPrototypeOf(this,e.prototype)}};let O=g(P);var T=class extends P{code;constructor(e,{code:t}){super(e,{code:t}),this.code=t}};function E(e){let t=e?.status;return!!t&&t>=400&&t<500}function x(e){return R(e)||N(e)||M(e)}function R(e){return e&&"clerkError"in e}function M(e){return"clerkRuntimeError"in e}function N(e){return"code"in e&&[4001,32602,32603].includes(e.code)&&"message"in e}function F(e){return R(e)&&e.errors?.[0]?.code==="user_locked"}function z(e){return"EmailLinkError"===e.name}function D(e){for(let[t,i]of Object.entries({isClerkApiResponseError:k,isClerkRuntimeError:O}))Object.assign(e,{[t]:i});return e}let W=[".lcl.dev",".lclstage.dev",".lclclerk.com"],L=[".accounts.dev",".accountsstage.dev",".accounts.lclclerk.com"],$=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],j=e=>"undefined"!=typeof atob&&"function"==typeof atob?atob(e):"undefined"!=typeof global&&global.Buffer?new global.Buffer(e,"base64").toString():e,J="pk_live_";function K(e){if(!e.endsWith("$"))return!1;let t=e.slice(0,-1);return!t.includes("$")&&t.includes(".")}function B(e,t={}){let i;if(!(e=e||"")||!V(e)){if(t.fatal&&!e)throw Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(t.fatal&&!V(e))throw Error("Publishable key not valid.");return null}let n=e.startsWith(J)?"production":"development";try{i=j(e.split("_")[2])}catch{if(t.fatal)throw Error("Publishable key not valid: Failed to decode key.");return null}if(!K(i)){if(t.fatal)throw Error("Publishable key not valid: Decoded key has invalid format.");return null}let r=i.slice(0,-1);return t.proxyUrl?r=t.proxyUrl:"development"!==n&&t.domain&&t.isSatellite&&(r=`clerk.${t.domain}`),{instanceType:n,frontendApi:r}}function V(e=""){try{if(!(e.startsWith(J)||e.startsWith("pk_test_")))return!1;let t=e.split("_");if(3!==t.length)return!1;let i=t[2];if(!i)return!1;let n=j(i);return K(n)}catch{return!1}}async function q(e,t=globalThis.crypto.subtle){var i;let n=new TextEncoder().encode(e);return(i=String.fromCharCode(...new Uint8Array(await t.digest("sha-1",n))),"undefined"!=typeof btoa&&"function"==typeof btoa?btoa(i):"undefined"!=typeof global&&global.Buffer?new global.Buffer(i).toString("base64"):i).replace(/\+/gi,"-").replace(/\//gi,"_").substring(0,8)}let H=(e,t)=>`${e}_${t}`,G=new Set,Y=e=>{G.has(e)||(G.add(e),console.warn(e))},Q="__clerk_netlify_cache_bust";function X(e){return/^http(s)?:\/\//.test(e||"")}function Z(e){return e.startsWith("/")}function ee(e){return e?e.replace(/([-_][a-z])/g,e=>e.toUpperCase().replace(/-|_/,"")):""}function et(e){return e?e.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`):""}let ei=e=>{let t=i=>{if(!i)return i;if(Array.isArray(i))return i.map(e=>"object"==typeof e||Array.isArray(e)?t(e):e);let n={...i};for(let i of Object.keys(n)){let r=e(i.toString());r!==i&&(n[r]=n[i],delete n[i]),"object"==typeof n[r]&&(n[r]=t(n[r]))}return n};return t},en=ei(et),er=ei(ee);function es(e){if("boolean"==typeof e)return e;if(null==e)return!1;if("string"==typeof e){if("true"===e.toLowerCase())return!0;if("false"===e.toLowerCase())return!1}let t=parseInt(e,10);return!isNaN(t)&&t>0}var ea=class{#e;#t=864e5;constructor(e){this.#e=e}isEventThrottled(e){let t=Date.now(),i=this.#i(e),n=this.#e.getItem(i);return!!n&&!(t-n>this.#t)||(this.#e.setItem(i,t),!1)}#i(e){let{sk:t,pk:i,payload:n,...r}=e,s={...n,...r};return JSON.stringify(Object.keys({...n,...r}).sort().map(e=>s[e]))}},eo=class{#n="clerk_telemetry_throttler";getItem(e){return this.#r()[e]}setItem(e,t){try{let i=this.#r();i[e]=t,localStorage.setItem(this.#n,JSON.stringify(i))}catch(e){e instanceof DOMException&&("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&localStorage.length>0&&localStorage.removeItem(this.#n)}}removeItem(e){try{let t=this.#r();delete t[e],localStorage.setItem(this.#n,JSON.stringify(t))}catch{}}#r(){try{let e=localStorage.getItem(this.#n);if(!e)return{};return JSON.parse(e)}catch{return{}}}static isSupported(){return"undefined"!=typeof window&&!!window.localStorage}},el=class{#e=new Map;#s=1e4;getItem(e){return this.#e.size>this.#s?void this.#e.clear():this.#e.get(e)}setItem(e,t){this.#e.set(e,t)}removeItem(e){this.#e.delete(e)}};let ec=new Set(["error","warn","info","debug","trace"]);var ed=class{#a;#o;#l={};#c=[];#d=null;constructor(e){this.#a={maxBufferSize:e.maxBufferSize??5,samplingRate:e.samplingRate??1,perEventSampling:e.perEventSampling??!0,disabled:e.disabled??!1,debug:e.debug??!1,endpoint:"https://clerk-telemetry.com"},e.clerkVersion||"undefined"!=typeof window?this.#l.clerkVersion=e.clerkVersion??"":this.#l.clerkVersion="",this.#l.sdk=e.sdk,this.#l.sdkVersion=e.sdkVersion,this.#l.publishableKey=e.publishableKey??"";let t=B(e.publishableKey);t&&(this.#l.instanceType=t.instanceType),e.secretKey&&(this.#l.secretKey=e.secretKey.substring(0,16));let i=eo.isSupported()?new eo:new el;this.#o=new ea(i)}get isEnabled(){return!("development"!==this.#l.instanceType||this.#a.disabled||"undefined"!=typeof process&&process.env&&es(process.env.CLERK_TELEMETRY_DISABLED)||"undefined"!=typeof window&&window?.navigator?.webdriver)}get isDebug(){return this.#a.debug||"undefined"!=typeof process&&process.env&&es(process.env.CLERK_TELEMETRY_DEBUG)}record(e){try{let t=this.#h(e.event,e.payload);if(this.#u(t.event,t),!this.#p(t,e.eventSamplingRate))return;this.#c.push({kind:"event",value:t}),this.#f()}catch(e){console.error("[clerk/telemetry] Error recording telemetry event",e)}}recordLog(e){try{if(!this.#m(e))return;let t="string"==typeof e?.level&&ec.has(e.level),i="string"==typeof e?.message&&e.message.trim().length>0,n=null,r=e?.timestamp;if("number"==typeof r||"string"==typeof r){let e=new Date(r);Number.isNaN(e.getTime())||(n=e)}if(!t||!i||null===n){this.isDebug&&"undefined"!=typeof console&&console.warn("[clerk/telemetry] Dropping invalid telemetry log entry",{levelIsValid:t,messageIsValid:i,timestampIsValid:null!==n});return}let s=this.#_(),a={sdk:s.name,sdkv:s.version,cv:this.#l.clerkVersion??"",lvl:e.level,msg:e.message,ts:n.toISOString(),pk:this.#l.publishableKey||null,payload:this.#g(e.context)};this.#c.push({kind:"log",value:a}),this.#f()}catch(e){console.error("[clerk/telemetry] Error recording telemetry log entry",e)}}#p(e,t){return this.isEnabled&&!this.isDebug&&this.#y(e,t)}#m(e){return!0}#y(e,t){let i=Math.random();return!!(i<=this.#a.samplingRate&&(!1===this.#a.perEventSampling||void 0===t||i<=t))&&!this.#o.isEventThrottled(e)}#f(){if("undefined"==typeof window)return void this.#b();if(this.#c.length>=this.#a.maxBufferSize){this.#d&&("undefined"!=typeof cancelIdleCallback?cancelIdleCallback(Number(this.#d)):clearTimeout(Number(this.#d))),this.#b();return}this.#d||("requestIdleCallback"in window?this.#d=requestIdleCallback(()=>{this.#b(),this.#d=null}):this.#d=setTimeout(()=>{this.#b(),this.#d=null},0))}#b(){let e=[...this.#c];if(this.#c=[],this.#d=null,0===e.length)return;let t=e.filter(e=>"event"===e.kind).map(e=>e.value),i=e.filter(e=>"log"===e.kind).map(e=>e.value);t.length>0&&fetch(new URL("/v1/event",this.#a.endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({events:t})}).catch(()=>void 0),i.length>0&&fetch(new URL("/v1/logs",this.#a.endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({logs:i})}).catch(()=>void 0)}#u(e,t){this.isDebug&&(void 0!==console.groupCollapsed?(console.groupCollapsed("[clerk/telemetry]",e),console.log(t),console.groupEnd()):console.log("[clerk/telemetry]",e,t))}#_(){let e={name:this.#l.sdk,version:this.#l.sdkVersion};if("undefined"!=typeof window){let t=window;if(t.Clerk){let i=t.Clerk;if("object"==typeof i&&null!==i&&"constructor"in i&&"function"==typeof i.constructor&&i.constructor.sdkMetadata){let{name:t,version:n}=i.constructor.sdkMetadata;void 0!==t&&(e.name=t),void 0!==n&&(e.version=n)}}}return e}#h(e,t){let i=this.#_();return{event:e,cv:this.#l.clerkVersion??"",it:this.#l.instanceType??"",sdk:i.name,sdkv:i.version,...this.#l.publishableKey?{pk:this.#l.publishableKey}:{},...this.#l.secretKey?{sk:this.#l.secretKey}:{},payload:t}}#g(e){if(null==e||"object"!=typeof e)return null;try{let t=JSON.parse(JSON.stringify(e));if(t&&"object"==typeof t&&!Array.isArray(t))return t;return null}catch{return null}}};let eh="COMPONENT_MOUNTED",eu=new Set(["SignIn","SignUp"]);function ep(e){return function(t,i,n){return{event:e,eventSamplingRate:e===eh?eu.has(t)?1:.1:.1,payload:{component:t,appearanceProp:!!i?.appearance,baseTheme:!!i?.appearance?.baseTheme,elements:!!i?.appearance?.elements,variables:!!i?.appearance?.variables,...n}}}}function ef(e,t,i){return ep(eh)(e,t,i)}function em(e,t,i){return ep("COMPONENT_OPENED")(e,t,i)}function e_(e){return"string"==typeof e?e:"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name?e.name:void 0}let eg=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/;function ey(e,t,i){return"function"==typeof e?e(t):void 0!==e?e:void 0!==i?i:void 0}let eb=(...e)=>{},ew=!1,ev=null,eS=!1,ek=[];function eC(e,t,i,n){ew&&(ek.push({level:e,message:t,context:i,source:n,ts:Date.now()}),ek.length>200&&ek.shift())}async function eA(e){try{if(!ew||ev)return;let{getDebugLogger:t}=await i.e("785").then(i.bind(i,3656)),n=await t({logLevel:e?.logLevel,telemetryCollector:e?.telemetryCollector});if(n&&(ev=n)&&0!==ek.length){for(let e of ek){let t={...e.context||{},__preInit:!0,__preInitTs:e.ts};switch(e.level){case"error":ev.error(e.message,t,e.source);break;case"warn":ev.warn(e.message,t,e.source);break;case"info":ev.info(e.message,t,e.source);break;case"debug":ev.debug(e.message,t,e.source)}}ek.length=0}}catch(e){try{console.debug?.("Debug logger initialization failed",e)}catch{}return}}let eU={debug(e,t,i){if(!ev)return void eC("debug",e,t,i);ev.debug(e,t,i)},error(e,t,i){if(!ev)return void eC("error",e,t,i);ev.error(e,t,i)},info(e,t,i){if(!ev)return void eC("info",e,t,i);ev.info(e,t,i)},warn(e,t,i){if(!ev)return void eC("warn",e,t,i);ev.warn(e,t,i)}},eI="clerk:beforeunload",eP=["http:","https:","wails:","chrome-extension:"];function eO(e){let t=new URL(e,window.location.href);window.dispatchEvent(new CustomEvent(eI)),window.location.href=t.href}let eT=(e=!1)=>{if(!e)return{track:async e=>{await e()},isUnloading:()=>!1};let t=(()=>{let e=!1,t=()=>e=!0;return{startListening:()=>{window.addEventListener("beforeunload",t),window.addEventListener(eI,t)},stopListening:()=>{window.removeEventListener("beforeunload",t),window.removeEventListener(eI,t)},isUnloading:()=>e}})();return{track:async e=>{t.startListening(),await e(),t.stopListening()},isUnloading:t.isUnloading}},eE=e=>({amount:e.amount,amountFormatted:e.amount_formatted,currency:e.currency,currencySymbol:e.currency_symbol}),ex=e=>{let t={grandTotal:eE(e.grand_total),subtotal:eE(e.subtotal),taxTotal:eE(e.tax_total)};return"past_due"in e&&(t.pastDue=e.past_due?eE(e.past_due):null),"credit"in e&&(t.credit=e.credit?eE(e.credit):null),"total_due_now"in e&&(t.totalDueNow=eE(e.total_due_now)),"total_due_after_free_trial"in e&&(t.totalDueAfterFreeTrial=e.total_due_after_free_trial?eE(e.total_due_after_free_trial):null),t},eR="__clerk_synced",eM="suffixed_cookies",eN="__clerk_satellite_url",eF=["__clerk_status","__clerk_created_session","__clerk_invitation_token","__clerk_ticket","__clerk_modal_state","__clerk_handshake","__clerk_handshake_nonce","__clerk_help",Q,eR,eN,eM];function ez(e){return new URL(window.location.href).searchParams.get(e)||null}function eD(e){let t=new URL(window.location.href);t.searchParams.has(e)&&(t.searchParams.delete(e),window.history.replaceState(window.history.state,"",t))}function eW(e){let t=new URLSearchParams(window.location.search),i=e||new URLSearchParams;for(let e of eF){let n=t.get(e);n&&i.set(e,n)}return i}let eL=(e,t)=>!!(e.isSignedIn&&t?.authConfig.singleSessionMode),e$=(e,t)=>!t?.organizationSettings.enabled,ej=(e,t)=>!t?.commerceSettings.billing.user.enabled&&!t?.commerceSettings.billing.organization.enabled,eJ=(e,t)=>!t?.apiKeysSettings?.user_api_keys_enabled,eK=(e,t)=>!t?.apiKeysSettings?.orgs_api_keys_enabled;function eB(e,t=""){return e.errors&&!!e.errors.find(e=>e.code===t)}let eV=function({packageName:e,customMessages:t}){let i=e;function n(e,t){if(!t)return`${i}: ${e}`;let n=e;for(let i of e.matchAll(/{{([a-zA-Z0-9-_]+)}}/g)){let e=(t[i[1]]||"").toString();n=n.replace(`{{${i[1]}}}`,e)}return`${i}: ${n}`}let r={...C,...t};return{setPackageName({packageName:e}){return"string"==typeof e&&(i=e),this},setMessages({customMessages:e}){return Object.assign(r,e||{}),this},throwInvalidPublishableKeyError(e){throw Error(n(r.InvalidPublishableKeyErrorMessage,e))},throwInvalidProxyUrl(e){throw Error(n(r.InvalidProxyUrlErrorMessage,e))},throwMissingPublishableKeyError(){throw Error(n(r.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw Error(n(r.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(e){throw Error(n(r.MissingClerkProvider,e))},throw(e){throw Error(n(e))}}}({packageName:"@clerk/clerk-js"});var eq=i(4763);let eH=RegExp("/{1,}","g"),eG=(e,t={})=>{if(null==e||!e||"object"!=typeof e)return"";let i=new URLSearchParams;return Object.keys(e).forEach(n=>{let r=t.keyEncoder?t.keyEncoder(n):n,s=e[n];if(Array.isArray(s))s.forEach(e=>void 0!==e&&i.append(r,e||""));else{if(void 0===s)return;"object"==typeof s&&null!==s?i.append(r,JSON.stringify(s)):i.append(r,String(s??""))}}),i.toString()},eY="http://clerk-dummy",eQ=["javascript:"],{isDevOrStagingUrl:eX}=function(){let e=new Map;return{isDevOrStagingUrl:t=>{if(!t)return!1;let i="string"==typeof t?t:t.hostname,n=e.get(i);return void 0===n&&(n=$.some(e=>i.endsWith(e)),e.set(i,n)),n}}}(),eZ=new Map;function e0(e){return e.replace("clerk.","")}function e1(e,t={}){let{base:i,hashPath:n,hashSearch:r,searchParams:s,hashSearchParams:a,...o}=e,l=new URL(i||"","undefined"!=typeof window&&window.location?window.location.href:"http://react-native-fake-base-url");if(s instanceof URLSearchParams&&s.forEach((e,t)=>{null!=e&&l.searchParams.set(et(t),e)}),Object.assign(l,o),n||r||a){var c;let e=new URL(eY+l.hash.substring(1));for(let[t,i]of(c=e.pathname,e.pathname=[c,n||""].filter(e=>e).join("/").replace(eH,"/"),Object.entries((e=>{let t={};return new URLSearchParams(e).forEach((e,i)=>{if(i in t){let n=t[i];Array.isArray(n)?n.push(e):t[i]=[n,e]}else t[i]=e}),t})(r||""))))e.searchParams.append(t,i);if(a)for(let t of Array.isArray(a)?a:[a])(t instanceof URLSearchParams||"object"==typeof t)&&new URLSearchParams(t).forEach((t,i)=>{null!=t&&e.searchParams.set(et(i),t)});let t=e.href.replace(eY,"");"/"!==t&&(l.hash=t)}let{stringify:d,skipOrigin:h}=t;return d?h?l.href.replace(l.origin,""):l.href:l}function e3(e){return void 0===window.location&&"string"==typeof e?e:(e=new URL(e.toString(),window.location.origin)).href.replace(e.origin,"")}let e2=e=>(e||"").replace(/\/+$/,"");function e4(e,t){try{return new URL(e)}catch{return new URL(e,t)}}let e6=[/\0/,/^\/\//,/[\x00-\x1F]/],e5=["/oauth/authorize"],e7=["/v1/verify","/v1/tickets/accept","/oauth/authorize-with-immediate-redirect","/oauth/end_session"];function e8(e){var t;return t=e.replace(/_/g,"/").replace(/-/g,"+"),decodeURIComponent(i.g.atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""))}function e9(e){let t=(e||"").split("."),[i,n,r]=t;if(3!==t.length||!i||!n||!r)throw Error("JWT could not be decoded");let s=JSON.parse(e8(n)),a={__raw:e};return Object.keys(s).forEach(e=>{a[e]=s[e]}),{encoded:{header:i,payload:n,signature:r},header:JSON.parse(e8(i)),claims:a}}function te(){if(!a())return null;try{let e=navigator?.language;if(!e||"string"!=typeof e||""===e.trim())return null;return e}catch{return null}}function tt(){return void 0!==globalThis.document}function ti(){return function(){if(!tt())return!1;try{return window.self!==window.top}catch{return!0}}()&&!window.frameElement}class tn{#w=[];#v={metamask:"MetaMask",okx_wallet:"OKX Wallet"};static #S=null;constructor(){if("undefined"==typeof window)return;window.addEventListener("eip6963:announceProvider",this.#k),window.dispatchEvent(new Event("eip6963:requestProvider"))}static getInstance(){return tn.#S||(tn.#S=new tn),tn.#S}get=e=>{let t=this.#w.find(t=>t.info.name===this.#v[e])?.provider;return void 0!==t?t:window.ethereum};#k=e=>{this.#w.some(t=>t.info.uuid===e.detail.info.uuid)||this.#w.push(e.detail)}}async function tr(e){let{provider:t}=e,i=await tf(t);if(!i)return"";let n=await i.request({method:"eth_requestAccounts"});return n&&n[0]||""}async function ts(e){let{identifier:t,nonce:i,provider:n}=e,r=await tf(n);return r?await r.request({method:"personal_sign",params:[`0x${i.split("").map(e=>e.charCodeAt(0).toString(16).padStart(2,"0")).join("")}`,t]}):""}async function ta(){return await tr({provider:"metamask"})}async function to(){return await tr({provider:"coinbase_wallet"})}async function tl(){return await tr({provider:"okx_wallet"})}async function tc(){return await tr({provider:"base"})}async function td(e){return await ts({...e,provider:"metamask"})}async function th(e){return await ts({...e,provider:"coinbase_wallet"})}async function tu(e){return await ts({...e,provider:"okx_wallet"})}async function tp(e){return await ts({...e,provider:"base"})}async function tf(e){if("coinbase_wallet"===e)return(await i.e("368").then(i.bind(i,9373)).then(e=>e.createCoinbaseWalletSDK))({preference:{options:"all"}}).getProvider();if("base"===e)try{return(await i.e("692").then(i.bind(i,8692)).then(e=>e.createBaseAccountSDK))({appName:"undefined"!=typeof window&&window.Clerk?.__unstable__environment?.displayConfig?.applicationName||"undefined"!=typeof document&&document.title||"Web3 Application"}).getProvider()}catch{return null}return tn.getInstance().get(e)}function tm(e){let t=["redirectUrl","afterSignInUrl","afterSignUpUrl","after_sign_in_url","after_sign_up_url"],i=Object.keys(e).find(e=>t.includes(e));i&&e[i]&&Y(`Clerk: The prop "${i}" is deprecated and should be replaced with the new "fallbackRedirectUrl" or "forceRedirectUrl" props instead. Learn more: https://clerk.com/docs/guides/custom-redirects#redirect-url-props`)}let t_="environment",tg=JSON.stringify,ty=JSON.parse;class tb{static _key(e){return`__clerk_${e}`}static isExpired(e){return!!e.exp&&Date.now()>e.exp}static setItem(e,t,i){try{let n={value:t,...i&&{exp:Date.now()+i}};window.localStorage.setItem(this._key(e),tg(n))}catch{}}static getItem(e,t){try{let i=window.localStorage.getItem(this._key(e));if(!i)return t;let n=ty(i);if(!n)return t;if(this.isExpired(n))return this.removeItem(e),t;return n?.value??t}catch{return t}}static removeItem(e){try{window.localStorage.removeItem(this._key(e))}catch{}}}let tw="ClerkJS:";function tv(e=""){throw Error(`${tw} Something went wrong initializing Clerk in development mode.${e&&` ${e}`}`)}function tS(e){throw Error(`${tw} Something went wrong initializing Clerk during the ${e} flow. Please contact support.`)}function tk(e){throw Error(`${tw} You need to start a ${e} flow by calling ${e}.create() first.`)}function tC(e,t){throw Error(`${tw} Strategy "${t}" is not a valid strategy for ${e}.`)}function tA(e){throw Error(`${tw} You need to start a ${e} flow by calling ${e}.create({ identifier: 'your web3 wallet address' }) first`)}function tU(){throw Error(`${tw} You need to start a SignIn flow by calling SignIn.create({ strategy: 'passkey' }) first`)}function tI(e=""){throw Error(`${tw} Missing '${e}' option`)}function tP(e,t){throw Error(`${tw} Response: ${e||0} not supported yet.
For more information contact us at ${t}`)}function tO(e){throw Error(`${tw} Missing publicKey. When calling 'navigator.credentials.${e}()' it is required to pass a publicKey object.`)}let tT={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:(e,t)=>t<5,retryImmediately:!1,jitter:!0},tE=async e=>new Promise(t=>setTimeout(t,e)),tx=(e,t)=>t?e*(1+Math.random()):e,tR=async(e,t={})=>{var i;let n,r=0,{shouldRetry:s,initialDelay:a,maxDelayBetweenRetries:o,factor:l,retryImmediately:c,jitter:d,onBeforeRetry:h}={...tT,...t},u=(i={initialDelay:a,maxDelayBetweenRetries:o,factor:l,jitter:d},n=0,async()=>{let e;await tE((e=tx(e=i.initialDelay*Math.pow(i.factor,n),i.jitter),Math.min(i.maxDelayBetweenRetries||e,e))),n++});for(;;)try{return await e()}catch(e){if(!s(e,++r))throw e;h&&await h(r),c&&1===r?await tE(tx(100,d)):await u()}};async function tM(e="",t){let{async:i,defer:n,beforeLoad:r,crossOrigin:s,nonce:a}=t||{};return tR(()=>new Promise((t,o)=>{e||o(Error("loadScript cannot be called without a src")),document&&document.body||o(Error("loadScript cannot be called when document does not exist"));let l=document.createElement("script");s&&l.setAttribute("crossorigin",s),l.async=i||!1,l.defer=n||!1,l.addEventListener("load",()=>{l.remove(),t(l)}),l.addEventListener("error",t=>{l.remove(),o(t.error??Error(`failed to load script: ${e}`))}),l.src=e,l.nonce=a,r?.(l),document.body.appendChild(l)}),{shouldRetry:(e,t)=>t<=5})}let tN="clerk-captcha",tF="clerk-invisible-captcha";async function tz(e){return window.turnstile||await tD(e).catch(()=>{throw{captchaError:"captcha_script_failed_to_load"}}),window.turnstile}async function tD(e){try{return await tM("https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit",{defer:!0,nonce:e})}catch(e){throw console.warn("Clerk: Failed to load the CAPTCHA script from Cloudflare. If you see a CSP error in your browser, please add the necessary CSP rules to your app. Visit https://clerk.com/docs/security/clerk-csp for more information."),e}}function tW(e){try{let t=e.getAttribute("data-cl-theme")||void 0,i=e.getAttribute("data-cl-language")||void 0,n=e.getAttribute("data-cl-size")||void 0;return{theme:t,language:i,size:n}}catch{return{theme:void 0,language:void 0,size:void 0}}}let tL=async e=>{let t,i,n,r,{siteKey:s,widgetType:a,invisibleSiteKey:o,nonce:l}=e,{modalContainerQuerySelector:c,modalWrapperQuerySelector:d,closeModal:h,openModal:u}=e,p=await tz(l),f=[],m="",_="",g=s,y=0,b=null,w="invisible";if(c&&d){b=a,r=c,w="modal";try{await u?.()}catch{throw{captchaError:"modal_component_not_ready"}}let e=await new Promise(e=>{if(document.querySelector(c))return e(document.querySelector(c));let t=new MutationObserver(()=>{document.querySelector(c)&&(t.disconnect(),e(document.querySelector(c)))});t.observe(document.body,{childList:!0,subtree:!0})});if(e){let{theme:r,language:s,size:a}=tW(e);t=r,n=s,i=a}}if(!r&&"smart"===a){let e=document.getElementById(tN);if(e){w="smart",b="smart",r=`#${tN}`,e.style.maxHeight="0";let{theme:s,language:a,size:o}=tW(e);t=s,n=a,i=o}else console.error("Cannot initialize Smart CAPTCHA widget because the `clerk-captcha` DOM element was not found; falling back to Invisible CAPTCHA widget. If you are using a custom flow, visit https://clerk.com/docs/guides/development/custom-flows/bot-sign-up-protection for instructions")}if(!r){w="invisible",g=o,b="invisible",r=`.${tF}`;let e=document.createElement("div");e.classList.add(tF),e.style.display="none",document.body.appendChild(e)}let v=async()=>new Promise((s,a)=>{try{let o=p.render(r,{sitekey:g,appearance:"interaction-only",theme:t||"auto",size:i||"normal",language:n||"auto",action:e.action,retry:"never","refresh-expired":"auto",callback:function(e){h?.(),s([e,o])},"before-interactive-callback":()=>{if(d){let e=document.querySelector(d);e?.style.setProperty("visibility","visible"),e?.style.setProperty("pointer-events","all")}else{let e=document.getElementById(tN);e&&(e.style.maxHeight="unset",e.style.minHeight="compact"===i?"140px":"68px",e.style.marginBottom="1.5rem")}},"error-callback":function(e){var t;if(f.push(e),y<2&&(t=e.toString(),["crashed","undefined_error","102","103","104","106","110600","300","600"].find(e=>t.startsWith(e))))return void setTimeout(()=>{p.reset(o),y++},250);a([f.join(","),o])},"unsupported-callback":function(){return a(["This browser is not supported by the CAPTCHA.",o]),!0}})}catch(e){a([e,void 0])}});try{[m,_]=await v(),p.remove(_)}catch([e,t]){throw t&&p.remove(t),{captchaError:e}}finally{if("modal"===w&&h?.(),"invisible"===w){let e=document.querySelector(`.${tF}`);e&&document.body.removeChild(e)}if("smart"===w){let e=document.getElementById(tN);e&&(e.style.maxHeight="0",e.style.minHeight="unset",e.style.marginBottom="unset")}}return{captchaToken:m,captchaWidgetType:b}},t$=e=>tL(e),tj=e=>{let t=e.__unstable__environment,i=t?t.displayConfig.captchaProvider:"turnstile",n=e.__internal_getOption?.("nonce");return{captchaSiteKey:t?t.displayConfig.captchaPublicKey:null,captchaWidgetType:t?t.displayConfig.captchaWidgetType:null,captchaProvider:i,captchaPublicKeyInvisible:t?t.displayConfig.captchaPublicKeyInvisible:null,canUseCaptcha:t?t.userSettings.signUp.captcha_enabled&&e.isStandardBrowser:null,nonce:n||void 0}};class tJ{clerk;constructor(e){this.clerk=e}async invisible(e){let{captchaSiteKey:t,canUseCaptcha:i,captchaPublicKeyInvisible:n,nonce:r}=tj(this.clerk);return i&&t&&n?{...await t$({action:e?.action,captchaProvider:"turnstile",invisibleSiteKey:n,nonce:e?.nonce||r||void 0,siteKey:n,widgetType:"invisible"}).catch(e=>e.captchaError?{captchaError:e.captchaError}:{captchaError:e?.message||e||"unexpected_captcha_error"}),captchaAction:e?.action}:{captchaError:"captcha_unavailable",captchaAction:e?.action}}async managedOrInvisible(e){let{captchaSiteKey:t,canUseCaptcha:i,captchaWidgetType:n,captchaProvider:r,captchaPublicKeyInvisible:s,nonce:a}=tj(this.clerk);if(i&&t&&s){let i=await t$({captchaProvider:r,invisibleSiteKey:s,nonce:a||void 0,siteKey:t,widgetType:n,...e}).catch(t=>t.captchaError?{captchaError:t.captchaError}:e?.action==="verify"?{captchaError:t?.message||t||"unexpected_captcha_error"}:void 0);return e?.action==="verify"?{...i,captchaAction:"verify"}:i}return e?.action==="verify"?{captchaError:"captcha_unavailable",captchaAction:e?.action}:{}}async managedInModal(e){return this.managedOrInvisible({modalWrapperQuerySelector:"#cl-modal-captcha-wrapper",modalContainerQuerySelector:"#cl-modal-captcha-container",openModal:()=>this.clerk.__internal_openBlankCaptchaModal(),closeModal:()=>this.clerk.__internal_closeBlankCaptchaModal(),action:e?.action})}}class tK{client;CaptchaChallengeImpl;static instance;inflightException=null;captchaRetryCount=0;MAX_RETRY_ATTEMPTS=3;static getInstance(){return tK.instance||(tK.instance=new tK(t2,tJ)),tK.instance}constructor(e,t){this.client=e,this.CaptchaChallengeImpl=t}async execute(e,t){if(this.captchaAttemptsExceeded())throw new P("Security verification failed. Please try again by refreshing the page, clearing your browser cookies, or using a different web browser.",{code:"captcha_client_attempts_exceeded"});try{return this.inflightException&&await this.inflightException,await t()}catch(n){let i;if(!R(n)||n.errors[0]?.code!=="requires_captcha")throw n;if(this.inflightException)return await this.inflightException,await t();this.inflightException=new Promise(e=>i=e);try{let t=await this.managedChallenge(e);t?.captchaError!=="modal_component_not_ready"&&(await this.client.getOrCreateInstance().__internal_sendCaptchaToken(t),this.captchaRetryCount=0)}catch(e){throw this.captchaRetryCount++,e}finally{i(),this.inflightException=null}return await t()}}managedChallenge(e){return new this.CaptchaChallengeImpl(e).managedInModal({action:"verify"})}captchaAttemptsExceeded=()=>this.captchaRetryCount>=this.MAX_RETRY_ATTEMPTS}class tB{static clerk;id;pathRoot="";static get fapiClient(){return tB.clerk.getFapiClient()}async reload(e){let{rotatingTokenNonce:t}=e||{};return this._baseGet({forceUpdateClient:!0,rotatingTokenNonce:t})}isNew(){return!this.id}static async _fetch(e,t={}){return tK.getInstance().execute(this.clerk,()=>this._baseFetch(e,t))}static async _baseFetch(e,t={}){let i;tB.fapiClient||function(){throw Error(`${tw} Missing FAPI client in resources.`)}();let{fetchMaxTries:n}=t;try{i=await tB.fapiClient.request(e,{fetchMaxTries:n})}catch(t){if(this.shouldRethrowOfflineNetworkErrors())throw new P(t?.message||t,{code:"network_error"});if(!d())return eU.warn("Network request failed while offline, returning null",{method:e.method,path:e.path},"baseResource"),null;throw t}let{payload:r,status:s,statusText:a,headers:o}=i;if(o){let e=o.get("x-country");this.clerk.__internal_setCountry(e?e.toLowerCase():null)}if(("GET"!==e.method||t.forceUpdateClient)&&this._updateClient(r),s>=200&&s<=299)return r;if(s>=400){let e=r?.errors,t=e?.[0]?.long_message,i=e?.[0]?.code;401===s&&"requires_captcha"!==i&&await tB.clerk.handleUnauthenticated(),function(e,t){var i;if(!t||!t[0])return;let n=t[0],r=n.long_message;if("origin_invalid"===n.code&&((i=tB.clerk.publishableKey).startsWith("live_")||i.startsWith("pk_live_"))){let i=tB.clerk.frontendApi.replace("clerk.","");throw new S(`Clerk: Production Keys are only allowed for domain "${i}". 
API Error: ${r}`,{data:t,status:e})}}(s,e);let n={data:e,status:s};if(429===s&&o){let e=o.get("retry-after");if(e){let t=parseInt(e,10);isNaN(t)||(n.retryAfter=t)}}throw new S(t||a,n)}return null}static _updateClient(e){if(!e)return;let t=e.client||e.meta?.client;t&&tB.clerk&&tB.clerk.updateClient(t2.getOrCreateInstance().fromJSON(t))}path(e){let t=this.pathRoot;if(this.isNew())return t;let i=t.replace(/[^/]$/,"$&/")+encodeURIComponent(this.id);return e?i.replace(/[^/]$/,"$&/")+encodeURIComponent(e):i}withDefault(e,t){return e??t}async _baseGet(e={}){let t=await tB._fetch({method:"GET",path:this.path(),rotatingTokenNonce:e.rotatingTokenNonce},e);return this.fromJSON(t?.response||t)}async _baseMutate(e){let{action:t,body:i,method:n,path:r}=e,s=await tB._fetch({method:n,path:r||this.path(t),body:i});return this.fromJSON(s?.response||s)}async _baseMutateBypass(e){let{action:t,body:i,method:n,path:r}=e,s=await tB._baseFetch({method:n,path:r||this.path(t),body:i});return this.fromJSON(s?.response||s)}async _basePost(e={}){return this._baseMutate({...e,method:"POST"})}async _basePostBypass(e={}){return this._baseMutateBypass({...e,method:"POST"})}async _basePut(e={}){return this._baseMutate({...e,method:"PUT"})}async _basePatch(e={}){return this._baseMutate({...e,method:"PATCH"})}async _baseDelete(e={}){await this._baseMutate({...e,method:"DELETE"})}static shouldRethrowOfflineNetworkErrors(){let e=tB.clerk?.__internal_getOption?.("experimental");return e?.rethrowOfflineNetworkErrors||!1}}let tV={enabled:!1,first_factors:[],name:"phone_number",required:!1,second_factors:[],used_for_first_factor:!1,used_for_second_factor:!1,verifications:[],verify_at_sign_up:!1};class tq extends tB{id=void 0;actions={create_organization:!1,delete_self:!1};attributes={email_address:{enabled:!0,first_factors:["email_code"],name:"email_address",required:!0,second_factors:[],used_for_first_factor:!0,used_for_second_factor:!1,verifications:["email_code"],verify_at_sign_up:!0},phone_number:{...tV,name:"phone_number"},username:{...tV,name:"username"},web3_wallet:{...tV,name:"web3_wallet"},first_name:{...tV,name:"first_name"},last_name:{...tV,name:"last_name"},password:{enabled:!0,first_factors:[],name:"password",required:!0,second_factors:[],used_for_first_factor:!1,used_for_second_factor:!1,verifications:[],verify_at_sign_up:!1},authenticator_app:{...tV,name:"authenticator_app"},backup_code:{...tV,name:"backup_code"},passkey:{...tV,name:"passkey"}};enterpriseSSO={enabled:!1};passkeySettings={allow_autofill:!1,show_sign_in_button:!1};passwordSettings={};saml={enabled:!1};signIn={second_factor:{required:!1,enabled:!1}};signUp={allowlist_only:!1,captcha_enabled:!1,legal_consent_enabled:!1,mode:"public",progressive:!0};social={};usernameSettings={};get authenticatableSocialStrategies(){return this.social?Object.entries(this.social).filter(([,e])=>e.enabled&&e.authenticatable).map(([,e])=>e.strategy).sort():[]}get enabledFirstFactorIdentifiers(){return this.attributes?Object.entries(this.attributes).filter(([e,t])=>t.used_for_first_factor&&!e.startsWith("web3")).map(([e])=>e):[]}get socialProviderStrategies(){return this.social?Object.entries(this.social).filter(([,e])=>e.enabled).map(([,e])=>e.strategy).sort():[]}get web3FirstFactors(){return this.attributes?Object.entries(this.attributes).filter(([e,t])=>t.used_for_first_factor&&e.startsWith("web3")).map(([,e])=>e.first_factors).flat():[]}get alternativePhoneCodeChannels(){return this.attributes?Object.entries(this.attributes).filter(([e,t])=>t.used_for_first_factor&&"phone_number"===e).map(([,e])=>e?.channels?.filter(e=>"sms"!==e)||[]).flat():[]}constructor(e=null){super(),this.fromJSON(e)}get instanceIsPasswordBased(){return!!(this.attributes?.password?.enabled&&this.attributes.password?.required)}get hasValidAuthFactor(){return!!(this.attributes?.email_address?.enabled||this.attributes?.phone_number?.enabled||this.attributes.password?.required&&this.attributes.username?.required)}fromJSON(e){return e&&(this.attributes=this.withDefault(e.attributes?Object.fromEntries(Object.entries(e.attributes).map(e=>[e[0],{...e[1],name:e[0]}])):null,this.attributes),this.actions=this.withDefault(e.actions,this.actions),this.enterpriseSSO=this.withDefault(e.enterprise_sso,this.enterpriseSSO),this.passkeySettings=this.withDefault(e.passkey_settings,this.passkeySettings),this.passwordSettings=e.password_settings?{...e.password_settings,min_length:Math.max(e.password_settings?.min_length??8,8),max_length:e.password_settings?.max_length===0?72:Math.min(e.password_settings?.max_length??72,72)}:this.passwordSettings,this.saml=this.withDefault(e.saml,this.saml),this.signIn=this.withDefault(e.sign_in,this.signIn),this.signUp=this.withDefault(e.sign_up,this.signUp),this.social=this.withDefault(e.social,this.social),this.usernameSettings=e.username_settings?{...e.username_settings,min_length:Math.max(e.username_settings?.min_length??4,4),max_length:Math.min(e.username_settings?.max_length??64,64)}:this.usernameSettings),this}__internal_toSnapshot(){return{actions:this.actions,attributes:this.attributes,passkey_settings:this.passkeySettings,password_settings:this.passwordSettings,saml:this.saml,sign_in:this.signIn,sign_up:this.signUp,social:this.social}}}class tH extends tB{billing={stripePublishableKey:null,organization:{enabled:!1,hasPaidPlans:!1},user:{enabled:!1,hasPaidPlans:!1}};constructor(e=null){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.billing.stripePublishableKey=e.billing.stripe_publishable_key,this.billing.organization.enabled=e.billing.organization.enabled,this.billing.organization.hasPaidPlans=e.billing.organization.has_paid_plans,this.billing.user.enabled=e.billing.user.enabled,this.billing.user.hasPaidPlans=e.billing.user.has_paid_plans),this}__internal_toSnapshot(){return{billing:{stripe_publishable_key:this.billing.stripePublishableKey,organization:{enabled:this.billing.organization.enabled,has_paid_plans:this.billing.organization.hasPaidPlans},user:{enabled:this.billing.user.enabled,has_paid_plans:this.billing.user.hasPaidPlans}}}}}function tG(e){let t=new Date(e||new Date);return t instanceof Date&&!isNaN(t.getTime())?t:new Date}class tY extends tB{claimedAt=null;reverification=!1;singleSessionMode=!1;preferredChannels=null;constructor(e=null){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.claimedAt=this.withDefault(e.claimed_at?tG(e.claimed_at):null,this.claimedAt),this.reverification=this.withDefault(e.reverification,this.reverification),this.singleSessionMode=this.withDefault(e.single_session_mode,this.singleSessionMode),this.preferredChannels=this.withDefault(e.preferred_channels,this.preferredChannels)),this}__internal_toSnapshot(){return{claimed_at:this.claimedAt?this.claimedAt.getTime():null,id:this.id??"",object:"auth_config",reverification:this.reverification,single_session_mode:this.singleSessionMode}}}let tQ={build:(e,t,i)=>[e,t,i].filter(Boolean).join("-"),parse:(e,t,i)=>{let n=tQ.extractTemplate(e,t,i);return{organizationId:i,sessionId:t,template:n}},extractTemplate:(e,t,i)=>{if(e===t||i&&e===`${t}-${i}`)return;let n=e.slice(t.length+1);return i&&n.endsWith(`-${i}`)&&(n=n.slice(0,-(i.length+1))),n||void 0}},tX="clerk",tZ=10,t0={broadcast:!0};class t1{prefix;data;static fromKey(e){let[t,i,n=""]=e.split("::");return new t1(t,{audience:n,tokenId:i})}constructor(e,t){this.prefix=e,this.data=t,this.prefix=e,this.data=t}toKey(){let{tokenId:e,audience:t}=this.data;return[this.prefix,e,t||""].join("::")}}let t3=((e=tX)=>{let t=new Map,i=null;return{clear:()=>{t.forEach(e=>{void 0!==e.timeoutId&&clearTimeout(e.timeoutId)}),t.clear()},close:()=>{i&&(i.close(),i=null)},get:(i,n=tZ)=>{let r=new t1(e,i),s=t.get(r.toKey());if(!s)return;let a=Math.floor(Date.now()/1e3)-s.createdAt;if(s.expiresIn-a<(n||1)+5){void 0!==s.timeoutId&&clearTimeout(s.timeoutId),t.delete(r.toKey());return}return s.entry},set:n=>{((n,r=t0)=>{let s=new t1(e,{audience:n.audience,tokenId:n.tokenId}).toKey(),a=Math.floor(Date.now()/1e3),o={createdAt:n.createdAt??a,entry:n,expiresIn:void 0},l=()=>{let e=t.get(s);e===o&&(void 0!==e.timeoutId&&clearTimeout(e.timeoutId),t.delete(s))};n.tokenResolver.then(e=>{let t=e.jwt?.claims;if(!t||"number"!=typeof t.exp||"number"!=typeof t.iat)return l();let s=t.exp-t.iat;o.expiresIn=s;let a=setTimeout(l,1e3*s);o.timeoutId=a,"function"==typeof a.unref&&a.unref();let c=i;if(c&&r.broadcast){let i=e.getRawString();if(i&&t.sid){let e=t.sid,r=t.org_id||t.o?.id,s=tQ.extractTemplate(n.tokenId,e,r),a=tQ.build(e,s,r);if(n.tokenId===a){let t=`bc_${Date.now()}_${Math.random().toString(36).substring(2,11)}`;eU.info("Broadcasting token update to other tabs",{organizationId:r,sessionId:e,template:s,tokenId:n.tokenId,traceId:t},"tokenCache");let a={organizationId:r,sessionId:e,template:s,tokenId:n.tokenId,tokenRaw:i,traceId:t};c.postMessage(a)}}}}).catch(()=>{l()}),t.set(s,o)})(n,t0)},size:()=>t.size}})();class t2 extends tB{static instance;pathRoot="/client";sessions=[];signUp=new n_;signIn=new nu;lastActiveSessionId=null;captchaBypass=!1;cookieExpiresAt=null;lastAuthenticationStrategy=null;createdAt=null;updatedAt=null;static getOrCreateInstance(e=null){return t2.instance||(t2.instance=new t2(e)),t2.instance}static clearInstance(){t2.instance=null}static isClientResource(e){return!!e&&e instanceof t2}constructor(e=null){super(),this.fromJSON(e)}get signUpAttempt(){return this.signUp}get signInAttempt(){return this.signIn}get activeSessions(){return this.sessions.filter(e=>"active"===e.status)}get signedInSessions(){return this.sessions.filter(e=>"active"===e.status||"pending"===e.status)}create(){return this._basePut()}fetch({fetchMaxTries:e}={}){return this._baseGet({fetchMaxTries:e})}async destroy(){return this._baseDelete({path:"/client"}).then(()=>{t3.clear(),this.id="",this.sessions=[],this.signUp=new n_(null),this.signIn=new nu(null),this.lastActiveSessionId=null,this.lastAuthenticationStrategy=null,this.cookieExpiresAt=null,this.createdAt=null,this.updatedAt=null})}removeSessions(){return this._baseDelete({path:this.path()+"/sessions"}).then(e=>(t3.clear(),e))}clearCache(){return this.sessions.forEach(e=>e.clearCache())}isEligibleForTouch(){return!!this.cookieExpiresAt&&this.cookieExpiresAt.getTime()-Date.now()<=6912e5}buildTouchUrl({redirectUrl:e}){return tB.fapiClient.buildUrl({method:"GET",path:"/client/touch",pathPrefix:"v1",search:{redirect_url:e.toString()}}).toString()}__internal_sendCaptchaToken(e){return this._basePostBypass({body:e,path:this.path()+"/verify"})}fromJSON(e){return e&&(this.id=e.id,this.sessions=(e.sessions||[]).map(e=>new nr(e)),this.signUp=new n_(e.sign_up),this.signIn=new nu(e.sign_in),this.lastActiveSessionId=e.last_active_session_id,this.captchaBypass=e.captcha_bypass||!1,this.cookieExpiresAt=e.cookie_expires_at?tG(e.cookie_expires_at):null,this.lastAuthenticationStrategy=e.last_authentication_strategy||null,this.createdAt=tG(e.created_at||void 0),this.updatedAt=tG(e.updated_at||void 0)),this}__internal_toSnapshot(){return{object:"client",id:this.id||"",sessions:this.sessions.map(e=>e.__internal_toSnapshot()),sign_up:this.signUp.__internal_toSnapshot(),sign_in:this.signIn.__internal_toSnapshot(),last_active_session_id:this.lastActiveSessionId,captcha_bypass:this.captchaBypass,cookie_expires_at:this.cookieExpiresAt?this.cookieExpiresAt.getTime():null,last_authentication_strategy:this.lastAuthenticationStrategy??null,created_at:this.createdAt?.getTime()??null,updated_at:this.updatedAt?.getTime()??null}}path(){return this.pathRoot}}function t4(e){let{pageSize:t,initialPage:i,...n}=e||{},r=t??10;return new URLSearchParams({...Object.entries(n).reduce((e,[t,i])=>(void 0!==i&&(e[t]=i),e),{}),limit:r+"",offset:((i??1)-1)*r+""})}class t6{static #C="/billing";static path(e,t){let{orgId:i}=t||{},n=i?`/organizations/${i}`:"/me";return`${n}${t6.#C}${e}`}getPlans=async e=>{let{for:t,...i}=e||{},n={...i,payer_type:"organization"===t?"org":"user"};return await tB._fetch({path:`${t6.#C}/plans`,method:"GET",search:t4(n)}).then(e=>{let{data:t,total_count:i}=e;return{total_count:i,data:t.map(e=>new ic(e))}})};getPlan=async e=>new ic(await tB._fetch({path:`${t6.#C}/plans/${e.id}`,method:"GET"}));getSubscription=async e=>await tB._fetch({path:t6.path("/subscription",{orgId:e.orgId}),method:"GET"}).then(e=>new id(e?.response));getStatements=async e=>{let{orgId:t,...i}=e;return await tB._fetch({path:t6.path("/statements",{orgId:t}),method:"GET",search:t4(i)}).then(e=>{let{data:t,total_count:i}=e?.response;return{total_count:i,data:t.map(e=>new t9(e))}})};getStatement=async e=>new t9((await tB._fetch({path:t6.path(`/statements/${e.id}`,{orgId:e.orgId}),method:"GET"}))?.response);getPaymentAttempts=async e=>{let{orgId:t,...i}=e;return await tB._fetch({path:t6.path("/payment_attempts",{orgId:t}),method:"GET",search:t4(i)}).then(e=>{let{data:t,total_count:i}=e;return{total_count:i,data:t.map(e=>new it(e))}})};getPaymentAttempt=async e=>new it(await tB._fetch({path:t6.path(`/payment_attempts/${e.id}`,{orgId:e.orgId}),method:"GET"}));startCheckout=async e=>{let{orgId:t,...i}=e;return new t7((await tB._fetch({path:t6.path("/checkouts",{orgId:t}),method:"POST",body:i}))?.response)}}class t5 extends tB{id;createdAt;updatedAt;imageUrl;userId=null;email;firstName;lastName;organizationId=null;organizationName;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,e.created_at&&(this.createdAt=tG(e.created_at)),e.updated_at&&(this.updatedAt=tG(e.updated_at)),this.imageUrl=e.image_url,this.userId=e.user_id,this.email=e.email,this.firstName=e.first_name,this.lastName=e.last_name,this.organizationId=e.organization_id,this.organizationName=e.organization_name),this}}class t7 extends tB{id;externalClientSecret;externalGatewayId;paymentMethod;plan;planPeriod;planPeriodStart;status;totals;isImmediatePlanChange;freeTrialEndsAt;payer;needsPaymentMethod;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.externalClientSecret=e.external_client_secret,this.externalGatewayId=e.external_gateway_id,this.paymentMethod=e.payment_method?new io(e.payment_method):void 0,this.plan=new ic(e.plan),this.planPeriod=e.plan_period,this.planPeriodStart=e.plan_period_start,this.status=e.status,this.totals=ex(e.totals),this.isImmediatePlanChange=e.is_immediate_plan_change,e.free_trial_ends_at&&(this.freeTrialEndsAt=tG(e.free_trial_ends_at)),this.payer=new t5(e.payer),this.needsPaymentMethod=e.needs_payment_method),this}confirm=e=>tR(()=>this._basePatch({path:t6.path(`/checkouts/${this.id}/confirm`,{orgId:this.payer.organizationId}),body:e}),{factor:1.1,maxDelayBetweenRetries:2e3,initialDelay:2e3,jitter:!1,shouldRetry(e,t){if(!R(e)||t>=4)return!1;let i=e?.status,n=409===i&&e.errors?.[0]?.code==="checkout_already_in_progress";return i>=500||n}})}class t8 extends tB{id;name;description=null;slug;avatarUrl=null;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.name=e.name,this.description=e.description,this.slug=e.slug,this.avatarUrl=e.avatar_url),this}}class t9 extends tB{id;status;timestamp;totals;groups;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.status=e.status,this.timestamp=tG(e.timestamp),this.totals=ex(e.totals),this.groups=e.groups.map(e=>new ie(e))),this}}class ie{id;timestamp;items;constructor(e){this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.timestamp=tG(e.timestamp),this.items=e.items.map(e=>new it(e))),this}}class it extends tB{id;amount;failedAt=null;paidAt=null;updatedAt;paymentMethod=null;subscriptionItem;chargeType;status;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.amount=eE(e.amount),this.paidAt=e.paid_at?tG(e.paid_at):null,this.failedAt=e.failed_at?tG(e.failed_at):null,this.updatedAt=tG(e.updated_at),this.paymentMethod=e.payment_method?new io(e.payment_method):null,this.subscriptionItem=new ih(e.subscription_item),this.chargeType=e.charge_type,this.status=e.status),this}}let ii="/payment_methods",ir=async e=>{let{orgId:t,...i}=e;return new il((await tB._fetch({path:t6.path(`${ii}/initialize`,{orgId:t}),method:"POST",body:i}))?.response)},is=async e=>{let{orgId:t,...i}=e;return new io((await tB._fetch({path:t6.path(ii,{orgId:t}),method:"POST",body:i}))?.response)},ia=async e=>{let{orgId:t,...i}=e??{};return await tB._fetch({path:t6.path(ii,{orgId:t}),method:"GET",search:t4(i)}).then(e=>{let{data:t,total_count:i}=e?.response;return{total_count:i,data:t.map(e=>new io(e))}})};class io extends tB{id;last4=null;paymentType;cardType=null;isDefault;isRemovable;status;walletType;expiryYear;expiryMonth;createdAt;updatedAt;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.last4=e.last4,this.paymentType=e.payment_type,this.cardType=e.card_type,this.isDefault=e.is_default,this.isRemovable=e.is_removable,this.status=e.status,this.walletType=e.wallet_type,this.expiryYear=e.expiry_year,this.expiryMonth=e.expiry_month,this.createdAt=null==e.created_at?e.created_at:tG(e.created_at),this.updatedAt=null==e.updated_at?e.updated_at:tG(e.updated_at)),this}async remove(e){let{orgId:t}=e??{};return new iu((await tB._fetch({path:t6.path(`/payment_methods/${this.id}`,{orgId:t}),method:"DELETE"}))?.response)}async makeDefault(e){let{orgId:t}=e??{};return await tB._fetch({path:t6.path("/payers/default_payment_method",{orgId:t}),method:"PUT",body:{payment_method_id:this.id}}),null}}class il extends tB{externalClientSecret;externalGatewayId;paymentMethodOrder;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.externalClientSecret=e.external_client_secret,this.externalGatewayId=e.external_gateway_id,this.paymentMethodOrder=e.payment_method_order??["card"]),this}}class ic extends tB{id;name;fee;annualFee=null;annualMonthlyFee=null;description=null;isDefault;isRecurring;hasBaseFee;forPayerType;publiclyVisible;slug;avatarUrl=null;features;freeTrialDays;freeTrialEnabled;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.name=e.name,this.fee=eE(e.fee),this.annualFee=e.annual_fee?eE(e.annual_fee):null,this.annualMonthlyFee=e.annual_monthly_fee?eE(e.annual_monthly_fee):null,this.description=e.description,this.isDefault=e.is_default,this.isRecurring=e.is_recurring,this.hasBaseFee=e.has_base_fee,this.forPayerType=e.for_payer_type,this.publiclyVisible=e.publicly_visible,this.slug=e.slug,this.avatarUrl=e.avatar_url,this.freeTrialDays=this.withDefault(e.free_trial_days,null),this.freeTrialEnabled=this.withDefault(e.free_trial_enabled,!1),this.features=(e.features||[]).map(e=>new t8(e))),this}}class id extends tB{id;status;activeAt;createdAt;pastDueAt;updatedAt;nextPayment;subscriptionItems;eligibleForFreeTrial;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.status=e.status,this.createdAt=tG(e.created_at),this.updatedAt=e.updated_at?tG(e.updated_at):null,this.activeAt=tG(e.active_at),this.pastDueAt=e.past_due_at?tG(e.past_due_at):null,e.next_payment&&(this.nextPayment={amount:eE(e.next_payment.amount),date:tG(e.next_payment.date)}),this.subscriptionItems=(e.subscription_items||[]).map(e=>new ih(e)),this.eligibleForFreeTrial=this.withDefault(e.eligible_for_free_trial,!1)),this}}class ih extends tB{id;plan;planPeriod;status;createdAt;periodStart;periodEnd;canceledAt;pastDueAt;amount;credit;isFreeTrial;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.plan=new ic(e.plan),this.planPeriod=e.plan_period,this.status=e.status,this.createdAt=tG(e.created_at),this.pastDueAt=e.past_due_at?tG(e.past_due_at):null,this.periodStart=tG(e.period_start),this.periodEnd=e.period_end?tG(e.period_end):null,this.canceledAt=e.canceled_at?tG(e.canceled_at):null,this.amount=e.amount?eE(e.amount):void 0,this.credit=e.credit&&e.credit.amount?{amount:eE(e.credit.amount)}:void 0,this.isFreeTrial=this.withDefault(e.is_free_trial,!1)),this}async cancel(e){let{orgId:t}=e;return new iu((await tB._fetch({path:t6.path(`/subscription_items/${this.id}`,{orgId:t}),method:"DELETE"}))?.response)}}class iu{object="";id;slug;deleted=!1;constructor(e){this.fromJSON(e)}fromJSON(e){return e&&(this.object=e.object,this.id=e.id,this.slug=e.slug,this.deleted=e.deleted),this}}class ip extends tB{afterCreateOrganizationUrl="";afterJoinWaitlistUrl="";afterLeaveOrganizationUrl="";afterSignInUrl="";afterSignOutAllUrl="";afterSignOutOneUrl="";afterSignOutUrl="";afterSignUpUrl="";afterSwitchSessionUrl="";applicationName="";backendHost="";branded=!1;captchaHeartbeat=!1;captchaHeartbeatIntervalMs;captchaOauthBypass=["oauth_google","oauth_microsoft","oauth_apple"];captchaProvider="turnstile";captchaPublicKey=null;captchaPublicKeyInvisible=null;captchaWidgetType=null;clerkJSVersion;createOrganizationUrl="";experimental__forceOauthFirst;faviconImageUrl="";googleOneTapClientId;homeUrl="";id="";instanceEnvironmentType="";logoImageUrl="";organizationProfileUrl="";preferredSignInStrategy="password";privacyPolicyUrl="";showDevModeWarning=!1;signInUrl="";signUpUrl="";supportEmail="";termsUrl="";theme={};userProfileUrl="";waitlistUrl="";constructor(e=null){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.afterCreateOrganizationUrl=this.withDefault(e.after_create_organization_url,this.afterCreateOrganizationUrl),this.afterJoinWaitlistUrl=this.withDefault(e.after_join_waitlist_url,this.afterJoinWaitlistUrl),this.afterLeaveOrganizationUrl=this.withDefault(e.after_leave_organization_url,this.afterLeaveOrganizationUrl),this.afterSignInUrl=this.withDefault(e.after_sign_in_url,this.afterSignInUrl),this.afterSignOutAllUrl=this.withDefault(e.after_sign_out_all_url,this.afterSignOutAllUrl),this.afterSignOutOneUrl=this.withDefault(e.after_sign_out_one_url,this.afterSignOutOneUrl),this.afterSignUpUrl=this.withDefault(e.after_sign_up_url,this.afterSignUpUrl),this.afterSwitchSessionUrl=this.withDefault(e.after_switch_session_url,this.afterSwitchSessionUrl),this.applicationName=this.withDefault(e.application_name,this.applicationName),this.branded=this.withDefault(e.branded,this.branded),this.captchaHeartbeat=this.withDefault(e.captcha_heartbeat,this.captchaHeartbeat),this.captchaHeartbeatIntervalMs=this.withDefault(e.captcha_heartbeat_interval_ms,this.captchaHeartbeatIntervalMs),this.captchaOauthBypass=this.withDefault(e.captcha_oauth_bypass,this.captchaOauthBypass),this.captchaProvider=this.withDefault(e.captcha_provider,this.captchaProvider),this.captchaPublicKey=this.withDefault(e.captcha_public_key,this.captchaPublicKey),this.captchaPublicKeyInvisible=this.withDefault(e.captcha_public_key_invisible,this.captchaPublicKeyInvisible),this.captchaWidgetType=this.withDefault(e.captcha_widget_type,this.captchaWidgetType),this.clerkJSVersion=this.withDefault(e.clerk_js_version,this.clerkJSVersion),this.createOrganizationUrl=this.withDefault(e.create_organization_url,this.createOrganizationUrl),this.faviconImageUrl=this.withDefault(e.favicon_image_url,this.faviconImageUrl),this.googleOneTapClientId=this.withDefault(e.google_one_tap_client_id,this.googleOneTapClientId),this.homeUrl=this.withDefault(e.home_url,this.homeUrl),this.id=this.withDefault(e.id,this.id),this.instanceEnvironmentType=this.withDefault(e.instance_environment_type,this.instanceEnvironmentType),this.logoImageUrl=this.withDefault(e.logo_image_url,this.logoImageUrl),this.organizationProfileUrl=this.withDefault(e.organization_profile_url,this.organizationProfileUrl),this.preferredSignInStrategy=this.withDefault(e.preferred_sign_in_strategy,this.preferredSignInStrategy),this.privacyPolicyUrl=this.withDefault(e.privacy_policy_url,this.privacyPolicyUrl),this.showDevModeWarning=this.withDefault(e.show_devmode_warning,this.showDevModeWarning),this.signInUrl=this.withDefault(e.sign_in_url,this.signInUrl),this.signUpUrl=this.withDefault(e.sign_up_url,this.signUpUrl),this.supportEmail=this.withDefault(e.support_email,this.supportEmail),this.termsUrl=this.withDefault(e.terms_url,this.termsUrl),this.theme=this.withDefault(e.theme,this.theme),this.userProfileUrl=this.withDefault(e.user_profile_url,this.userProfileUrl),this.waitlistUrl=this.withDefault(e.waitlist_url,this.waitlistUrl)),this}__internal_toSnapshot(){return{object:"display_config",after_create_organization_url:this.afterCreateOrganizationUrl,after_join_waitlist_url:this.afterJoinWaitlistUrl,after_leave_organization_url:this.afterLeaveOrganizationUrl,after_sign_in_url:this.afterSignInUrl,after_sign_out_all_url:this.afterSignOutAllUrl,after_sign_out_one_url:this.afterSignOutOneUrl,after_sign_up_url:this.afterSignUpUrl,after_switch_session_url:this.afterSwitchSessionUrl,application_name:this.applicationName,branded:this.branded,captcha_heartbeat_interval_ms:this.captchaHeartbeatIntervalMs,captcha_heartbeat:this.captchaHeartbeat,captcha_oauth_bypass:this.captchaOauthBypass,captcha_provider:this.captchaProvider,captcha_public_key_invisible:this.captchaPublicKeyInvisible,captcha_public_key:this.captchaPublicKey,captcha_widget_type:this.captchaWidgetType,clerk_js_version:this.clerkJSVersion,create_organization_url:this.createOrganizationUrl,favicon_image_url:this.faviconImageUrl,google_one_tap_client_id:this.googleOneTapClientId,home_url:this.homeUrl,id:this.id,instance_environment_type:this.instanceEnvironmentType,logo_image_url:this.logoImageUrl,organization_profile_url:this.organizationProfileUrl,preferred_sign_in_strategy:this.preferredSignInStrategy,privacy_policy_url:this.privacyPolicyUrl,show_devmode_warning:this.showDevModeWarning,sign_in_url:this.signInUrl,sign_up_url:this.signUpUrl,support_email:this.supportEmail,terms_url:this.termsUrl,theme:this.theme,user_profile_url:this.userProfileUrl,waitlist_url:this.waitlistUrl}}}var im='const respond=r=>{self.postMessage(r)},workerToTabIds={};self.addEventListener("message",r=>{const e=r.data;switch(e.type){case"setTimeout":workerToTabIds[e.id]=setTimeout(()=>{respond({id:e.id}),delete workerToTabIds[e.id]},e.ms);break;case"clearTimeout":workerToTabIds[e.id]&&(clearTimeout(workerToTabIds[e.id]),delete workerToTabIds[e.id]);break;case"setInterval":workerToTabIds[e.id]=setInterval(()=>{respond({id:e.id})},e.ms);break;case"clearInterval":workerToTabIds[e.id]&&(clearInterval(workerToTabIds[e.id]),delete workerToTabIds[e.id]);break}});\n';let i_=(e,t={})=>{if("undefined"==typeof Worker)return null;try{let i=new Blob([e],{type:"application/javascript; charset=utf-8"}),n=globalThis.URL.createObjectURL(i);return new Worker(n,t)}catch{return console.warn("Clerk: Cannot create worker from blob. Consider adding worker-src blob:; to your CSP"),null}},ig=()=>{let e=0,t=()=>e++,i=new Map,n=(e,t)=>e?.postMessage(t),r=e=>{i.get(e.data.id)?.()},s=i_(im,{name:"clerk-timers"});if(s?.addEventListener("message",r),!s){let e=globalThis.setTimeout.bind(globalThis),t=globalThis.setInterval.bind(globalThis);return{setTimeout:e,setInterval:t,clearTimeout:globalThis.clearTimeout.bind(globalThis),clearInterval:globalThis.clearInterval.bind(globalThis),cleanup:eb}}let a=()=>{s||(s=i_(im,{name:"clerk-timers"}),s?.addEventListener("message",r))};return{setTimeout:(e,r)=>{a();let o=t();return i.set(o,()=>{e(),i.delete(o)}),n(s,{type:"setTimeout",id:o,ms:r}),o},setInterval:(e,r)=>{a();let o=t();return i.set(o,e),n(s,{type:"setInterval",id:o,ms:r}),o},clearTimeout:e=>{a(),i.delete(e),n(s,{type:"clearTimeout",id:e})},clearInterval:e=>{a(),i.delete(e),n(s,{type:"clearInterval",id:e})},cleanup:()=>{s&&(s.terminate(),s=null,i.clear())}}};function iy({delayInMs:e}={delayInMs:1e3}){let t,i=ig(),n=!1,r=()=>{t&&(i.clearTimeout(t),i.cleanup()),n=!0},s=async a=>{n=!1,await a(r),n||(t=i.setTimeout(()=>{s(a)},e))};return{run:s,stop:r}}class ib extends tB{id;emailAddress="";matchesSsoConnection=!1;linkedTo=[];verification;constructor(e,t){super(),this.pathRoot=t,this.fromJSON(e)}create(){return this._basePost({body:{email_address:this.emailAddress}})}prepareVerification=e=>this._basePost({action:"prepare_verification",body:{...e}});attemptVerification=e=>{let{code:t}=e||{};return this._basePost({action:"attempt_verification",body:{code:t}})};createEmailLinkFlow=()=>{let{run:e,stop:t}=iy();return{startEmailLinkFlow:async({redirectUrl:i})=>(await this.prepareVerification({strategy:"email_link",redirectUrl:i}),new Promise((i,n)=>{e(()=>this.reload().then(e=>{"verified"===e.verification.status&&(t(),i(e))}).catch(e=>{t(),n(e)}))})),cancelEmailLinkFlow:t}};createEnterpriseSSOLinkFlow=()=>{let{run:e,stop:t}=iy();return{startEnterpriseSSOLinkFlow:async({redirectUrl:i})=>{if(!(await this.prepareVerification({strategy:"enterprise_sso",redirectUrl:i})).verification.externalVerificationRedirectURL)throw Error("Unexpected: External verification redirect URL is missing");return new Promise((i,n)=>{e(()=>this.reload().then(e=>{"verified"===e.verification.status&&(t(),i(e))}).catch(e=>{t(),n(e)}))})},cancelEnterpriseSSOLinkFlow:t}};destroy=()=>this._baseDelete();toString=()=>this.emailAddress;fromJSON(e){return e&&(this.id=e.id,this.emailAddress=e.email_address,this.verification=new iD(e.verification),this.matchesSsoConnection=e.matches_sso_connection,this.linkedTo=(e.linked_to||[]).map(e=>new iB(e))),this}__internal_toSnapshot(){return{object:"email_address",id:this.id,email_address:this.emailAddress,verification:this.verification.__internal_toSnapshot(),linked_to:this.linkedTo.map(e=>e.__internal_toSnapshot()),matches_sso_connection:this.matchesSsoConnection}}}let iw="token:update",iv="user:signOut",iS="environment:update",ik="session:tokenResolved",iC=f();class iA extends tB{user_api_keys_enabled=!1;orgs_api_keys_enabled=!1;constructor(e=null){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.user_api_keys_enabled=e.user_api_keys_enabled,this.orgs_api_keys_enabled=e.orgs_api_keys_enabled),this}__internal_toSnapshot(){return{user_api_keys_enabled:this.user_api_keys_enabled,orgs_api_keys_enabled:this.orgs_api_keys_enabled}}}class iU extends tB{actions={adminDelete:!1};domains={enabled:!1,enrollmentModes:[],defaultRole:null};slug={disabled:!1};enabled=!1;maxAllowedMemberships=1;forceOrganizationSelection;constructor(e=null){super(),this.fromJSON(e)}fromJSON(e){return e&&(e.actions&&(this.actions.adminDelete=this.withDefault(e.actions.admin_delete,this.actions.adminDelete)),e.domains&&(this.domains.enabled=this.withDefault(e.domains.enabled,this.domains.enabled),this.domains.enrollmentModes=this.withDefault(e.domains.enrollment_modes,this.domains.enrollmentModes),this.domains.defaultRole=this.withDefault(e.domains.default_role,this.domains.defaultRole)),e.slug&&(this.slug.disabled=this.withDefault(e.slug.disabled,this.slug.disabled)),this.enabled=this.withDefault(e.enabled,this.enabled),this.maxAllowedMemberships=this.withDefault(e.max_allowed_memberships,this.maxAllowedMemberships),this.forceOrganizationSelection=this.withDefault(e.force_organization_selection,this.forceOrganizationSelection)),this}__internal_toSnapshot(){return{actions:{admin_delete:this.actions.adminDelete},domains:{enabled:this.domains.enabled,enrollment_modes:this.domains.enrollmentModes,default_role:this.domains.defaultRole},enabled:this.enabled,max_allowed_memberships:this.maxAllowedMemberships}}}class iI extends tB{static instance;authConfig=new tY;displayConfig=new ip;maintenanceMode=!1;clientDebugMode=!1;pathRoot="/environment";userSettings=new tq;organizationSettings=new iU;commerceSettings=new tH;apiKeysSettings=new iA;static getInstance(){return iI.instance||(iI.instance=new iI),iI.instance}constructor(e=null){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.authConfig=new tY(e.auth_config),this.displayConfig=new ip(e.display_config),this.maintenanceMode=this.withDefault(e.maintenance_mode,this.maintenanceMode),this.clientDebugMode=this.withDefault(e.client_debug_mode,this.clientDebugMode),this.organizationSettings=new iU(e.organization_settings),this.userSettings=new tq(e.user_settings),this.commerceSettings=new tH(e.commerce_settings),this.apiKeysSettings=new iA(e.api_keys_settings)),this}fetch({touch:e,fetchMaxTries:t}={touch:!1}){return(e?this._basePatch({}):this._baseGet({fetchMaxTries:t})).then(e=>(iC.emit(iS,null),e))}isDevelopmentOrStaging=()=>!this.isProduction();isProduction=()=>"production"===this.displayConfig.instanceEnvironmentType;isSingleSession=()=>this.authConfig.singleSessionMode;onWindowLocationHost=()=>this.displayConfig.backendHost===window.location.host;__internal_toSnapshot(){return{object:"environment",auth_config:this.authConfig.__internal_toSnapshot(),display_config:this.displayConfig.__internal_toSnapshot(),id:this.id??"",maintenance_mode:this.maintenanceMode,client_debug_mode:this.clientDebugMode,organization_settings:this.organizationSettings.__internal_toSnapshot(),user_settings:this.userSettings.__internal_toSnapshot(),commerce_settings:this.commerceSettings.__internal_toSnapshot(),api_keys_settings:this.apiKeysSettings.__internal_toSnapshot()}}}class iP{static encode(e){return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}static decode(e){let t=atob(e.replace(/-/g,"+").replace(/_/g,"/")),i=t.length,n=new Uint8Array(i);for(let e=0;e<i;e++)n[e]=t.charCodeAt(e);return n.buffer}}async function iO(e){try{let t=await navigator.credentials.create({publicKey:e});if(!t)return{error:new T("Browser failed to create credential",{code:"passkey_registration_failed"}),publicKeyCredential:null};return{publicKeyCredential:t,error:null}}catch(e){var t;return{error:"InvalidStateError"===(t=e).name?new T(t.message,{code:"passkey_already_exists"}):"NotAllowedError"===t.name?new T(t.message,{code:"passkey_registration_cancelled"}):ix(t),publicKeyCredential:null}}}let iT=new class{controller;__abort(){if(!this.controller)return;let e=Error();e.name="AbortError",this.controller.abort(e)}createAbortSignal(){this.__abort();let e=new AbortController;return this.controller=e,e.signal}abort(){this.__abort(),this.controller=void 0}};async function iE({publicKeyOptions:e,conditionalUI:t}){try{let i=await navigator.credentials.get({publicKey:e,mediation:t?"conditional":"optional",signal:iT.createAbortSignal()});if(!i)return{error:new T("Browser failed to get credential",{code:"passkey_retrieval_failed"}),publicKeyCredential:null};return{publicKeyCredential:i,error:null}}catch(e){var i;return{error:"NotAllowedError"===(i=e).name?new T(i.message,{code:"passkey_retrieval_cancelled"}):ix(i),publicKeyCredential:null}}}function ix(e){return"AbortError"===e.name?new T(e.message,{code:"passkey_operation_aborted"}):"SecurityError"===e.name?new T(e.message,{code:"passkey_invalid_rpID_or_domain"}):e}function iR(e){let t=iz(e.challenge),i=(e.allowCredentials||[]).map(e=>({...e,id:iz(e.id)}));return{...e,allowCredentials:i,challenge:t}}function iM(e){return{type:e.type,id:e.id,rawId:iF(e.rawId),authenticatorAttachment:e.authenticatorAttachment}}function iN(e){let t=e.response;return{...iM(e),response:{clientDataJSON:iF(t.clientDataJSON),authenticatorData:iF(t.authenticatorData),signature:iF(t.signature),userHandle:t.userHandle?iF(t.userHandle):null}}}let iF=iP.encode.bind(iP),iz=iP.decode.bind(iP);class iD extends tB{pathRoot="";status=null;strategy=null;nonce=null;message=null;externalVerificationRedirectURL=null;attempts=null;expireAt=null;error=null;verifiedAtClient=null;channel;constructor(e){super(),this.fromJSON(e)}verifiedFromTheSameClient=()=>this.verifiedAtClient===tB.clerk?.client?.id;fromJSON(e){return e&&(this.status=e.status,this.verifiedAtClient=e.verified_at_client,this.strategy=e.strategy,this.nonce=e.nonce||null,this.message=e.message||null,e.external_verification_redirect_url?this.externalVerificationRedirectURL=new URL(e.external_verification_redirect_url):this.externalVerificationRedirectURL=null,this.attempts=e.attempts,this.expireAt=tG(e.expire_at||void 0),this.error=e.error?new w(e.error):null,this.channel=e.channel||void 0),this}__internal_toSnapshot(){var e;return{object:"verification",id:this.id||"",status:this.status,strategy:this.strategy,nonce:this.nonce,message:this.message,external_verification_redirect_url:this.externalVerificationRedirectURL?.toString()||null,attempts:this.attempts,expire_at:this.expireAt?.getTime()||null,error:(e=this.error,{code:e?.code||"",message:e?.message||"",long_message:e?.longMessage,meta:{param_name:e?.meta?.paramName,session_id:e?.meta?.sessionId,email_addresses:e?.meta?.emailAddresses,identifiers:e?.meta?.identifiers,zxcvbn:e?.meta?.zxcvbn,plan:e?.meta?.plan,is_plan_upgrade_possible:e?.meta?.isPlanUpgradePossible}}),verified_at_client:this.verifiedAtClient}}}class iW extends iD{publicKey=null;constructor(e){super(e),this.fromJSON(e)}fromJSON(e){return super.fromJSON(e),e?.nonce&&(this.publicKey=function(e){let t=iz(e.user.id),i=iz(e.challenge),n=(e.excludeCredentials||[]).map(e=>({...e,id:iz(e.id)}));return{...e,excludeCredentials:n,challenge:i,user:{...e.user,id:t}}}(JSON.parse(e.nonce))),this}}class iL{emailAddress;phoneNumber;web3Wallet;externalAccount;constructor(e){e?(this.emailAddress=new i$(e.email_address),this.phoneNumber=new i$(e.phone_number),this.web3Wallet=new i$(e.web3_wallet),this.externalAccount=new iD(e.external_account)):(this.emailAddress=new i$(null),this.phoneNumber=new i$(null),this.web3Wallet=new i$(null),this.externalAccount=new iD(null))}__internal_toSnapshot(){return{email_address:this.emailAddress.__internal_toSnapshot(),phone_number:this.phoneNumber.__internal_toSnapshot(),web3_wallet:this.web3Wallet.__internal_toSnapshot(),external_account:this.externalAccount.__internal_toSnapshot()}}}class i$ extends iD{nextAction;supportedStrategies;constructor(e){super(e),e?(this.nextAction=e.next_action,this.supportedStrategies=e.supported_strategies):(this.nextAction="",this.supportedStrategies=[])}__internal_toSnapshot(){return{...super.__internal_toSnapshot(),next_action:this.nextAction,supported_strategies:this.supportedStrategies}}}class ij extends tB{id;identificationId;provider;providerUserId="";emailAddress="";approvedScopes="";firstName="";lastName="";imageUrl="";username="";phoneNumber="";publicMetadata={};label="";verification=null;constructor(e,t){super(),this.pathRoot=t,this.fromJSON(e)}reauthorize=e=>{let{additionalScopes:t,redirectUrl:i}=e||{};return this._basePatch({action:"reauthorize",body:{additional_scope:t,redirect_url:i}})};destroy=()=>this._baseDelete();fromJSON(e){return e&&(this.id=e.id,this.identificationId=e.identification_id,this.providerUserId=e.provider_user_id,this.approvedScopes=e.approved_scopes,this.imageUrl=e.image_url,this.emailAddress=e.email_address,this.firstName=e.first_name,this.lastName=e.last_name,this.provider=(e.provider||"").replace("oauth_",""),this.username=e.username,this.phoneNumber=e.phone_number,this.publicMetadata=e.public_metadata,this.label=e.label,e.verification&&(this.verification=new iD(e.verification))),this}__internal_toSnapshot(){return{object:"external_account",id:this.id,identification_id:this.identificationId,provider:this.provider,provider_user_id:this.providerUserId,email_address:this.emailAddress,approved_scopes:this.approvedScopes,first_name:this.firstName,last_name:this.lastName,image_url:this.imageUrl,username:this.username,phone_number:this.phoneNumber,public_metadata:this.publicMetadata,label:this.label,verification:this.verification?.__internal_toSnapshot()||null}}providerSlug(){return this.provider}providerTitle(){return[function(e){let t=e||"";return t.charAt(0).toUpperCase()+t.slice(1)}(this.providerSlug()),"Account"].join(" ")}accountIdentifier(){return this.username||this.emailAddress||this.label}}class iJ extends tB{id;protocol;provider;providerUserId=null;active;emailAddress="";firstName="";lastName="";publicMetadata={};verification=null;enterpriseConnection=null;lastAuthenticatedAt=null;enterpriseConnectionId=null;constructor(e,t){super(),this.pathRoot=t,this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.provider=e.provider,this.protocol=e.protocol,this.providerUserId=e.provider_user_id,this.active=e.active,this.emailAddress=e.email_address,this.firstName=e.first_name,this.lastName=e.last_name,this.publicMetadata=e.public_metadata,this.lastAuthenticatedAt=e.last_authenticated_at?tG(e.last_authenticated_at):null,this.enterpriseConnectionId=e.enterprise_connection_id,e.verification&&(this.verification=new iD(e.verification)),e.enterprise_connection&&(this.enterpriseConnection=new iK(e.enterprise_connection))),this}__internal_toSnapshot(){return{object:"enterprise_account",id:this.id,provider:this.provider,protocol:this.protocol,provider_user_id:this.providerUserId,active:this.active,email_address:this.emailAddress,first_name:this.firstName,last_name:this.lastName,public_metadata:this.publicMetadata,verification:this.verification?.__internal_toSnapshot()||null,enterprise_connection:this.enterpriseConnection?.__internal_toSnapshot()||null,last_authenticated_at:this.lastAuthenticatedAt?this.lastAuthenticatedAt.getTime():null,enterprise_connection_id:this.enterpriseConnectionId}}}class iK extends tB{id;active;allowIdpInitiated;allowSubdomains;disableAdditionalIdentifications;domain;logoPublicUrl="";name;protocol;provider;syncUserAttributes;createdAt;updatedAt;enterpriseConnectionId="";constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.name=e.name,this.domain=e.domain,this.active=e.active,this.provider=e.provider,this.logoPublicUrl=e.logo_public_url,this.syncUserAttributes=e.sync_user_attributes,this.allowSubdomains=e.allow_subdomains,this.allowIdpInitiated=e.allow_idp_initiated,this.disableAdditionalIdentifications=e.disable_additional_identifications,this.createdAt=tG(e.created_at),this.updatedAt=tG(e.updated_at),this.enterpriseConnectionId=e.enterprise_connection_id),this}__internal_toSnapshot(){return{object:"enterprise_account_connection",id:this.id,name:this.name,domain:this.domain,active:this.active,protocol:this.protocol,provider:this.provider,logo_public_url:this.logoPublicUrl,sync_user_attributes:this.syncUserAttributes,allow_subdomains:this.allowSubdomains,allow_idp_initiated:this.allowIdpInitiated,disable_additional_identifications:this.disableAdditionalIdentifications,enterprise_connection_id:this.enterpriseConnectionId,created_at:this.createdAt.getTime(),updated_at:this.updatedAt.getTime()}}}class iB extends tB{id;type;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.type=e.type),this}__internal_toSnapshot(){return{object:"identification_link",id:this.id,type:this.type}}}class iV extends tB{id;name=null;publicUrl=null;static async create(e,t={}){let i,n=t;return"string"==typeof t.file?(n=t.file,i=new Headers({"Content-Type":"application/octet-stream"})):t.file&&(n=new FormData).append("file",t.file),new iV((await tB._fetch({path:e,method:"POST",body:n,headers:i}))?.response)}static async delete(e){return new iV((await tB._fetch({path:e,method:"DELETE"}))?.response)}constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.name=e.name,this.publicUrl=e.public_url),this}}class iq extends tB{id;phoneNumber="";reservedForSecondFactor=!1;defaultSecondFactor=!1;linkedTo=[];verification;backupCodes;constructor(e,t){super(),this.pathRoot=t,this.fromJSON(e)}create=()=>this._basePost({body:{phone_number:this.phoneNumber}});prepareVerification=()=>this._basePost({action:"prepare_verification",body:{strategy:"phone_code"}});attemptVerification=e=>{let{code:t}=e||{};return this._basePost({action:"attempt_verification",body:{code:t}})};setReservedForSecondFactor=e=>{let{reserved:t}=e||{};return this._basePatch({body:{reserved_for_second_factor:t}})};makeDefaultSecondFactor=()=>this._basePatch({body:{default_second_factor:!0}});destroy=()=>this._baseDelete();toString=()=>{let e=this.phoneNumber.match(/^(\d{3})(\d{3})(\d{4})$/);return e?"("+e[1]+") "+e[2]+"-"+e[3]:this.phoneNumber};fromJSON(e){return e&&(this.id=e.id,this.phoneNumber=e.phone_number,this.reservedForSecondFactor=e.reserved_for_second_factor,this.defaultSecondFactor=e.default_second_factor,this.verification=new iD(e.verification),this.linkedTo=(e.linked_to||[]).map(e=>new iB(e)),this.backupCodes=e.backup_codes),this}__internal_toSnapshot(){return{object:"phone_number",id:this.id||"",phone_number:this.phoneNumber,reserved_for_second_factor:this.reservedForSecondFactor,default_second_factor:this.defaultSecondFactor,verification:this.verification.__internal_toSnapshot(),linked_to:this.linkedTo.map(e=>e.__internal_toSnapshot()),backup_codes:this.backupCodes}}}class iH extends tB{id;name;organizationId;enrollmentMode;verification;affiliationEmailAddress;createdAt;updatedAt;totalPendingInvitations;totalPendingSuggestions;constructor(e){super(),this.fromJSON(e)}static async create(e,{name:t}){return new iH((await tB._fetch({path:`/organizations/${e}/domains`,method:"POST",body:{name:t}}))?.response)}prepareAffiliationVerification=async e=>this._basePost({path:`/organizations/${this.organizationId}/domains/${this.id}/prepare_affiliation_verification`,method:"POST",body:e});attemptAffiliationVerification=async e=>this._basePost({path:`/organizations/${this.organizationId}/domains/${this.id}/attempt_affiliation_verification`,method:"POST",body:e});updateEnrollmentMode=e=>this._basePost({path:`/organizations/${this.organizationId}/domains/${this.id}/update_enrollment_mode`,body:e});delete=()=>this._baseDelete({path:`/organizations/${this.organizationId}/domains/${this.id}`});fromJSON(e){return e&&(this.id=e.id,this.name=e.name,this.organizationId=e.organization_id,this.enrollmentMode=e.enrollment_mode,this.affiliationEmailAddress=e.affiliation_email_address,this.totalPendingSuggestions=e.total_pending_suggestions,this.totalPendingInvitations=e.total_pending_invitations,e.verification?this.verification={status:e.verification.status,strategy:e.verification.strategy,attempts:e.verification.attempts,expiresAt:tG(e.verification.expires_at)}:this.verification=null),this}}class iG extends tB{id;organizationId;status;publicUserData;createdAt;updatedAt;constructor(e){super(),this.fromJSON(e)}accept=async()=>await this._basePost({path:`/organizations/${this.organizationId}/membership_requests/${this.id}/accept`});reject=async()=>await this._basePost({path:`/organizations/${this.organizationId}/membership_requests/${this.id}/reject`});fromJSON(e){return e&&(this.id=e.id,this.organizationId=e.organization_id,this.status=e.status,this.createdAt=tG(e.created_at),this.updatedAt=tG(e.updated_at),e.public_user_data&&(this.publicUserData=new na(e.public_user_data))),this}}class iY extends tB{id;key;name;description;type;createdAt;updatedAt;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.key=e.key,this.name=e.name,this.description=e.description,this.type=e.type,this.createdAt=tG(e.created_at),this.updatedAt=tG(e.updated_at)),this}}class iQ extends tB{id;key;name;description;permissions=[];createdAt;updatedAt;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.key=e.key,this.name=e.name,this.description=e.description,this.permissions=e.permissions.map(e=>new iY(e)),this.createdAt=tG(e.created_at),this.updatedAt=tG(e.updated_at)),this}}class iX extends tB{pathRoot="/organizations";id;name;slug;imageUrl;hasImage;publicMetadata={};adminDeleteEnabled;createdAt;updatedAt;membersCount=0;pendingInvitationsCount=0;maxAllowedMemberships;constructor(e){super(),this.fromJSON(e)}static async create(e){return new iX((await tB._fetch({path:"/organizations",method:"POST",body:e}))?.response)}static async get(e){return new iX((await tB._fetch({path:`/organizations/${e}`,method:"GET"}))?.response)}update=async e=>this._basePatch({body:e});getRoles=async e=>await tB._fetch({path:`/organizations/${this.id}/roles`,method:"GET",search:t4(e)},{forceUpdateClient:!0}).then(e=>{let{data:t,total_count:i}=e?.response;return{total_count:i,data:t.map(e=>new iQ(e))}});getDomains=async e=>await tB._fetch({path:`/organizations/${this.id}/domains`,method:"GET",search:t4(e)},{forceUpdateClient:!0}).then(e=>{let{data:t,total_count:i}=e?.response;return{total_count:i,data:t.map(e=>new iH(e))}});getDomain=async({domainId:e})=>new iH((await tB._fetch({path:`/organizations/${this.id}/domains/${e}`,method:"GET"}))?.response);getMembershipRequests=async e=>await tB._fetch({path:`/organizations/${this.id}/membership_requests`,method:"GET",search:t4(e)}).then(e=>{let{data:t,total_count:i}=e?.response;return{total_count:i,data:t.map(e=>new iG(e))}});createDomain=async e=>iH.create(this.id,{name:e});getMemberships=async e=>await tB._fetch({path:`/organizations/${this.id}/memberships`,method:"GET",search:t4({...e,paginated:!0})}).then(e=>{let{data:t,total_count:i}=e?.response;return{total_count:i,data:t.map(e=>new i0(e))}});getInvitations=async e=>await tB._fetch({path:`/organizations/${this.id}/invitations`,method:"GET",search:t4(e)},{forceUpdateClient:!0}).then(e=>{let{data:t,total_count:i}=e?.response;return{total_count:i,data:t.map(e=>new iZ(e))}});addMember=async({userId:e,role:t})=>await tB._fetch({method:"POST",path:`/organizations/${this.id}/memberships`,body:{userId:e,role:t}}).then(e=>new i0(e?.response));inviteMember=async e=>iZ.create(this.id,e);inviteMembers=async e=>iZ.createBulk(this.id,e);updateMember=async({userId:e,role:t})=>await tB._fetch({method:"PATCH",path:`/organizations/${this.id}/memberships/${e}`,body:{role:t}}).then(e=>new i0(e?.response));removeMember=async e=>await tB._fetch({method:"DELETE",path:`/organizations/${this.id}/memberships/${e}`}).then(e=>new i0(e?.response));destroy=async()=>this._baseDelete();setLogo=async({file:e})=>{let t,i;return null===e?await tB._fetch({path:`/organizations/${this.id}/logo`,method:"DELETE"}).then(e=>new iX(e?.response)):("string"==typeof e?(t=e,i=new Headers({"Content-Type":"application/octet-stream"})):(t=new FormData).append("file",e),await tB._fetch({path:`/organizations/${this.id}/logo`,method:"PUT",body:t,headers:i}).then(e=>new iX(e?.response)))};initializePaymentMethod=e=>ir({...e,orgId:this.id});addPaymentMethod=e=>is({...e,orgId:this.id});getPaymentMethods=e=>ia({...e,orgId:this.id});fromJSON(e){return e&&(this.id=e.id,this.name=e.name,this.slug=e.slug,this.imageUrl=e.image_url||"",this.hasImage=e.has_image||!1,this.publicMetadata=e.public_metadata||{},this.membersCount=e.members_count||0,this.pendingInvitationsCount=e.pending_invitations_count||0,this.maxAllowedMemberships=e.max_allowed_memberships||0,this.adminDeleteEnabled=e.admin_delete_enabled||!1,this.createdAt=tG(e.created_at),this.updatedAt=tG(e.updated_at)),this}__internal_toSnapshot(){return{object:"organization",id:this.id,name:this.name,slug:this.slug,image_url:this.imageUrl,has_image:this.hasImage,public_metadata:this.publicMetadata,members_count:this.membersCount,pending_invitations_count:this.pendingInvitationsCount,max_allowed_memberships:this.maxAllowedMemberships,admin_delete_enabled:this.adminDeleteEnabled,created_at:this.createdAt.getTime(),updated_at:this.updatedAt.getTime()}}async reload(e){let{rotatingTokenNonce:t}=e||{},i=(await tB._fetch({path:`/organizations/${this.id}`,method:"GET",rotatingTokenNonce:t},{forceUpdateClient:!0}))?.response;return this.fromJSON(i)}}class iZ extends tB{id;emailAddress;organizationId;publicMetadata={};status;role;roleName;createdAt;updatedAt;static async create(e,{emailAddress:t,role:i}){return new iZ((await tB._fetch({path:`/organizations/${e}/invitations`,method:"POST",body:{email_address:t,role:i}}))?.response)}static async createBulk(e,t){let{emailAddresses:i,role:n}=t;return((await tB._fetch({path:`/organizations/${e}/invitations/bulk`,method:"POST",body:{email_address:i,role:n}}))?.response).map(e=>new iZ(e))}constructor(e){super(),this.fromJSON(e)}revoke=async()=>await this._basePost({path:`/organizations/${this.organizationId}/invitations/${this.id}/revoke`});fromJSON(e){return e&&(this.id=e.id,this.emailAddress=e.email_address,this.organizationId=e.organization_id,this.publicMetadata=e.public_metadata,this.role=e.role,this.roleName=e.role_name,this.status=e.status,this.createdAt=tG(e.created_at),this.updatedAt=tG(e.updated_at)),this}}class i0 extends tB{id;publicMetadata={};publicUserData;organization;permissions=[];role;roleName;createdAt;updatedAt;constructor(e){super(),this.fromJSON(e)}static retrieve=async e=>await tB._fetch({path:"/me/organization_memberships",method:"GET",search:t4({...e,paginated:!0})}).then(e=>{let{data:t,total_count:i}=e?.response;return{total_count:i,data:t.map(e=>new i0(e))}});destroy=async()=>await this._baseDelete({path:`/organizations/${this.organization.id}/memberships/${this.publicUserData?.userId}`});update=async({role:e})=>await this._basePatch({path:`/organizations/${this.organization.id}/memberships/${this.publicUserData?.userId}`,body:{role:e}});fromJSON(e){return e&&(this.id=e.id,this.organization=new iX(e.organization),this.publicMetadata=e.public_metadata||{},e.public_user_data&&(this.publicUserData=new na(e.public_user_data)),this.permissions=Array.isArray(e.permissions)?[...e.permissions]:[],this.role=e.role,this.roleName=e.role_name,this.createdAt=tG(e.created_at),this.updatedAt=tG(e.updated_at)),this}__internal_toSnapshot(){return{object:"organization_membership",id:this.id,organization:this.organization.__internal_toSnapshot(),public_metadata:this.publicMetadata,public_user_data:this.publicUserData?.__internal_toSnapshot(),permissions:this.permissions,role:this.role,role_name:this.roleName,created_at:this.createdAt.getTime(),updated_at:this.updatedAt.getTime()}}reload(e){throw Error(`${tw} Calling OrganizationMembership.reload is not currently supported. Please contact support.`)}}class i1 extends tB{id;publicOrganizationData;status;createdAt;updatedAt;constructor(e){super(),this.fromJSON(e)}static async retrieve(e){return await tB._fetch({path:"/me/organization_suggestions",method:"GET",search:t4(e)}).then(e=>{let{data:t,total_count:i}=e?.response;return{total_count:i,data:t.map(e=>new i1(e))}})}accept=async()=>await this._basePost({path:`/me/organization_suggestions/${this.id}/accept`});fromJSON(e){return e&&(this.id=e.id,this.status=e.status,this.publicOrganizationData={hasImage:e.public_organization_data.has_image,imageUrl:e.public_organization_data.image_url,name:e.public_organization_data.name,id:e.public_organization_data.id,slug:e.public_organization_data.slug},this.createdAt=tG(e.created_at),this.updatedAt=tG(e.updated_at)),this}}class i3 extends tB{id;provider="saml_custom";providerUserId=null;active=!1;emailAddress="";firstName="";lastName="";verification=null;samlConnection=null;lastAuthenticatedAt=null;enterpriseConnectionId=null;constructor(e,t){super(),this.pathRoot=t,this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.provider=e.provider,this.providerUserId=e.provider_user_id,this.active=e.active,this.emailAddress=e.email_address,this.firstName=e.first_name,this.lastName=e.last_name,this.enterpriseConnectionId=e.enterprise_connection_id,e.verification&&(this.verification=new iD(e.verification)),e.saml_connection&&(this.samlConnection=new i2(e.saml_connection)),this.lastAuthenticatedAt=e.last_authenticated_at?tG(e.last_authenticated_at):null),this}__internal_toSnapshot(){return{object:"saml_account",id:this.id,provider:this.provider,provider_user_id:this.providerUserId,active:this.active,email_address:this.emailAddress,first_name:this.firstName,last_name:this.lastName,verification:this.verification?.__internal_toSnapshot()||null,saml_connection:this.samlConnection?.__internal_toSnapshot(),enterprise_connection_id:this.enterpriseConnectionId,last_authenticated_at:this.lastAuthenticatedAt?this.lastAuthenticatedAt.getTime():null}}}class i2 extends tB{id;name;domain;active;provider;syncUserAttributes;allowSubdomains;allowIdpInitiated;disableAdditionalIdentifications;createdAt;updatedAt;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.name=e.name,this.domain=e.domain,this.active=e.active,this.provider=e.provider,this.syncUserAttributes=e.sync_user_attributes,this.allowSubdomains=e.allow_subdomains,this.allowIdpInitiated=e.allow_idp_initiated,this.disableAdditionalIdentifications=e.disable_additional_identifications,this.createdAt=tG(e.created_at),this.updatedAt=tG(e.updated_at)),this}__internal_toSnapshot(){return{object:"saml_account_connection",id:this.id,name:this.name,domain:this.domain,active:this.active,provider:this.provider,sync_user_attributes:this.syncUserAttributes,allow_subdomains:this.allowSubdomains,allow_idp_initiated:this.allowIdpInitiated,disable_additional_identifications:this.disableAdditionalIdentifications,created_at:this.createdAt.getTime(),updated_at:this.updatedAt.getTime()}}}let i4={strict_mfa:{afterMinutes:10,level:"multi_factor"},strict:{afterMinutes:10,level:"second_factor"},moderate:{afterMinutes:60,level:"second_factor"},lax:{afterMinutes:1440,level:"second_factor"}},i6=new Set(["first_factor","second_factor","multi_factor"]),i5=new Set(["strict_mfa","strict","moderate","lax"]),i7=e=>e.replace(/^(org:)*/,"org:"),i8=(e,t)=>{let{org:i,user:n}=i9(e),[r,s]=t.split(":"),a=s||r;return"org"===r?i.includes(a):"user"===r?n.includes(a):[...i,...n].includes(a)},i9=e=>{let t=e?e.split(",").map(e=>e.trim()):[];return{org:t.filter(e=>e.split(":")[0].includes("o")).map(e=>e.split(":")[1]),user:t.filter(e=>e.split(":")[0].includes("u")).map(e=>e.split(":")[1])}};function ne(){return l()&&"function"==typeof window.PublicKeyCredential}async function nt(){try{return ne()&&await window.PublicKeyCredential.isConditionalMediationAvailable()}catch{return!1}}async function ni(){try{return"undefined"!=typeof window&&await window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()}catch{return!1}}class nn extends tB{status;level;session;supportedFirstFactors=[];supportedSecondFactors=[];firstFactorVerification=new iD(null);secondFactorVerification=new iD(null);constructor(e=null){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.status=e.status,this.session=new nr(e.session),this.level=e.level,this.supportedFirstFactors=er(e.supported_first_factors),this.supportedSecondFactors=er(e.supported_second_factors),this.firstFactorVerification=new iD(e.first_factor_verification),this.secondFactorVerification=new iD(e.second_factor_verification)),this}}class nr extends tB{pathRoot="/client/sessions";id;status;lastActiveAt;lastActiveToken;lastActiveOrganizationId;actor;user;publicUserData;factorVerificationAge=null;tasks=null;expireAt;abandonAt;createdAt;updatedAt;static isSessionResource(e){return!!e&&e instanceof nr}constructor(e){super(),this.fromJSON(e),this.#A(this.lastActiveToken)}end=()=>(t3.clear(),this._basePost({action:"end"}));remove=()=>(t3.clear(),this._basePost({action:"remove"}));touch=()=>this._basePost({action:"touch",body:{active_organization_id:this.lastActiveOrganizationId}}).then(e=>(e.lastActiveToken&&iC.emit(iw,{token:e.lastActiveToken}),e));clearCache=()=>t3.clear();getToken=async e=>tR(()=>this._getToken(e),{factor:1.55,initialDelay:3e3,maxDelayBetweenRetries:5e4,jitter:!1,shouldRetry:(e,t)=>!E(e)&&t<=8});checkAuthorization=e=>{let t=(this.user?.organizationMemberships||[]).find(e=>e.organization.id===this.lastActiveOrganizationId);return(e=>t=>{if(!e.userId)return!1;let i=((e,t)=>{let{features:i,plans:n}=t;return e.feature&&i?i8(i,e.feature):e.plan&&n?i8(n,e.plan):null})(t,e),n=((e,t)=>{let{orgId:i,orgRole:n,orgPermissions:r}=t;return(e.role||e.permission)&&i&&n&&r?e.permission?r.includes(i7(e.permission)):e.role?i7(n)===i7(e.role):null:null})(t,e),r=((e,{factorVerificationAge:t})=>{if(!e.reverification||!t)return null;let i=(e=>{let t,i;if(!e)return!1;let n="string"==typeof e&&i5.has(e),r="object"==typeof e&&(t=e.level,i6.has(t))&&"number"==typeof(i=e.afterMinutes)&&i>0;return(!!n||!!r)&&(e=>"string"==typeof e?i4[e]:e).bind(null,e)})(e.reverification);if(!i)return null;let{level:n,afterMinutes:r}=i(),[s,a]=t,o=-1!==s?r>s:null,l=-1!==a?r>a:null;switch(n){case"first_factor":return o;case"second_factor":return -1!==a?l:o;case"multi_factor":return -1===a?o:o&&l}})(t,e);return[i||n,r].some(e=>null===e)?[i||n,r].some(e=>!0===e):[i||n,r].every(e=>!0===e)})({userId:this.user?.id,factorVerificationAge:this.factorVerificationAge,orgId:t?.id,orgRole:t?.role,orgPermissions:t?.permissions,features:this.lastActiveToken?.jwt?.claims.fea||"",plans:this.lastActiveToken?.jwt?.claims.pla||""})(e)};#A=e=>{if(!e)return;let t=this.#U();t3.get({tokenId:t})||t3.set({tokenId:t,tokenResolver:Promise.resolve(e)})};#U(e,t){let i=void 0===t?this.lastActiveOrganizationId:t;return tQ.build(this.id,e,i)}startVerification=async({level:e})=>new nn((await tB._fetch({method:"POST",path:`/client/sessions/${this.id}/verify`,body:{level:e}}))?.response);prepareFirstFactorVerification=async e=>{let t;switch(e.strategy){case"email_code":t={emailAddressId:e.emailAddressId};break;case"phone_code":t={phoneNumberId:e.phoneNumberId,default:e.default};break;case"passkey":t={};break;case"enterprise_sso":t={emailAddressId:e.emailAddressId,enterpriseConnectionId:e.enterpriseConnectionId,redirectUrl:e.redirectUrl};break;default:tC("Session.prepareFirstFactorVerification",e.strategy)}return new nn((await tB._fetch({method:"POST",path:`/client/sessions/${this.id}/verify/prepare_first_factor`,body:{...t,strategy:e.strategy}}))?.response)};attemptFirstFactorVerification=async e=>{let t;return t="passkey"===e.strategy?{publicKeyCredential:JSON.stringify(iN(e.publicKeyCredential))}:{...e},new nn((await tB._fetch({method:"POST",path:`/client/sessions/${this.id}/verify/attempt_first_factor`,body:{...t,strategy:e.strategy}}))?.response)};verifyWithPasskey=async()=>{let{nonce:e=null}=(await this.prepareFirstFactorVerification({strategy:"passkey"})).firstFactorVerification,t=nr.clerk.__internal_isWebAuthnSupported||ne,i=nr.clerk.__internal_getPublicCredentials||iE;if(!t())throw new T("Passkeys are not supported",{code:"passkey_not_supported"});let n=e?iR(JSON.parse(e)):null;n||tO("get");let{publicKeyCredential:r,error:s}=await i({publicKeyOptions:n,conditionalUI:!1});if(!r)throw s;return this.attemptFirstFactorVerification({strategy:"passkey",publicKeyCredential:r})};prepareSecondFactorVerification=async e=>new nn((await tB._fetch({method:"POST",path:`/client/sessions/${this.id}/verify/prepare_second_factor`,body:e}))?.response);attemptSecondFactorVerification=async e=>new nn((await tB._fetch({method:"POST",path:`/client/sessions/${this.id}/verify/attempt_second_factor`,body:e}))?.response);fromJSON(e){return e&&(this.id=e.id,this.status=e.status,this.expireAt=tG(e.expire_at),this.abandonAt=tG(e.abandon_at),this.factorVerificationAge=e.factor_verification_age,this.lastActiveAt=tG(e.last_active_at||void 0),this.lastActiveOrganizationId=e.last_active_organization_id,this.actor=e.actor||null,this.createdAt=tG(e.created_at),this.updatedAt=tG(e.updated_at),this.user=new nS(e.user),this.tasks=e.tasks||null,e.public_user_data&&(this.publicUserData=new na(e.public_user_data)),this.lastActiveToken=e.last_active_token?new nb(e.last_active_token):null),this}__internal_toSnapshot(){return{object:"session",id:this.id,status:this.status,expire_at:this.expireAt.getTime(),abandon_at:this.abandonAt.getTime(),factor_verification_age:this.factorVerificationAge,last_active_at:this.lastActiveAt.getTime(),last_active_organization_id:this.lastActiveOrganizationId,actor:this.actor,tasks:this.tasks,user:this.user?.__internal_toSnapshot()||null,public_user_data:this.publicUserData.__internal_toSnapshot(),last_active_token:this.lastActiveToken?.__internal_toSnapshot()||null,created_at:this.createdAt.getTime(),updated_at:this.updatedAt.getTime()}}async _getToken(e){if(!this.user)return null;let{leewayInSeconds:t,template:i,skipCache:n=!1}=e||{},r=void 0===e?.organizationId?this.lastActiveOrganizationId:e?.organizationId;if(!i&&Number(t)>=60)throw Error("Leeway can not exceed the token lifespan (60 seconds)");let s=this.#U(i,r),a=n?void 0:t3.get({tokenId:s},t),o=!i&&r===this.lastActiveOrganizationId;if(a){eU.debug("Using cached token (no fetch needed)",{tokenId:s},"session");let e=await a.tokenResolver;return o&&iC.emit(iw,{token:e}),e.getRawString()||null}eU.info("Fetching new token from API",{organizationId:r,template:i,tokenId:s},"session");let l=i?`${this.path()}/tokens/${i}`:`${this.path()}/tokens`,c=i?{}:{organizationId:r},d=nb.create(l,c);return t3.set({tokenId:s,tokenResolver:d}),d.then(e=>(o&&(iC.emit(iw,{token:e}),e.jwt&&(this.lastActiveToken=e,iC.emit(ik,null))),e.getRawString()||null))}get currentTask(){let[e]=this.tasks??[];return e}}class ns extends tB{id;pathRoot="/me/passkeys";verification=null;name=null;lastUsedAt=null;createdAt;updatedAt;constructor(e){super(),this.fromJSON(e)}static async create(){return tB._fetch({path:"/me/passkeys",method:"POST"}).then(e=>new ns(e?.response))}static async attemptVerification(e,t){let i=function(e){let t=e.response;return{...iM(e),response:{clientDataJSON:iF(t.clientDataJSON),attestationObject:iF(t.attestationObject),transports:t.getTransports()}}}(t);return tB._fetch({path:`/me/passkeys/${e}/attempt_verification`,method:"POST",body:{strategy:"passkey",publicKeyCredential:JSON.stringify(i)}}).then(e=>new ns(e?.response))}static async registerPasskey(){let e=ns.clerk.__internal_isWebAuthnSupported||ne,t=ns.clerk.__internal_createPublicCredentials||iO,i=ns.clerk.__internal_isWebAuthnPlatformAuthenticatorSupported||ni;if(!e())throw new T("Passkeys are not supported on this device.",{code:"passkey_not_supported"});let n=await this.create(),{verification:r}=n,s=r?.publicKey;if(s||tO("create"),s.authenticatorSelection?.authenticatorAttachment==="platform"&&!await i())throw new T("Registration requires a platform authenticator but the device does not support it.",{code:"passkey_pa_not_supported"});let{publicKeyCredential:a,error:o}=await t(s);if(!a)throw o;return this.attemptVerification(n.id,a)}update=e=>this._basePatch({body:e});delete=async()=>new iu((await tB._fetch({path:this.path(),method:"DELETE"}))?.response);fromJSON(e){return e&&(this.id=e.id,this.name=e.name,this.lastUsedAt=e.last_used_at?tG(e.last_used_at):null,this.createdAt=tG(e.created_at),this.updatedAt=tG(e.updated_at),e.verification&&(this.verification=new iW(e.verification))),this}__internal_toSnapshot(){return{object:"passkey",id:this.id,name:this.name,verification:this.verification?.__internal_toSnapshot()||null,last_used_at:this.lastUsedAt?.getTime()||null,created_at:this.createdAt.getTime(),updated_at:this.updatedAt.getTime()}}}class na{firstName;lastName;imageUrl;hasImage;identifier;userId;constructor(e){this.fromJSON(e)}fromJSON(e){return e&&(this.firstName=e.first_name||null,this.lastName=e.last_name||null,this.imageUrl=e.image_url||"",this.hasImage=e.has_image||!1,this.identifier=e.identifier||"",this.userId=e.user_id),this}__internal_toSnapshot(){return{first_name:this.firstName,last_name:this.lastName,image_url:this.imageUrl,has_image:this.hasImage,identifier:this.identifier,user_id:this.userId}}}class no extends tB{pathRoot="";id;status;abandonAt;expireAt;lastActiveAt;latestActivity;actor;constructor(e,t){super(),this.pathRoot=t,this.fromJSON(e)}static retrieve(){let e=tB.clerk.session?.id;return this.clerk.getFapiClient().request({method:"GET",path:"/me/sessions/active",sessionId:e}).then(e=>e.payload.map(e=>new no(e,"/me/sessions"))).catch(()=>[])}revoke(){return this._basePost({action:"revoke",body:{}})}fromJSON(e){let t;return e?(this.id=e.id,this.status=e.status,this.expireAt=tG(e.expire_at),this.abandonAt=tG(e.abandon_at),this.lastActiveAt=tG(e.last_active_at||void 0),this.latestActivity={id:(t=e.latest_activity??{}).id,deviceType:t.device_type,browserName:t.browser_name,browserVersion:t.browser_version,country:t.country,city:t.city,isMobile:t.is_mobile,ipAddress:t.ip_address},this.actor=e.actor,this):this}}function nl(e){if(!e)return"";let t=e.replace(/clerk\.accountsstage\./,"accountsstage.").replace(/clerk\.accounts\.|clerk\./,"accounts.");return`https://${t}`}async function nc(e,t,i,n,r){if(!e.client||!n.popup)return;let s=nl(e.frontendApi),{redirectUrl:a}=n,o=new URL(a);o.searchParams.set("sign_in_force_redirect_url",n.redirectUrlComplete),o.searchParams.set("sign_up_force_redirect_url",n.redirectUrlComplete),o.searchParams.set("intent",t);let l=e.buildUrlWithAuth(o.toString()),c=e.buildUrlWithAuth(`${s}/popup-callback`),d=e.buildUrlWithAuth(`${s}/popup-callback?return_url=${encodeURIComponent(l)}`),h=async t=>{if(t.origin!==s)return;let i=!1;if(t.data.session){if(!e.client?.sessions.find(e=>e.id===t.data.session))try{await e.client?.reload()}catch(e){console.error(e)}await e.setActive({session:t.data.session,redirectUrl:n.redirectUrlComplete}),i=!0}else t.data.return_url&&(e.navigate(t.data.return_url),i=!0);i&&window.removeEventListener("message",h)};window.addEventListener("message",h),await i({...n,redirectUrlComplete:c,redirectUrl:d},r)}let nd=(e,t)=>{let{onValidation:n=eb,onValidationComplexity:r=eb}=t||{},{show_zxcvbn:s,validatePassword:a}=e,o=t=>((e,t)=>{let{max_length:i,min_length:n,require_special_char:r,require_lowercase:s,require_numbers:a,require_uppercase:o}=t,l=(e=>{let t;if(e.allowed_special_characters){let i=e.allowed_special_characters.replace("[","\\[");i=i.replace("]","\\]"),t=RegExp(`[${i}]`)}else t=/[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/;return(e,{minLength:i,maxLength:n})=>({max_length:e.length<n,min_length:e.length>=i,require_numbers:/\d/.test(e),require_lowercase:/[a-z]/.test(e),require_uppercase:/[A-Z]/.test(e),require_special_char:t.test(e)})})(t)(e,{maxLength:t.max_length,minLength:t.min_length}),c={max_length:i,min_length:n,require_special_char:r,require_lowercase:s,require_numbers:a,require_uppercase:o},d=new Map;for(let e in c)c[e]&&!l[e]&&d.set(e,!0);return Object.freeze(Object.fromEntries(d))})(t,e),l=(({min_zxcvbn_strength:e,onResult:t})=>i=>n=>{let r=i(n);return(t?.(r),r.score>=e&&r.score<3)?{state:"pass",keys:["unstable__errors.zxcvbn.couldBeStronger"],result:r}:r.score>=e?{state:"excellent",result:r}:{state:"fail",keys:["unstable__errors.zxcvbn.notEnough",...r.feedback.suggestions.map(e=>`unstable__errors.zxcvbn.suggestions.${e}`)],result:r}})(e),c={};return(e,t)=>{let{onValidation:d=n,onValidationComplexity:h=r}=t||{};if(!a)return;let u=o(e);h(0===Object.keys(u).length),c={...c,complexity:u},s&&Promise.all([i.e("890").then(i.bind(i,384)),i.e("377").then(i.bind(i,7706))]).then(([e,t])=>{let{zxcvbnOptions:i,zxcvbn:n}=e,{dictionary:r,adjacencyGraphs:s}=t;return i.setOptions({dictionary:{...r},graphs:s}),n}).then(t=>{let i=l(t)(e);d({...c={...c,strength:i},strength:i})}),c.complexity&&0===Object.keys(c.complexity).length&&s||d(c)}};async function nh(e,t){iC.emit("resource:error",{resource:e,error:null}),iC.emit("resource:fetch",{resource:e,status:"fetching"});try{return{result:await t(),error:null}}catch(t){return iC.emit("resource:error",{resource:e,error:t}),{error:t}}finally{iC.emit("resource:fetch",{resource:e,status:"idle"})}}class nu extends tB{pathRoot="/client/sign_ins";id;_status=null;supportedIdentifiers=[];supportedFirstFactors=[];supportedSecondFactors=null;firstFactorVerification=new iD(null);secondFactorVerification=new iD(null);identifier=null;createdSessionId=null;userData=new nf(null);clientTrustState;get status(){return this._status}set status(e){let t=this._status;this._status=e,e&&t!==e&&eU.debug("SignIn.status",{id:this.id,from:t,to:e})}__internal_future=new np(this);__internal_basePost=this._basePost.bind(this);__internal_baseGet=this._baseGet.bind(this);constructor(e=null){super(),this.fromJSON(e)}create=e=>{eU.debug("SignIn.create",{id:this.id,strategy:"strategy"in e?e.strategy:void 0});let t=te();return this._basePost({path:this.pathRoot,body:t?{locale:t,...e}:e})};resetPassword=e=>this._basePost({body:e,action:"reset_password"});prepareFirstFactor=e=>{let t;switch(eU.debug("SignIn.prepareFirstFactor",{id:this.id,strategy:e.strategy}),e.strategy){case"passkey":t={};break;case"email_link":t={emailAddressId:e.emailAddressId,redirectUrl:e.redirectUrl};break;case"email_code":case"reset_password_email_code":t={emailAddressId:e.emailAddressId};break;case"phone_code":t={phoneNumberId:e.phoneNumberId,default:e.default,channel:e.channel};break;case"web3_metamask_signature":case"web3_base_signature":case"web3_coinbase_wallet_signature":case"web3_okx_wallet_signature":t={web3WalletId:e.web3WalletId};break;case"reset_password_phone_code":t={phoneNumberId:e.phoneNumberId};break;case"saml":t={redirectUrl:e.redirectUrl,actionCompleteRedirectUrl:e.actionCompleteRedirectUrl};break;case"enterprise_sso":t={redirectUrl:e.redirectUrl,actionCompleteRedirectUrl:e.actionCompleteRedirectUrl,oidcPrompt:e.oidcPrompt,enterpriseConnectionId:e.enterpriseConnectionId};break;default:tC("SignIn.prepareFirstFactor",e.strategy)}return this._basePost({body:{...t,strategy:e.strategy},action:"prepare_first_factor"})};attemptFirstFactor=e=>{let t;return eU.debug("SignIn.attemptFirstFactor",{id:this.id,strategy:e.strategy}),t="passkey"===e.strategy?{publicKeyCredential:JSON.stringify(iN(e.publicKeyCredential))}:{...e},this._basePost({body:{...t,strategy:e.strategy},action:"attempt_first_factor"})};createEmailLinkFlow=()=>{let{run:e,stop:t}=iy();return{startEmailLinkFlow:async({emailAddressId:i,redirectUrl:n})=>(this.id||tk("SignIn"),await this.prepareFirstFactor({strategy:"email_link",emailAddressId:i,redirectUrl:n}),new Promise((i,n)=>{e(()=>this.reload().then(e=>{let n=e.firstFactorVerification.status;("verified"===n||"expired"===n)&&(t(),i(e))}).catch(e=>{t(),n(e)}))})),cancelEmailLinkFlow:t}};prepareSecondFactor=e=>(eU.debug("SignIn.prepareSecondFactor",{id:this.id,strategy:e.strategy}),this._basePost({body:e,action:"prepare_second_factor"}));attemptSecondFactor=e=>(eU.debug("SignIn.attemptSecondFactor",{id:this.id,strategy:e.strategy}),this._basePost({body:e,action:"attempt_second_factor"}));authenticateWithRedirectOrPopup=async(e,t)=>{let{strategy:i,redirectUrlComplete:n,identifier:r,oidcPrompt:s,continueSignIn:a,enterpriseConnectionId:o}=e||{},l=nu.clerk.buildUrlWithAuth(e.redirectUrl);this.id&&a||await this.create({strategy:i,identifier:r,redirectUrl:l,actionCompleteRedirectUrl:n}),("saml"===i||"enterprise_sso"===i)&&await this.prepareFirstFactor({strategy:i,redirectUrl:l,actionCompleteRedirectUrl:n,oidcPrompt:s,enterpriseConnectionId:o});let{status:c,externalVerificationRedirectURL:d}=this.firstFactorVerification;"unverified"===c&&d?t(d):tP(c,nu.fapiClient.buildEmailAddress("support"))};authenticateWithRedirect=async e=>this.authenticateWithRedirectOrPopup(e,eO);authenticateWithPopup=async e=>{let{popup:t}=e||{};return t||tI("popup"),nc(nu.clerk,"signIn",this.authenticateWithRedirectOrPopup,e,e=>{t.location.href=e.toString()})};authenticateWithWeb3=async e=>{let t,{identifier:i,generateSignature:n,strategy:r="web3_metamask_signature"}=e||{},s=r.replace("web3_","").replace("_signature","");"function"!=typeof n&&tI("generateSignature"),await this.create({identifier:i});let a=this.supportedFirstFactors?.find(e=>e.strategy===r);a||tA("SignIn"),await this.prepareFirstFactor(a);let{message:o}=this.firstFactorVerification;o||tA("SignIn");try{t=await n({identifier:i,nonce:o,provider:s})}catch(e){if("coinbase_wallet"===s&&4001===e.code)t=await n({identifier:i,nonce:o,provider:s});else throw e}return this.attemptFirstFactor({signature:t,strategy:r})};authenticateWithMetamask=async()=>{let e=await ta();return this.authenticateWithWeb3({identifier:e,generateSignature:td,strategy:"web3_metamask_signature"})};authenticateWithCoinbaseWallet=async()=>{let e=await to();return this.authenticateWithWeb3({identifier:e,generateSignature:th,strategy:"web3_coinbase_wallet_signature"})};authenticateWithBase=async()=>{let e=await tc();return this.authenticateWithWeb3({identifier:e,generateSignature:tp,strategy:"web3_base_signature"})};authenticateWithOKXWallet=async()=>{let e=await tl();return this.authenticateWithWeb3({identifier:e,generateSignature:tu,strategy:"web3_okx_wallet_signature"})};authenticateWithPasskey=async e=>{let{flow:t}=e||{},i=nu.clerk.__internal_isWebAuthnSupported||ne,n=nu.clerk.__internal_getPublicCredentials||iE,r=nu.clerk.__internal_isWebAuthnAutofillSupported||nt;if(!i())throw new T("Passkeys are not supported",{code:"passkey_not_supported"});if("autofill"===t||"discoverable"===t)await this.create({strategy:"passkey"});else{let e=this.supportedFirstFactors.find(e=>"passkey"===e.strategy);e||tU(),await this.prepareFirstFactor(e)}let{nonce:s}=this.firstFactorVerification,a=s?iR(JSON.parse(s)):null;a||tO("get");let o=!1;"autofill"===t&&(o=await r());let{publicKeyCredential:l,error:c}=await n({publicKeyOptions:a,conditionalUI:o});if(!l)throw c;return this.attemptFirstFactor({publicKeyCredential:l,strategy:"passkey"})};validatePassword=(e,t)=>{if(nu.clerk.__unstable__environment?.userSettings.passwordSettings)return nd({...nu.clerk.__unstable__environment?.userSettings.passwordSettings,validatePassword:!0})(e,t)};fromJSON(e){return e&&(this.id=e.id,this.status=e.status,this.supportedIdentifiers=e.supported_identifiers,this.identifier=e.identifier,this.supportedFirstFactors=er(e.supported_first_factors),this.supportedSecondFactors=er(e.supported_second_factors),this.firstFactorVerification=new iD(e.first_factor_verification),this.secondFactorVerification=new iD(e.second_factor_verification),this.createdSessionId=e.created_session_id,this.userData=new nf(e.user_data),this.clientTrustState=e.client_trust_state??void 0),iC.emit("resource:update",{resource:this}),this}__internal_toSnapshot(){return{object:"sign_in",id:this.id||"",status:this.status||null,supported_identifiers:this.supportedIdentifiers,supported_first_factors:en(this.supportedFirstFactors),supported_second_factors:en(this.supportedSecondFactors),first_factor_verification:this.firstFactorVerification.__internal_toSnapshot(),second_factor_verification:this.secondFactorVerification.__internal_toSnapshot(),identifier:this.identifier,created_session_id:this.createdSessionId,user_data:this.userData.__internal_toSnapshot()}}}class np{resource;emailCode={sendCode:this.sendEmailCode.bind(this),verifyCode:this.verifyEmailCode.bind(this)};emailLink={sendLink:this.sendEmailLink.bind(this),waitForVerification:this.waitForEmailLinkVerification.bind(this),get verification(){if(!a())return null;let e=ez("__clerk_status"),t=ez("__clerk_created_session");if(!e||!t)return null;let i="verified"===e&&void 0!==nu.clerk.client&&nu.clerk.client.sessions.some(e=>e.id===t);return{status:e,createdSessionId:t,verifiedFromTheSameClient:i}}};resetPasswordEmailCode={sendCode:this.sendResetPasswordEmailCode.bind(this),verifyCode:this.verifyResetPasswordEmailCode.bind(this),submitPassword:this.submitResetPassword.bind(this)};phoneCode={sendCode:this.sendPhoneCode.bind(this),verifyCode:this.verifyPhoneCode.bind(this)};mfa={sendPhoneCode:this.sendMFAPhoneCode.bind(this),verifyPhoneCode:this.verifyMFAPhoneCode.bind(this),verifyTOTP:this.verifyTOTP.bind(this),verifyBackupCode:this.verifyBackupCode.bind(this)};constructor(e){this.resource=e}get id(){return this.resource.id}get identifier(){return this.resource.identifier}get createdSessionId(){return this.resource.createdSessionId}get userData(){return this.resource.userData}get status(){return this.resource.status||"needs_identifier"}get supportedFirstFactors(){return this.resource.supportedFirstFactors??[]}get supportedSecondFactors(){return this.resource.supportedSecondFactors??[]}get isTransferable(){return"transferable"===this.resource.firstFactorVerification.status}get existingSession(){if("failed"===this.resource.firstFactorVerification.status&&this.resource.firstFactorVerification.error?.code==="identifier_already_signed_in"&&this.resource.firstFactorVerification.error?.meta?.sessionId)return{sessionId:this.resource.firstFactorVerification.error?.meta?.sessionId}}get firstFactorVerification(){return this.resource.firstFactorVerification}get secondFactorVerification(){return this.resource.secondFactorVerification}async sendResetPasswordEmailCode(){return nh(this.resource,async()=>{if(!this.resource.id)throw Error("Cannot reset password without a sign in.");let e=this.resource.supportedFirstFactors?.find(e=>"reset_password_email_code"===e.strategy);if(!e)throw Error("Reset password email code factor not found");let{emailAddressId:t}=e;await this.resource.__internal_basePost({body:{emailAddressId:t,strategy:"reset_password_email_code"},action:"prepare_first_factor"})})}async verifyResetPasswordEmailCode(e){let{code:t}=e;return nh(this.resource,async()=>{await this.resource.__internal_basePost({body:{code:t,strategy:"reset_password_email_code"},action:"attempt_first_factor"})})}async submitResetPassword(e){let{password:t,signOutOfOtherSessions:i=!0}=e;return nh(this.resource,async()=>{await this.resource.__internal_basePost({body:{password:t,signOutOfOtherSessions:i},action:"reset_password"})})}async _create(e){let t=te();await this.resource.__internal_basePost({path:this.resource.pathRoot,body:t?{locale:t,...e}:e})}async create(e){return nh(this.resource,async()=>{await this._create(e)})}async password(e){if([e.identifier,e.emailAddress,e.phoneNumber].filter(Boolean).length>1)throw Error("Only one of identifier, emailAddress, or phoneNumber can be provided");return nh(this.resource,async()=>{let t=e.identifier||e.emailAddress||e.phoneNumber,i=this.resource.identifier,n=te();await this.resource.__internal_basePost({path:this.resource.pathRoot,body:{identifier:t||i,password:e.password,...n?{locale:n}:{}}})})}async sendEmailCode(e={}){let{emailAddress:t,emailAddressId:i}=e;if(!this.resource.id&&i)throw Error("signIn.emailCode.sendCode() cannot be called with an emailAddressId if an existing signIn does not exist.");if(!this.resource.id&&!t)throw Error("signIn.emailCode.sendCode() cannot be called without an emailAddress if an existing signIn does not exist.");return nh(this.resource,async()=>{t&&await this._create({identifier:t});let e=this.selectFirstFactor({strategy:"email_code",emailAddressId:i});if(!e)throw Error("Email code factor not found");await this.resource.__internal_basePost({body:{emailAddressId:e.emailAddressId,strategy:"email_code"},action:"prepare_first_factor"})})}async verifyEmailCode(e){let{code:t}=e;return nh(this.resource,async()=>{await this.resource.__internal_basePost({body:{code:t,strategy:"email_code"},action:"attempt_first_factor"})})}async sendEmailLink(e){let{emailAddress:t,verificationUrl:i,emailAddressId:n}=e;if(!this.resource.id&&n)throw Error("signIn.emailLink.sendLink() cannot be called with an emailAddressId if an existing signIn does not exist.");if(!this.resource.id&&!t)throw Error("signIn.emailLink.sendLink() cannot be called without an emailAddress if an existing signIn does not exist.");return nh(this.resource,async()=>{t&&await this._create({identifier:t});let e=this.selectFirstFactor({strategy:"email_link",emailAddressId:n});if(!e)throw Error("Email link factor not found");let r=i;try{new URL(i)}catch{r=window.location.origin+i}await this.resource.__internal_basePost({body:{emailAddressId:e.emailAddressId,redirectUrl:r,strategy:"email_link"},action:"prepare_first_factor"})})}async waitForEmailLinkVerification(){return nh(this.resource,async()=>{let{run:e,stop:t}=iy();await new Promise((i,n)=>{e(async()=>{try{let e=await this.resource.__internal_baseGet(),n=e.firstFactorVerification.status;("verified"===n||"expired"===n)&&(t(),i(e))}catch(e){t(),n(e)}})})})}async sendPhoneCode(e={}){let{phoneNumber:t,phoneNumberId:i,channel:n="sms"}=e;if(!this.resource.id&&i)throw Error("signIn.phoneCode.sendCode() cannot be called with an phoneNumberId if an existing signIn does not exist.");if(!this.resource.id&&!t)throw Error("signIn.phoneCode.sendCode() cannot be called without an phoneNumber if an existing signIn does not exist.");return nh(this.resource,async()=>{t&&await this._create({identifier:t});let e=this.selectFirstFactor({strategy:"phone_code",phoneNumberId:i});if(!e)throw Error("Phone code factor not found");await this.resource.__internal_basePost({body:{phoneNumberId:e.phoneNumberId,strategy:"phone_code",channel:n},action:"prepare_first_factor"})})}async verifyPhoneCode(e){let{code:t}=e;return nh(this.resource,async()=>{await this.resource.__internal_basePost({body:{code:t,strategy:"phone_code"},action:"attempt_first_factor"})})}async sso(e){let{strategy:t,redirectUrl:i,redirectCallbackUrl:n,popup:r,oidcPrompt:s,enterpriseConnectionId:a}=e;return nh(this.resource,async()=>{let e=i;try{new URL(i)}catch{e=window.location.origin+i}let o={redirectUrl:nu.clerk.buildUrlWithAuth(n),actionCompleteRedirectUrl:e};if(r){let t=function(e,{redirectCallbackUrl:t,redirectUrl:i}){let n=nl(e.frontendApi),r=new URL(t);r.searchParams.set("sign_in_force_redirect_url",i),r.searchParams.set("sign_up_force_redirect_url",i);let s=e.buildUrlWithAuth(r.toString()),a=e.buildUrlWithAuth(`${n}/popup-callback`);return{redirectCallbackUrl:e.buildUrlWithAuth(`${n}/popup-callback?return_url=${encodeURIComponent(s)}`),redirectUrl:a}}(nu.clerk,{redirectCallbackUrl:o.redirectUrl,redirectUrl:e});o.redirectUrl=t.redirectCallbackUrl,o.actionCompleteRedirectUrl=t.redirectUrl}await this._create({strategy:t,...o}),"enterprise_sso"===t&&await this.resource.__internal_basePost({body:{...o,oidcPrompt:s,enterpriseConnectionId:a,strategy:"enterprise_sso"},action:"prepare_first_factor"});let{status:l,externalVerificationRedirectURL:c}=this.resource.firstFactorVerification;if("unverified"===l&&c)if(r){var d,h;await (d=nu.clerk,h={popup:r,externalVerificationRedirectURL:c},new Promise((e,t)=>{if(!d.client||!h.popup)return void t();let i=async n=>{n.origin===nl(d.frontendApi)&&(n.data.session||n.data.return_url?(window.removeEventListener("message",i),e()):t())};window.addEventListener("message",i),h.popup.location.href=h.externalVerificationRedirectURL.toString()})),await this.resource.reload()}else eO(c)})}async web3(e){let{strategy:t}=e,i=t.replace("web3_","").replace("_signature","");return nh(this.resource,async()=>{let e,n,r;switch(i){case"metamask":e=await ta(),n=td;break;case"coinbase_wallet":e=await to(),n=th;break;case"base":e=await tc(),n=tp;break;case"okx_wallet":e=await tl(),n=tu;break;default:throw Error(`Unsupported Web3 provider: ${i}`)}await this._create({identifier:e});let s=this.resource.supportedFirstFactors?.find(e=>e.strategy===t);if(!s)throw Error("Web3 first factor not found");await this.resource.__internal_basePost({body:{web3WalletId:s.web3WalletId,strategy:t},action:"prepare_first_factor"});let{message:a}=this.firstFactorVerification;if(!a)throw Error("Web3 nonce not found");try{r=await n({identifier:e,nonce:a})}catch(t){if("coinbase_wallet"===i&&4001===t.code)r=await n({identifier:e,nonce:a});else throw t}await this.resource.__internal_basePost({body:{signature:r,strategy:t},action:"attempt_first_factor"})})}async passkey(e){let{flow:t}=e||{},i=nu.clerk.__internal_isWebAuthnSupported||ne,n=nu.clerk.__internal_getPublicCredentials||iE,r=nu.clerk.__internal_isWebAuthnAutofillSupported||nt;if(!i())throw new T("Passkeys are not supported",{code:"passkey_not_supported"});return nh(this.resource,async()=>{"autofill"===t||"discoverable"===t?await this._create({strategy:"passkey"}):(this.supportedFirstFactors.find(e=>"passkey"===e.strategy)||tU(),await this.resource.__internal_basePost({body:{strategy:"passkey"},action:"prepare_first_factor"}));let{nonce:e}=this.firstFactorVerification,i=e?iR(JSON.parse(e)):null;i||tO("get");let s=!1;"autofill"===t&&(s=await r());let{publicKeyCredential:a,error:o}=await n({publicKeyOptions:i,conditionalUI:s});if(!a)throw o;await this.resource.__internal_basePost({body:{publicKeyCredential:JSON.stringify(iN(a)),strategy:"passkey"},action:"attempt_first_factor"})})}async sendMFAPhoneCode(){return nh(this.resource,async()=>{let e=this.resource.supportedSecondFactors?.find(e=>"phone_code"===e.strategy);if(!e)throw Error("Phone code factor not found");let{phoneNumberId:t}=e;await this.resource.__internal_basePost({body:{phoneNumberId:t,strategy:"phone_code"},action:"prepare_second_factor"})})}async verifyMFAPhoneCode(e){let{code:t}=e;return nh(this.resource,async()=>{await this.resource.__internal_basePost({body:{code:t,strategy:"phone_code"},action:"attempt_second_factor"})})}async verifyTOTP(e){let{code:t}=e;return nh(this.resource,async()=>{await this.resource.__internal_basePost({body:{code:t,strategy:"totp"},action:"attempt_second_factor"})})}async verifyBackupCode(e){let{code:t}=e;return nh(this.resource,async()=>{await this.resource.__internal_basePost({body:{code:t,strategy:"backup_code"},action:"attempt_second_factor"})})}async ticket(e){let t=e?.ticket??ez("__clerk_ticket");return this.create({ticket:t??void 0})}async finalize(e){let{navigate:t}=e||{};return nh(this.resource,async()=>{if(!this.resource.createdSessionId)throw Error("Cannot finalize sign-in without a created session.");await nu.clerk.client?.reload(),await nu.clerk.setActive({session:this.resource.createdSessionId,navigate:t})})}selectFirstFactor({strategy:e,emailAddressId:t,phoneNumberId:i}){if(!this.resource.supportedFirstFactors)return null;if(t){let i=this.resource.supportedFirstFactors.find(i=>i.strategy===e&&i.emailAddressId===t);if(i)return i}if(i){let t=this.resource.supportedFirstFactors.find(t=>t.strategy===e&&t.phoneNumberId===i);if(t)return t}let n=this.resource.supportedFirstFactors.find(t=>t.strategy===e&&t.safeIdentifier===this.resource.identifier);if(n)return n;let r=this.resource.supportedFirstFactors.find(t=>t.strategy===e);return r||null}}class nf{firstName;lastName;imageUrl;hasImage;constructor(e){this.fromJSON(e)}fromJSON(e){return e&&(this.firstName=e.first_name,this.lastName=e.last_name,this.imageUrl=e.image_url??void 0,this.hasImage=e.has_image??void 0),this}__internal_toSnapshot(){return{first_name:this.firstName,last_name:this.lastName,image_url:this.imageUrl||null,has_image:this.hasImage||null}}}function nm(e){let{unsafeMetadata:t}={...e},i=t?"object"==typeof t?JSON.stringify(t):t:"";return{...e,...t?{unsafeMetadata:i}:{}}}class n_ extends tB{pathRoot="/client/sign_ups";id;_status=null;requiredFields=[];missingFields=[];optionalFields=[];unverifiedFields=[];verifications=new iL(null);username=null;firstName=null;lastName=null;emailAddress=null;phoneNumber=null;web3wallet=null;externalAccount;hasPassword=!1;unsafeMetadata={};createdSessionId=null;createdUserId=null;abandonAt=null;legalAcceptedAt=null;locale=null;get status(){return this._status}set status(e){let t=this._status;this._status=e,e&&t!==e&&eU.debug("SignUp.status",{id:this.id,from:t,to:e})}__internal_future=new ng(this);__internal_basePost=this._basePost.bind(this);__internal_basePatch=this._basePatch.bind(this);constructor(e=null){super(),this.fromJSON(e)}create=async e=>{eU.debug("SignUp.create",{id:this.id,strategy:e.strategy});let t={...e};if(!t.locale){let e=te();e&&(t.locale=e)}if(!this.clientBypass()&&!this.shouldBypassCaptchaForAttempt(e)){let e=new tJ(n_.clerk),i=await e.managedOrInvisible({action:"signup"});if(!i)throw new P("",{code:"captcha_unavailable"});t={...t,...i}}if(t.transfer&&this.shouldBypassCaptchaForAttempt(t)){let e=n_.clerk.client?.signIn.firstFactorVerification.strategy;e&&(t={...t,strategy:e})}return this._basePost({path:this.pathRoot,body:nm(t)})};prepareVerification=e=>(eU.debug("SignUp.prepareVerification",{id:this.id,strategy:e.strategy}),this._basePost({body:e,action:"prepare_verification"}));attemptVerification=e=>(eU.debug("SignUp.attemptVerification",{id:this.id,strategy:e.strategy}),this._basePost({body:e,action:"attempt_verification"}));prepareEmailAddressVerification=e=>this.prepareVerification(e||{strategy:"email_code"});attemptEmailAddressVerification=e=>this.attemptVerification({...e,strategy:"email_code"});createEmailLinkFlow=()=>{let{run:e,stop:t}=iy();return{startEmailLinkFlow:async({redirectUrl:i})=>(this.id||tk("SignUp"),await this.prepareEmailAddressVerification({strategy:"email_link",redirectUrl:i}),new Promise((i,n)=>{e(()=>this.reload().then(e=>{let n=e.verifications.emailAddress.status;("verified"===n||"expired"===n)&&(t(),i(e))}).catch(e=>{t(),n(e)}))})),cancelEmailLinkFlow:t}};preparePhoneNumberVerification=e=>this.prepareVerification(e||{strategy:"phone_code"});attemptPhoneNumberVerification=e=>this.attemptVerification({...e,strategy:"phone_code"});prepareWeb3WalletVerification=e=>this.prepareVerification({strategy:"web3_metamask_signature",...e});attemptWeb3WalletVerification=async e=>{let{signature:t,strategy:i="web3_metamask_signature"}=e;return this.attemptVerification({signature:t,strategy:i})};authenticateWithWeb3=async e=>{let t,{generateSignature:i,identifier:n,unsafeMetadata:r,strategy:s="web3_metamask_signature",legalAccepted:a}=e||{},o=s.replace("web3_","").replace("_signature","");"function"!=typeof i&&tI("generateSignature");let l=n||this.web3wallet;await this.create({web3Wallet:l,unsafeMetadata:r,legalAccepted:a}),await this.prepareWeb3WalletVerification({strategy:s});let{message:c}=this.verifications.web3Wallet;c||tA("SignUp");try{t=await i({identifier:n,nonce:c,provider:o})}catch(e){if("coinbase_wallet"===o&&4001===e.code)t=await i({identifier:n,nonce:c,provider:o});else throw e}return this.attemptWeb3WalletVerification({signature:t,strategy:s})};authenticateWithMetamask=async e=>{let t=await ta();return this.authenticateWithWeb3({identifier:t,generateSignature:td,unsafeMetadata:e?.unsafeMetadata,strategy:"web3_metamask_signature",legalAccepted:e?.legalAccepted})};authenticateWithCoinbaseWallet=async e=>{let t=await to();return this.authenticateWithWeb3({identifier:t,generateSignature:th,unsafeMetadata:e?.unsafeMetadata,strategy:"web3_coinbase_wallet_signature",legalAccepted:e?.legalAccepted})};authenticateWithBase=async e=>{let t=await tc();return this.authenticateWithWeb3({identifier:t,generateSignature:tp,unsafeMetadata:e?.unsafeMetadata,strategy:"web3_base_signature",legalAccepted:e?.legalAccepted})};authenticateWithOKXWallet=async e=>{let t=await tl();return this.authenticateWithWeb3({identifier:t,generateSignature:tu,unsafeMetadata:e?.unsafeMetadata,strategy:"web3_okx_wallet_signature",legalAccepted:e?.legalAccepted})};authenticateWithRedirectOrPopup=async(e,t)=>{let{redirectUrl:i,redirectUrlComplete:n,strategy:r,continueSignUp:s=!1,unsafeMetadata:a,emailAddress:o,legalAccepted:l,oidcPrompt:c,enterpriseConnectionId:d}=e,h=n_.clerk.buildUrlWithAuth(i),u=()=>{let e={strategy:r,redirectUrl:h,actionCompleteRedirectUrl:n,unsafeMetadata:a,emailAddress:o,legalAccepted:l,oidcPrompt:c,enterpriseConnectionId:d};return s&&this.id?this.update(e):this.create(e)},{verifications:p}=await u().catch(async e=>{if(R(e)&&["captcha_invalid","captcha_not_enabled","captcha_missing_token"].includes(e.errors[0].code))return await n_.clerk.__unstable__environment.reload(),u();throw e}),{externalAccount:f}=p,{status:m,externalVerificationRedirectURL:_}=f;"unverified"===m&&_?t(_):tP(m,n_.fapiClient.buildEmailAddress("support"))};authenticateWithRedirect=async e=>this.authenticateWithRedirectOrPopup(e,eO);authenticateWithPopup=async e=>{let{popup:t}=e||{};return t||tI("popup"),nc(n_.clerk,"signUp",this.authenticateWithRedirectOrPopup,e,e=>{t.location.href=e instanceof URL?e.toString():e})};update=e=>this._basePatch({body:nm(e)});upsert=e=>this.id?this.update(e):this.create(e);validatePassword=(e,t)=>{if(n_.clerk.__unstable__environment?.userSettings.passwordSettings)return nd({...n_.clerk.__unstable__environment?.userSettings.passwordSettings,validatePassword:!0})(e,t)};fromJSON(e){return e&&(this.id=e.id,this.status=e.status,this.requiredFields=e.required_fields,this.optionalFields=e.optional_fields,this.missingFields=e.missing_fields,this.unverifiedFields=e.unverified_fields,this.verifications=new iL(e.verifications),this.username=e.username,this.firstName=e.first_name,this.lastName=e.last_name,this.emailAddress=e.email_address,this.phoneNumber=e.phone_number,this.hasPassword=e.has_password,this.unsafeMetadata=e.unsafe_metadata,this.createdSessionId=e.created_session_id,this.createdUserId=e.created_user_id,this.abandonAt=e.abandon_at,this.web3wallet=e.web3_wallet,this.legalAcceptedAt=e.legal_accepted_at,this.locale=e.locale),iC.emit("resource:update",{resource:this}),this}__internal_toSnapshot(){return{object:"sign_up",id:this.id||"",status:this.status||null,required_fields:this.requiredFields,optional_fields:this.optionalFields,missing_fields:this.missingFields,unverified_fields:this.unverifiedFields,verifications:this.verifications.__internal_toSnapshot(),username:this.username,first_name:this.firstName,last_name:this.lastName,email_address:this.emailAddress,phone_number:this.phoneNumber,has_password:this.hasPassword,unsafe_metadata:this.unsafeMetadata,created_session_id:this.createdSessionId,created_user_id:this.createdUserId,abandon_at:this.abandonAt,web3_wallet:this.web3wallet,legal_accepted_at:this.legalAcceptedAt,locale:this.locale,external_account:this.externalAccount,external_account_strategy:this.externalAccount?.strategy}}clientBypass(){return n_.clerk.client?.captchaBypass}shouldBypassCaptchaForAttempt(e){if(!e.strategy)return!1;let t=n_.clerk.__unstable__environment.displayConfig.captchaOauthBypass;return!!(t.some(t=>t===e.strategy)||e.transfer&&t.some(e=>e===n_.clerk.client.signIn.firstFactorVerification.strategy))}__experimental_getEnterpriseConnections=()=>tB._fetch({path:`/client/sign_ups/${this.id}/enterprise_connections`,method:"GET"}).then(e=>(e?.response).map(e=>new ny(e)))}class ng{resource;verifications={sendEmailCode:this.sendEmailCode.bind(this),verifyEmailCode:this.verifyEmailCode.bind(this),sendPhoneCode:this.sendPhoneCode.bind(this),verifyPhoneCode:this.verifyPhoneCode.bind(this)};constructor(e){this.resource=e}get id(){return this.resource.id}get requiredFields(){return this.resource.requiredFields}get optionalFields(){return this.resource.optionalFields}get missingFields(){return this.resource.missingFields}get status(){return this.resource.status||"missing_requirements"}get username(){return this.resource.username}get firstName(){return this.resource.firstName}get lastName(){return this.resource.lastName}get emailAddress(){return this.resource.emailAddress}get phoneNumber(){return this.resource.phoneNumber}get web3Wallet(){return this.resource.web3wallet}get hasPassword(){return this.resource.hasPassword}get unsafeMetadata(){return this.resource.unsafeMetadata}get createdSessionId(){return this.resource.createdSessionId}get createdUserId(){return this.resource.createdUserId}get abandonAt(){return this.resource.abandonAt}get legalAcceptedAt(){return this.resource.legalAcceptedAt}get locale(){return this.resource.locale}get unverifiedFields(){return this.resource.unverifiedFields}get isTransferable(){return"transferable"===this.resource.verifications.externalAccount.status&&this.resource.verifications.externalAccount.error?.code==="external_account_exists"}get existingSession(){if(("failed"===this.resource.verifications.externalAccount.status||"unverified"===this.resource.verifications.externalAccount.status)&&this.resource.verifications.externalAccount.error?.code==="identifier_already_signed_in"&&this.resource.verifications.externalAccount.error?.meta?.sessionId)return{sessionId:this.resource.verifications.externalAccount.error?.meta?.sessionId}}async getCaptchaToken(){let e=new tJ(n_.clerk),t=await e.managedOrInvisible({action:"signup"});if(!t)throw Error("Captcha challenge failed");let{captchaError:i,captchaToken:n,captchaWidgetType:r}=t;return{captchaToken:n,captchaWidgetType:r,captchaError:i}}async _create(e){let{captchaToken:t,captchaWidgetType:i,captchaError:n}=await this.getCaptchaToken(),r={transfer:e.transfer,captchaToken:t,captchaWidgetType:i,captchaError:n,...e,unsafeMetadata:e.unsafeMetadata?nm(e.unsafeMetadata):void 0,locale:e.locale??te()};await this.resource.__internal_basePost({path:this.resource.pathRoot,body:r})}async create(e){return nh(this.resource,async()=>{await this._create(e)})}async update(e){return nh(this.resource,async()=>{let t={...e,unsafeMetadata:e.unsafeMetadata?nm(e.unsafeMetadata):void 0};await this.resource.__internal_basePatch({path:this.resource.pathRoot,body:t})})}async password(e){return nh(this.resource,async()=>{let{captchaToken:t,captchaWidgetType:i,captchaError:n}=await this.getCaptchaToken(),r={strategy:"password",captchaToken:t,captchaWidgetType:i,captchaError:n,...e,unsafeMetadata:e.unsafeMetadata?nm(e.unsafeMetadata):void 0};await this.resource.__internal_basePost({path:this.resource.pathRoot,body:r})})}async sendEmailCode(){return nh(this.resource,async()=>{await this.resource.__internal_basePost({body:{strategy:"email_code"},action:"prepare_verification"})})}async verifyEmailCode(e){let{code:t}=e;return nh(this.resource,async()=>{await this.resource.__internal_basePost({body:{strategy:"email_code",code:t},action:"attempt_verification"})})}async sendPhoneCode(e){let{phoneNumber:t,channel:i="sms"}=e;return nh(this.resource,async()=>{if(!this.resource.id){let{captchaToken:e,captchaWidgetType:i,captchaError:n}=await this.getCaptchaToken();await this.resource.__internal_basePost({path:this.resource.pathRoot,body:{phoneNumber:t,captchaToken:e,captchaWidgetType:i,captchaError:n}})}await this.resource.__internal_basePost({body:{strategy:"phone_code",channel:i},action:"prepare_verification"})})}async verifyPhoneCode(e){let{code:t}=e;return nh(this.resource,async()=>{await this.resource.__internal_basePost({body:{strategy:"phone_code",code:t},action:"attempt_verification"})})}async sso(e){let{strategy:t,redirectUrl:i,redirectCallbackUrl:n}=e;return nh(this.resource,async()=>{let{captchaToken:e,captchaWidgetType:r,captchaError:s}=await this.getCaptchaToken(),a=i;try{new URL(i)}catch{a=window.location.origin+i}await this.resource.__internal_basePost({path:this.resource.pathRoot,body:{strategy:t,redirectUrl:n_.clerk.buildUrlWithAuth(n),redirectUrlComplete:a,captchaToken:e,captchaWidgetType:r,captchaError:s}});let{status:o,externalVerificationRedirectURL:l}=this.resource.verifications.externalAccount;"unverified"===o&&l?eO(l):tP(o,n_.fapiClient.buildEmailAddress("support"))})}async web3(e){let{strategy:t,unsafeMetadata:i,legalAccepted:n}=e,r=t.replace("web3_","").replace("_signature","");return nh(this.resource,async()=>{let e,s,a;switch(r){case"metamask":e=await ta(),s=td;break;case"coinbase_wallet":e=await to(),s=th;break;case"base":e=await tc(),s=tp;break;case"okx_wallet":e=await tl(),s=tu;break;default:throw Error(`Unsupported Web3 provider: ${r}`)}let o=e||this.resource.web3wallet;await this._create({web3Wallet:o,unsafeMetadata:i,legalAccepted:n}),await this.resource.__internal_basePost({body:{strategy:t},action:"prepare_verification"});let{message:l}=this.resource.verifications.web3Wallet;l||tA("SignUp");try{a=await s({identifier:e,nonce:l})}catch(t){if("coinbase_wallet"===r&&4001===t.code)a=await s({identifier:e,nonce:l});else throw t}await this.resource.__internal_basePost({body:{signature:a,strategy:t},action:"attempt_verification"})})}async ticket(e){let t=e?.ticket??ez("__clerk_ticket");return this.create({...e,ticket:t??void 0})}async finalize(e){let{navigate:t}=e||{};return nh(this.resource,async()=>{if(!this.resource.createdSessionId)throw Error("Cannot finalize sign-up without a created session.");await n_.clerk.setActive({session:this.resource.createdSessionId,navigate:t})})}}class ny extends tB{id;name;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.name=e.name),this}}class nb extends tB{pathRoot="tokens";jwt;static async create(e,t={}){return new nb(await tB._fetch({path:e,method:"POST",body:t}),e)}constructor(e,t){super(),t&&(this.pathRoot=t),e?.jwt&&(this.jwt=e9(e.jwt))}getRawString=()=>this.jwt?.claims.__raw||"";fromJSON(e){return e&&(this.jwt=e9(e.jwt)),this}__internal_toSnapshot(){return{object:"token",id:this.id||"",jwt:this.getRawString()}}}class nw extends tB{pathRoot="/me";id="";secret;uri;verified=!1;backupCodes;updatedAt=null;createdAt=null;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.secret=e.secret,this.uri=e.uri,this.verified=e.verified,this.backupCodes=e.backup_codes,this.updatedAt=tG(e.updated_at),this.createdAt=tG(e.created_at)),this}}class nv extends tB{pathRoot="/me";id;codes=[];updatedAt=null;createdAt=null;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.codes=e.codes,this.updatedAt=tG(e.updated_at),this.createdAt=tG(e.created_at)),this}}class nS extends tB{pathRoot="/me";id="";externalId=null;username=null;emailAddresses=[];phoneNumbers=[];web3Wallets=[];externalAccounts=[];enterpriseAccounts=[];passkeys=[];samlAccounts=[];organizationMemberships=[];passwordEnabled=!1;firstName=null;lastName=null;fullName=null;primaryEmailAddressId=null;primaryEmailAddress=null;primaryPhoneNumberId=null;primaryPhoneNumber=null;primaryWeb3WalletId=null;primaryWeb3Wallet=null;imageUrl="";hasImage=!1;twoFactorEnabled=!1;totpEnabled=!1;backupCodeEnabled=!1;publicMetadata={};unsafeMetadata={};createOrganizationEnabled=!1;createOrganizationsLimit=null;deleteSelfEnabled=!1;lastSignInAt=null;legalAcceptedAt=null;updatedAt=null;createdAt=null;cachedSessionsWithActivities=null;static isUserResource(e){return!!e&&e instanceof nS}constructor(e){super(),this.fromJSON(e)}path(){return this.pathRoot}isPrimaryIdentification=e=>{switch(e.constructor){case ib:return this.primaryEmailAddressId===e.id;case iq:return this.primaryPhoneNumberId===e.id;case nC:return this.primaryWeb3WalletId===e.id;default:return!1}};createEmailAddress=e=>{let{email:t}=e||{};return new ib({email_address:t},this.path()+"/email_addresses/").create()};createPasskey=()=>ns.registerPasskey();createPhoneNumber=e=>{let{phoneNumber:t}=e||{};return new iq({phone_number:t},this.path()+"/phone_numbers/").create()};createWeb3Wallet=e=>{let{web3Wallet:t}=e||{};return new nC({web3_wallet:t},this.path()+"/web3_wallets/").create()};createExternalAccount=async e=>{let{strategy:t,redirectUrl:i,additionalScopes:n}=e||{};return new ij((await tB._fetch({path:"/me/external_accounts",method:"POST",body:{strategy:t,redirect_url:i,additional_scope:n}}))?.response,this.path()+"/external_accounts")};createTOTP=async()=>new nw((await tB._fetch({path:"/me/totp",method:"POST"}))?.response);verifyTOTP=async({code:e})=>new nw((await tB._fetch({path:"/me/totp/attempt_verification",method:"POST",body:{code:e}}))?.response);disableTOTP=async()=>new iu((await tB._fetch({path:"/me/totp",method:"DELETE"}))?.response);createBackupCode=async()=>new nv((await tB._fetch({path:this.path()+"/backup_codes/",method:"POST"}))?.response);update=e=>this._basePatch({body:nm(e)});updatePassword=e=>this._basePost({body:e,path:`${this.path()}/change_password`});removePassword=e=>this._basePost({body:e,path:`${this.path()}/remove_password`});delete=()=>this._baseDelete({path:"/me"}).then(e=>(iC.emit(iv,null),e));getSessions=async()=>{if(this.cachedSessionsWithActivities)return this.cachedSessionsWithActivities;let e=await no.retrieve();return this.cachedSessionsWithActivities=e,e};setProfileImage=e=>{let{file:t}=e||{};return null===t?iV.delete(`${this.path()}/profile_image`):iV.create(`${this.path()}/profile_image`,{file:t})};getOrganizationInvitations=e=>nk.retrieve(e);getOrganizationSuggestions=e=>i1.retrieve(e);getOrganizationMemberships=e=>i0.retrieve(e);leaveOrganization=async e=>new iu((await tB._fetch({path:`${this.path()}/organization_memberships/${e}`,method:"DELETE"}))?.response);initializePaymentMethod=e=>ir(e);addPaymentMethod=e=>is(e);getPaymentMethods=e=>ia(e);get verifiedExternalAccounts(){return this.externalAccounts.filter(e=>e.verification?.status=="verified")}get unverifiedExternalAccounts(){return this.externalAccounts.filter(e=>e.verification?.status!="verified")}get verifiedWeb3Wallets(){return this.web3Wallets.filter(e=>e.verification?.status=="verified")}get hasVerifiedEmailAddress(){return this.emailAddresses.filter(e=>"verified"===e.verification.status).length>0}get hasVerifiedPhoneNumber(){return this.phoneNumbers.filter(e=>"verified"===e.verification.status).length>0}fromJSON(e){return e&&(this.id=e.id,this.externalId=e.external_id||null,this.firstName=e.first_name||null,this.lastName=e.last_name||null,(this.firstName||this.lastName)&&(this.fullName=(({firstName:e,lastName:t,name:i})=>i||[e,t].join(" ").trim()||"")({firstName:this.firstName,lastName:this.lastName})),this.imageUrl=e.image_url||"",this.hasImage=e.has_image||!1,this.username=e.username||null,this.passwordEnabled=e.password_enabled||!1,this.emailAddresses=(e.email_addresses||[]).map(e=>new ib(e,this.path()+"/email_addresses")),this.primaryEmailAddressId=e.primary_email_address_id||null,this.primaryEmailAddress=this.emailAddresses.find(({id:e})=>e===this.primaryEmailAddressId)||null,this.phoneNumbers=(e.phone_numbers||[]).map(e=>new iq(e,this.path()+"/phone_numbers")),this.primaryPhoneNumberId=e.primary_phone_number_id||null,this.primaryPhoneNumber=this.phoneNumbers.find(({id:e})=>e===this.primaryPhoneNumberId)||null,this.web3Wallets=(e.web3_wallets||[]).map(e=>new nC(e,this.path()+"/web3_wallets")),this.primaryWeb3WalletId=e.primary_web3_wallet_id||null,this.primaryWeb3Wallet=this.web3Wallets.find(({id:e})=>e===this.primaryWeb3WalletId)||null,this.externalAccounts=(e.external_accounts||[]).map(e=>new ij(e,this.path()+"/external_accounts")),this.passkeys=(e.passkeys||[]).map(e=>new ns(e)),this.organizationMemberships=(e.organization_memberships||[]).map(e=>new i0(e)),this.samlAccounts=(e.saml_accounts||[]).map(e=>new i3(e,this.path()+"/saml_accounts")),this.enterpriseAccounts=(e.enterprise_accounts||[]).map(e=>new iJ(e,this.path()+"/enterprise_accounts")),this.publicMetadata=e.public_metadata||{},this.unsafeMetadata=e.unsafe_metadata||{},this.totpEnabled=e.totp_enabled||!1,this.backupCodeEnabled=e.backup_code_enabled||!1,this.twoFactorEnabled=e.two_factor_enabled||!1,this.createOrganizationEnabled=e.create_organization_enabled||!1,this.createOrganizationsLimit=e.create_organizations_limit||null,this.deleteSelfEnabled=e.delete_self_enabled||!1,e.last_sign_in_at&&(this.lastSignInAt=tG(e.last_sign_in_at)),e.legal_accepted_at&&(this.legalAcceptedAt=tG(e.legal_accepted_at)),this.updatedAt=tG(e.updated_at||void 0),this.createdAt=tG(e.created_at||void 0)),this}__internal_toSnapshot(){return{object:"user",id:this.id,external_id:this.externalId,first_name:this.firstName,last_name:this.lastName,username:this.username,public_metadata:this.publicMetadata,unsafe_metadata:this.unsafeMetadata,image_url:this.imageUrl,has_image:this.hasImage,email_addresses:this.emailAddresses.map(e=>e.__internal_toSnapshot()),phone_numbers:this.phoneNumbers.map(e=>e.__internal_toSnapshot()),web3_wallets:this.web3Wallets.map(e=>e.__internal_toSnapshot()),external_accounts:this.externalAccounts.map(e=>e.__internal_toSnapshot()),passkeys:this.passkeys.map(e=>e.__internal_toSnapshot()),organization_memberships:this.organizationMemberships.map(e=>e.__internal_toSnapshot()),saml_accounts:this.samlAccounts.map(e=>e.__internal_toSnapshot()),enterprise_accounts:this.enterpriseAccounts.map(e=>e.__internal_toSnapshot()),totp_enabled:this.totpEnabled,backup_code_enabled:this.backupCodeEnabled,two_factor_enabled:this.twoFactorEnabled,create_organization_enabled:this.createOrganizationEnabled,create_organizations_limit:this.createOrganizationsLimit,delete_self_enabled:this.deleteSelfEnabled,primary_email_address_id:this.primaryEmailAddressId,primary_phone_number_id:this.primaryPhoneNumberId,primary_web3_wallet_id:this.primaryWeb3WalletId,password_enabled:this.passwordEnabled,profile_image_id:this.imageUrl,last_sign_in_at:this.lastSignInAt?.getTime()||null,legal_accepted_at:this.legalAcceptedAt?.getTime()||null,updated_at:this.updatedAt?.getTime()||null,created_at:this.createdAt?.getTime()||null}}}class nk extends tB{id;emailAddress;publicOrganizationData;publicMetadata={};status;role;createdAt;updatedAt;static async retrieve(e){return await tB._fetch({path:"/me/organization_invitations",method:"GET",search:t4(e)}).then(e=>{let{data:t,total_count:i}=e?.response;return{total_count:i,data:t.map(e=>new nk(e))}})}constructor(e){super(),this.fromJSON(e)}accept=async()=>await this._basePost({path:`/me/organization_invitations/${this.id}/accept`});fromJSON(e){return e&&(this.id=e.id,this.emailAddress=e.email_address,this.publicOrganizationData={hasImage:e.public_organization_data.has_image,imageUrl:e.public_organization_data.image_url,name:e.public_organization_data.name,id:e.public_organization_data.id,slug:e.public_organization_data.slug},this.publicMetadata=e.public_metadata,this.role=e.role,this.status=e.status,this.createdAt=tG(e.created_at),this.updatedAt=tG(e.updated_at)),this}}class nC extends tB{id;web3Wallet="";verification;constructor(e,t){super(),this.pathRoot=t,this.fromJSON(e)}create(){return this._basePost({body:{web3_wallet:this.web3Wallet}})}prepareVerification=e=>this._basePost({action:"prepare_verification",body:{...e}});attemptVerification=e=>{let{signature:t}=e;return this._basePost({action:"attempt_verification",body:{signature:t}})};destroy(){return this._baseDelete()}toString(){return this.web3Wallet}fromJSON(e){return e&&(this.id=e.id,this.web3Wallet=e.web3_wallet,this.verification=new iD(e.verification)),this}__internal_toSnapshot(){return{object:"web3_wallet",id:this.id,web3_wallet:this.web3Wallet,verification:this.verification.__internal_toSnapshot()}}}class nA extends tB{pathRoot="/waitlist";id="";updatedAt=null;createdAt=null;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.updatedAt=tG(e.updated_at),this.createdAt=tG(e.created_at)),this}static async join(e){return new nA((await tB._fetch({path:"/waitlist",method:"POST",body:e}))?.response)}}class nU extends tB{pathRoot="/api_keys";id;type;name;subject;scopes;claims;revoked;revocationReason;expired;expiration;createdBy;description;secret;lastUsedAt;createdAt;updatedAt;constructor(e){super(),this.fromJSON(e)}fromJSON(e){return e&&(this.id=e.id,this.type=e.type,this.name=e.name,this.subject=e.subject,this.scopes=e.scopes,this.claims=e.claims,this.revoked=e.revoked,this.revocationReason=e.revocation_reason,this.expired=e.expired,this.expiration=e.expiration?tG(e.expiration):null,this.createdBy=e.created_by,this.description=e.description,this.secret=e.secret,this.lastUsedAt=e.last_used_at?tG(e.last_used_at):null,this.updatedAt=tG(e.updated_at),this.createdAt=tG(e.created_at)),this}__internal_toSnapshot(){return{object:"api_key",id:this.id,type:this.type,name:this.name,subject:this.subject,scopes:this.scopes,claims:this.claims,revoked:this.revoked,revocation_reason:this.revocationReason,expired:this.expired,expiration:this.expiration?this.expiration.getTime():null,created_by:this.createdBy,description:this.description,last_used_at:this.lastUsedAt?this.lastUsedAt.getTime():null,created_at:this.createdAt.getTime(),updated_at:this.updatedAt.getTime()}}}function nI(e,t){var i,n;return e.id!==t.id||e.updatedAt.getTime()<t.updatedAt.getTime()||(i=t,n=e,i.organizationMemberships.length!==n.organizationMemberships.length||i.organizationMemberships[0]?.updatedAt!==n.organizationMemberships[0]?.updatedAt)}function nP(e,t){return!function(e,t){if(!e&&t||e&&!t)return!0;if(!e&&e===t)return!1;if(!e||!t)return!0;try{if(t2.isClientResource(e))return e.id!==t.id||e.updatedAt.getTime()<t.updatedAt.getTime()||e.sessions.length!==t.sessions.length;if(nr.isSessionResource(e)){var i,n;return e.id!==t.id||e.updatedAt.getTime()<t.updatedAt.getTime()||e.lastActiveToken?.jwt?.claims?.__raw!==t.lastActiveToken?.jwt?.claims?.__raw||function(e,t){if(e.lastActiveOrganizationId!==t.lastActiveOrganizationId)return!0;let i=e.user?.organizationMemberships?.find(t=>t.organization.id===e.lastActiveOrganizationId),n=t.user?.organizationMemberships?.find(t=>t.organization.id===e.lastActiveOrganizationId);return i?.permissions?.length!==n?.permissions?.length}(e,t)||(i=e,n=t,!!i.user!=!!n.user||!!i.user&&!!n.user&&nI(i.user,n.user))}if(nS.isUserResource(e))return nI(e,t)}catch{}return!0}(e,t)?e:t}let nO=(e,t)=>{let i={};for(let n in e)i[n]=t(e[n],n);return i},nT=(e,t)=>{let i={};for(let n in e)e[n]&&t(e[n])&&(i[n]=e[n]);return i};class nE{static keys=["signInForceRedirectUrl","signInFallbackRedirectUrl","signUpForceRedirectUrl","signUpFallbackRedirectUrl","afterSignInUrl","afterSignUpUrl","redirectUrl"];static preserved=["redirectUrl"];options;fromOptions;fromProps;fromSearchParams;mode;constructor(e,t={},i={},n){this.options=e,this.fromOptions=this.#I(e||{}),this.fromProps=this.#I(t||{}),this.fromSearchParams=this.#P(i||{}),this.mode=n}getAfterSignInUrl(){return this.#O("signIn")}getAfterSignUpUrl(){return this.#O("signUp")}getPreservedSearchParams(){return this.#T(this.#E())}toSearchParams(){return this.#T(this.#x())}#T(e){return new URLSearchParams(Object.entries(Object.fromEntries(Object.entries(e).map(([e,t])=>[et(e),t]))).reduce((e,[t,i])=>(null!=i&&(e[t]=i),e),{}))}#E(){return Object.fromEntries(Object.entries({...this.fromSearchParams}).filter(([e])=>nE.preserved.includes(e)))}#x(){let e=this.fromSearchParams.signUpForceRedirectUrl||this.fromProps.signUpForceRedirectUrl||this.fromOptions.signUpForceRedirectUrl,t=this.fromSearchParams.signUpFallbackRedirectUrl||this.fromProps.signUpFallbackRedirectUrl||this.fromOptions.signUpFallbackRedirectUrl,i=this.fromSearchParams.signInForceRedirectUrl||this.fromProps.signInForceRedirectUrl||this.fromOptions.signInForceRedirectUrl,n=this.fromSearchParams.signInFallbackRedirectUrl||this.fromProps.signInFallbackRedirectUrl||this.fromOptions.signInFallbackRedirectUrl,r=this.fromSearchParams.afterSignInUrl||this.fromProps.afterSignInUrl||this.fromOptions.afterSignInUrl,s={signUpForceRedirectUrl:e,signUpFallbackRedirectUrl:t,signInFallbackRedirectUrl:n,signInForceRedirectUrl:i,afterSignInUrl:r,afterSignUpUrl:this.fromSearchParams.afterSignUpUrl||this.fromProps.afterSignUpUrl||this.fromOptions.afterSignUpUrl,redirectUrl:this.fromSearchParams.redirectUrl||this.fromProps.redirectUrl||this.fromOptions.redirectUrl};return e&&delete s.signUpFallbackRedirectUrl,i&&delete s.signInFallbackRedirectUrl,s}#O(e){var t,i;let n,r,s=`${e}ForceRedirectUrl`,a=`${e}FallbackRedirectUrl`,o=`after${e[0].toUpperCase()}${e.slice(1)}Url`;(r=this.fromSearchParams[s]||this.fromProps[s]||this.fromOptions[s])&&(n=s),(r||=this.fromSearchParams.redirectUrl)&&(n="redirectUrl"),(r||=this.fromSearchParams[a]||this.fromProps[a]||this.fromOptions[a])&&(n=a);let l=this.fromSearchParams[o]||this.fromProps[o]||this.fromProps.redirectUrl||this.fromOptions[o];return(t=n,(i=r)&&l&&Y(`Clerk: The "${t}" prop ("${i}") has priority over the legacy "${o}" (or "redirectUrl") ("${l}"), which will be completely ignored in this case. "${o}" (or "redirectUrl" prop) should be replaced with the new "fallbackRedirectUrl" or "forceRedirectUrl" props instead. Learn more: https://clerk.com/docs/guides/custom-redirects#redirect-url-props`),(r||=l)||"modal"!==this.mode)?r||"/":window.location.href}#I(e){tm(e);let t={};return nE.keys.forEach(i=>{t[i]=e[i]}),nO(this.#R(this.#M(nT(t,Boolean))),e=>e.toString())}#P(e){tm(e);let t={};return nE.keys.forEach(i=>{e instanceof URLSearchParams?t[i]=e.get(et(i)):t[i]=e[et(i)]}),nO(this.#R(this.#M(nT(t,Boolean))),e=>e.toString())}#M(e){return nO(e,e=>e4(e,window.location.origin))}#R=e=>nT(e,((e,t)=>i=>{let n=i;if("string"==typeof n&&(n=e4(n,t)),!e)return!0;let r=t===n.origin,s=!function(e){if(function(e){if(!function(e){if(!e)return!1;try{return new URL(e),!0}catch{return!1}}(e))return!1;let t=new URL(e).protocol;return eQ.some(e=>e===t)}(e))return!0;for(let t of e6)if(t.test(e.pathname))return!0;return!1}(n)&&(r||e.map(e=>"string"==typeof e?(e=>{try{return eq(e)}catch(t){throw Error(`Invalid pattern: ${e}.
Consult the documentation of glob-to-regexp here: https://www.npmjs.com/package/glob-to-regexp.
${t.message}`)}})(e2(e)):e).some(e=>e.test(e2(n.origin))));return s||Y(`Clerk: Redirect URL ${n} is not on one of the allowedRedirectOrigins, falling back to the default redirect URL.`),s})(this.options?.allowedRedirectOrigins,window.location.origin))}let nx="__clerk_db_jwt";function nR(e,t){let i=new URL(e),n=i.searchParams.get(nx);i.searchParams.delete(nx);let r=n||t;return r&&i.searchParams.set(nx,r),i}let nM=e=>nN(nF(e)),nN=e=>{let t=new URL(e);return t.searchParams.delete(nx),t},nF=e=>{let t=new URL(e);return t.searchParams.delete("__dev_session"),t.hash=decodeURI(t.hash).replace(/__clerk_db_jwt\[(.*)\]/,""),t.href.endsWith("#")&&(t.hash=""),t};function nz(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}var nD=function e(t,i){function n(e,n,r){if("undefined"!=typeof document){"number"==typeof(r=nz({},i,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var a in r)r[a]&&(s+="; "+a,!0!==r[a]&&(s+="="+r[a].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+s}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var i=document.cookie?document.cookie.split("; "):[],n={},r=0;r<i.length;r++){var s=i[r].split("="),a=s.slice(1).join("=");try{var o=decodeURIComponent(s[0]);if(n[o]=t.read(a,o),e===o)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",nz({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,nz({},this.attributes,t))},withConverter:function(t){return e(nz({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function nW(e){return{get:()=>nD.get(e),set(t,i={}){nD.set(e,t,i)},remove(t){nD.remove(e,t)}}}let nL=e=>"https:"===window.location.protocol||"None"===e&&void 0===window.safari&&(void 0!==window.isSecureContext?window.isSecureContext:"localhost"===window.location.hostname);function n$(e,t){let i=function(e){try{return new Date(e||new Date)}catch{return new Date}}(e);return i.setFullYear(i.getFullYear()+t),i}let nj=nW("__clerk_test_etld"),nJ="__client_uat",nK="__session",nB=()=>{let e=ti()?"None":"Lax",t=nL(e);return{sameSite:e,secure:t,partitioned:!1}};async function nV(e){let t;try{t=await q(e)}catch(o){var n;n=`Suffixed cookie failed due to ${o.message} (secure-context: ${window.isSecureContext}, url: ${window.location.href})`,G.has(n)||(console.log(n),G.add(n));let{default:r}=await i.e("199").then(i.t.bind(i,394,23)),{default:s}=await i.e("199").then(i.t.bind(i,7202,23)),a=r(e);t=s.stringify(a).replace(/\+/gi,"-").replace(/\//gi,"_").substring(0,8)}return t}let nq=()=>{let e=ti()?"None":"Lax",t=nL(e);return{sameSite:e,secure:t}};var nH=i(2788),nG=i.n(nH);class nY{lock=(function(e){let t=new(nG());return window.addEventListener("beforeunload",async()=>{await t.releaseLock(e)}),{acquireLockAndRun:async i=>{if("locks"in navigator&&isSecureContext){let t=new AbortController,n=setTimeout(()=>t.abort(),4999);return await navigator.locks.request(e,{signal:t.signal},async()=>(clearTimeout(n),await i())).catch(()=>!1)}if(await t.acquireLock(e,5e3))try{return await i()}finally{await t.releaseLock(e)}}}})("clerk.lock.refreshSessionToken");workerTimers=ig();timerId=null;initiated=!1;startPollingForSessionToken(e){if(this.timerId||this.initiated)return;let t=async()=>{this.initiated=!0,await this.lock.acquireLockAndRun(e),this.timerId=this.workerTimers.setTimeout(t,5e3)};t()}stopPollingForSessionToken(){null!=this.timerId&&(this.workerTimers.clearTimeout(this.timerId),this.timerId=null),this.initiated=!1}}class nQ{clerk;instanceType;clerkEventBus;poller=null;clientUat;sessionCookie;activeCookie;devBrowser;static async create(e,t,i,n){let r=await nV(e.publishableKey),s=new nQ(e,t,r,i,n);return await s.setup(),s}constructor(e,t,i,r,s){this.clerk=e,this.instanceType=r,this.clerkEventBus=s,iC.on(iw,({token:e})=>{this.updateSessionCookie(e&&e.getRawString()),this.setClientUatCookieForDevelopmentInstances()}),iC.on(iv,()=>this.handleSignOut()),this.refreshTokenOnFocus(),this.startPollingForToken(),this.clientUat=(e=>{let t=nW(nJ),i=nW(H(nJ,e));return{set:e=>{let r=n$(Date.now(),1),s=ti()?"None":"Strict",a=nL(s),o=function(e=window.location.hostname,t=nj){if(n)return n;if(["localhost","127.0.0.1","0.0.0.0"].includes(e))return e;let i=e.split(".");if(1===i.length)return e;for(let e=i.length-2;e>=0;e--){let r=i.slice(e).join(".");if(t.set("1",{domain:r}),"1"===t.get())return t.remove({domain:r}),n=r,r;t.remove({domain:r})}}(),l="0";e&&e.updatedAt&&e.signedInSessions.length>0&&(l=Math.floor(e.updatedAt.getTime()/1e3).toString()),i.remove(),t.remove(),i.set(l,{domain:o,expires:r,partitioned:!1,sameSite:s,secure:a}),t.set(l,{domain:o,expires:r,partitioned:!1,sameSite:s,secure:a})},get:()=>parseInt(i.get()||t.get()||"0",10)}})(i),this.sessionCookie=(e=>{let t=nW(nK),i=nW(H(nK,e)),n=()=>{let e=nB();t.remove(e),i.remove(e)};return{set:e=>{let r=n$(Date.now(),1),{sameSite:s,secure:a,partitioned:o}=nB();o&&n(),t.set(e,{expires:r,sameSite:s,secure:a,partitioned:o}),i.set(e,{expires:r,sameSite:s,secure:a,partitioned:o})},remove:n,get:()=>i.get()||t.get()}})(i),this.activeCookie=(()=>{let e=nW("clerk_active_context"),t={secure:nL("None")};return{set:i=>{e.set(i,t)},get:()=>e.get(),remove:()=>e.remove(t)}})(),this.devBrowser=function({cookieSuffix:e,frontendApi:t,fapiClient:i}){let n=(e=>{let t=nW(nx),i=nW(H(nx,e));return{get:()=>i.get()||t.get(),set:e=>{let n=n$(Date.now(),1),{sameSite:r,secure:s}=nq();i.set(e,{expires:n,sameSite:r,secure:s}),t.set(e,{expires:n,sameSite:r,secure:s})},remove:()=>{let e=nq();i.remove(e),t.remove(e)}}})(e);function r(){return n.get()}function s(e){n.set(e)}function a(){n.remove()}return{clear:function(){a()},setup:async function(){if(!eX(t))return;i.onBeforeRequest(e=>{let t=r();t&&e?.url&&(e.url=nR(e.url,t))}),i.onAfterResponse((e,t)=>{let i=t?.headers?.get("Clerk-Db-Jwt");i&&s(i)});let e=function(e){let t=e.searchParams.get(nx)||"";return nM(e).href!==e.href&&void 0!==globalThis.history&&globalThis.history.replaceState(null,"",nM(e)),t}(new URL(window.location.href));if(e)return void s(e);if(n.get())return;let a=i.buildUrl({path:"/dev_browser"}),o=await fetch(a.toString(),{method:"POST"});if(!o.ok){let e=function(e=[]){return e.length>0?e.map(e=>new w(e)):[]}((await o.json()).errors);e[0]?tv(e[0].longMessage):tv()}let l=await o.json();s(l?.id)},getDevBrowserJWT:r,setDevBrowserJWT:s,removeDevBrowserJWT:a}}({frontendApi:e.frontendApi,fapiClient:t,cookieSuffix:i})}async setup(){return"production"===this.instanceType?this.setupProduction():this.setupDevelopment()}isSignedOut(){return this.clerk.loaded?!!this.clerk.user:0>=this.clientUat.get()}async handleUnauthenticatedDevBrowser(){this.devBrowser.clear(),await this.devBrowser.setup()}decorateUrlWithDevBrowserToken(e){let t=this.devBrowser.getDevBrowserJWT();if(!t)throw Error(`${tw} Missing dev browser jwt. Please contact support.`);return nR(e,t)}async setupDevelopment(){await this.devBrowser.setup()}setupProduction(){this.devBrowser.clear()}startPollingForToken(){this.poller||(this.poller=new nY,this.poller.startPollingForSessionToken(()=>this.refreshSessionToken()))}stopPollingForToken(){this.poller&&(this.poller.stopPollingForSessionToken(),this.poller=null)}refreshTokenOnFocus(){window.addEventListener("focus",()=>{"visible"===document.visibilityState&&this.refreshSessionToken({updateCookieImmediately:!0})})}async refreshSessionToken({updateCookieImmediately:e=!1}={}){if(this.clerk.session)try{let t=await this.clerk.session.getToken();e&&this.updateSessionCookie(t)}catch(e){return this.handleGetTokenError(e)}}updateSessionCookie(e){if(document.hasFocus()||this.isCurrentContextActive())return e||d()||eU.warn("Removing session cookie (offline)",{sessionId:this.clerk.session?.id},"authCookieService"),this.setActiveContextInStorage(),e?this.sessionCookie.set(e):this.sessionCookie.remove()}setClientUatCookieForDevelopmentInstances(){"production"!==this.instanceType&&this.inCustomDevelopmentDomain()&&this.clientUat.set(this.clerk.client)}inCustomDevelopmentDomain(){let e=this.clerk.frontendApi.replace("clerk.","");return!window.location.host.endsWith(e)}handleGetTokenError(e){if(R(e)||M(e)||(`${e.message}${e.name}`||"").toLowerCase().replace(/\s+/g,"").includes("networkerror")){if(E(e))return void this.clerk.handleUnauthenticated().catch(eb);this.clerkEventBus.emit(m,"degraded")}}handleSignOut(){this.activeCookie.remove(),this.sessionCookie.remove(),this.setClientUatCookieForDevelopmentInstances()}setActiveContextInStorage(){let e=this.clerk.session?.id||"",t=this.clerk.organization?.id||"",i=`${e}:${t}`;":"!==i?this.activeCookie.set(i):this.activeCookie.remove()}isCurrentContextActive(){let e=this.activeCookie.get();if(!e)return!0;let[t,i]=e.split(":"),n=this.clerk.session?.id||"",r=this.clerk.organization?.id||"";return t===n&&i===r}getSessionCookie(){return this.sessionCookie.get()}}class nX{clerk;captchaChallenge;timers;constructor(e,t=new tJ(e),i=ig()){this.clerk=e,this.captchaChallenge=t,this.timers=i}async start(){this.isEnabled()&&(await this.challengeAndSend(),this.timers.setInterval(()=>{this.challengeAndSend()},this.intervalInMs()))}async challengeAndSend(){if(!(!this.clerk.client||this.clientBypass()))try{let e=await this.captchaChallenge.invisible({action:"heartbeat"});await this.clerk.client.__internal_sendCaptchaToken(e)}catch{}}isEnabled(){return!!this.clerk.__unstable__environment?.displayConfig?.captchaHeartbeat}clientBypass(){return this.clerk.client?.captchaBypass}intervalInMs(){return this.clerk.__unstable__environment?.displayConfig?.captchaHeartbeatIntervalMs??6e5}}let nZ=["/client","/waitlist"];class n0{async getBaseFapiProxyOptions(){let e=await tB.clerk.session?.getToken();if(!e)throw new P("No valid session token available",{code:"no_session_token"});return{pathPrefix:"",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"same-origin"}}async getAll(e){return tB._fetch({...await this.getBaseFapiProxyOptions(),method:"GET",path:"/api_keys",search:t4({...e,subject:e?.subject??tB.clerk.organization?.id??tB.clerk.user?.id??"",query:e?.query??""})}).then(e=>{let{data:t,total_count:i}=e;return{total_count:i,data:t.map(e=>new nU(e))}})}async create(e){return new nU(await tB._fetch({...await this.getBaseFapiProxyOptions(),path:"/api_keys",method:"POST",body:JSON.stringify({type:e.type??"api_key",name:e.name,subject:e.subject??tB.clerk.organization?.id??tB.clerk.user?.id??"",description:e.description,seconds_until_expiration:e.secondsUntilExpiration})}))}async revoke(e){return new nU(await tB._fetch({...await this.getBaseFapiProxyOptions(),method:"POST",path:`/api_keys/${e.apiKeyID}/revoke`,body:JSON.stringify({revocation_reason:e.revocationReason})}))}}let n1=(()=>{let e=new Map;return{cache:e,listeners:new Map,pendingOperations:new Map,safeGet:(e,t)=>(t.has(e)||t.set(e,new Set),t.get(e)),safeGetOperations(e){return this.pendingOperations.has(e)||this.pendingOperations.set(e,new Map),this.pendingOperations.get(e)}}})(),n3="completed";function n2(e){let t=e.isStarting||e.isConfirming?"fetching":e.error?"error":"idle",i=e.checkout?.status===n3?n3:e.checkout?"needs_confirmation":"needs_initialization";return{...e,fetchStatus:t,status:i}}let n4=Object.freeze(n2({isStarting:!1,isConfirming:!1,error:null,checkout:null})),n6={"choose-organization":"choose-organization"},n5=e=>`/tasks/${n6[e.key]}`;function n7(e,{navigate:t,baseUrl:i}){let n=e.currentTask;if(n)return t(function(e,t){let i=eW();return e1({base:t.base,hashPath:n5(e),searchParams:i},{stringify:!0})}(n,{base:i}))}(y=b||(b={}))[y.None=0]="None",y[y.Mutable=1]="Mutable",y[y.Watching=2]="Watching",y[y.RecursedCheck=4]="RecursedCheck",y[y.Recursed=8]="Recursed",y[y.Dirty=16]="Dirty",y[y.Pending=32]="Pending";let n8=[],{link:n9,unlink:re,propagate:rt,checkDirty:ri,endTracking:rn,startTracking:rr,shallowPropagate:rs}=function({update:e,notify:t,unwatched:i}){let n=0;return{link:function(e,t){let i,r=t.depsTail;if(void 0!==r&&r.dep===e)return;if(4&t.flags&&void 0!==(i=void 0!==r?r.nextDep:t.deps)&&i.dep===e){i.version=n,t.depsTail=i;return}let s=e.subsTail;if(void 0!==s&&s.version===n&&s.sub===t)return;let a=t.depsTail=e.subsTail={version:n,dep:e,sub:t,prevDep:r,nextDep:i,prevSub:s,nextSub:void 0};void 0!==i&&(i.prevDep=a),void 0!==r?r.nextDep=a:t.deps=a,void 0!==s?s.nextSub=a:e.subs=a},unlink:r,propagate:function(e){let i,n=e.nextSub;e:for(;;){let r=e.sub,s=r.flags;if(3&s&&(60&s?12&s?4&s?!(48&s)&&function(e,t){let i=t.depsTail;if(void 0!==i){let n=t.deps;do{if(n===e)return!0;if(n===i)break;n=n.nextDep}while(void 0!==n)}return!1}(e,r)?(r.flags=40|s,s&=1):s=0:r.flags=-9&s|32:s=0:r.flags=32|s,2&s&&t(r),1&s)){let t=r.subs;if(void 0!==t){e=t,void 0!==t.nextSub&&(i={value:n,prev:i},n=e.nextSub);continue}}if(void 0!==(e=n)){n=e.nextSub;continue}for(;void 0!==i;)if(e=i.value,i=i.prev,void 0!==e){n=e.nextSub;continue e}break}},checkDirty:function(t,i){let n,r=0;e:for(;;){let a=t.dep,o=a.flags,l=!1;if(16&i.flags)l=!0;else if((17&o)==17){if(e(a)){let e=a.subs;void 0!==e.nextSub&&s(e),l=!0}}else if((33&o)==33){(void 0!==t.nextSub||void 0!==t.prevSub)&&(n={value:t,prev:n}),t=a.deps,i=a,++r;continue}if(!l&&void 0!==t.nextDep){t=t.nextDep;continue}for(;r;){--r;let a=i.subs,o=void 0!==a.nextSub;if(o?(t=n.value,n=n.prev):t=a,l){if(e(i)){o&&s(a),i=t.sub;continue}}else i.flags&=-33;if(i=t.sub,void 0!==t.nextDep){t=t.nextDep;continue e}l=!1}return l}},endTracking:function(e){let t=e.depsTail,i=void 0!==t?t.nextDep:e.deps;for(;void 0!==i;)i=r(i,e);e.flags&=-5},startTracking:function(e){++n,e.depsTail=void 0,e.flags=-57&e.flags|4},shallowPropagate:s};function r(e,t=e.sub){let n=e.dep,s=e.prevDep,a=e.nextDep,o=e.nextSub,l=e.prevSub;return void 0!==a?a.prevDep=s:t.depsTail=s,void 0!==s?s.nextDep=a:t.deps=a,void 0!==o?o.prevSub=l:n.subsTail=l,void 0!==l?l.nextSub=o:void 0===(n.subs=o)&&i(n),a}function s(e){do{let i=e.sub,n=e.nextSub,r=i.flags;(48&r)==32&&(i.flags=16|r,2&r&&t(i)),e=n}while(void 0!==e)}}({update:e=>"getter"in e?ru(e):rp(e,e.value),notify:function e(t){let i=t.flags;if(!(64&i)){t.flags=64|i;let n=t.subs;void 0!==n?e(n.sub):n8[ro++]=t}},unwatched(e){if("getter"in e){let t=e.deps;if(void 0!==t){e.flags=17;do t=re(t,e);while(void 0!==t)}}else"previousValue"in e||r_.call(e)}}),ra=0,ro=0;function rl(e){let t=r;return r=e,t}function rc(e){return rm.bind({previousValue:e,value:e,subs:void 0,subsTail:void 0,flags:1})}function rd(e){return rf.bind({value:void 0,subs:void 0,subsTail:void 0,deps:void 0,depsTail:void 0,flags:17,getter:e})}function rh(e){let t={fn:e,subs:void 0,subsTail:void 0,deps:void 0,depsTail:void 0,flags:2};void 0!==r?n9(t,r):void 0!==s&&n9(t,s);let i=rl(t);try{t.fn()}finally{rl(i)}return r_.bind(t)}function ru(e){let t=rl(e);rr(e);try{let t=e.value;return t!==(e.value=e.getter(t))}finally{rl(t),rn(e)}}function rp(e,t){return e.flags=1,e.previousValue!==(e.previousValue=t)}function rf(){let e=this.flags;if(16&e||32&e&&ri(this.deps,this)){if(ru(this)){let e=this.subs;void 0!==e&&rs(e)}}else 32&e&&(this.flags=-33&e);return void 0!==r?n9(this,r):void 0!==s&&n9(this,s),this.value}function rm(...e){if(e.length){let t=e[0];if(this.value!==(this.value=t)){this.flags=17;let e=this.subs;void 0!==e&&(rt(e),function(){for(;ra<ro;){let e=n8[ra];n8[ra++]=void 0,function e(t,i){if(16&i||32&i&&ri(t.deps,t)){let e=rl(t);rr(t);try{t.fn()}finally{rl(e),rn(t)}return}32&i&&(t.flags=-33&i);let n=t.deps;for(;void 0!==n;){let t=n.dep,i=t.flags;64&i&&e(t,t.flags=-65&i),n=n.nextDep}}(e,e.flags&=-65)}ra=0,ro=0}())}}else{let e=this.value;if(16&this.flags&&rp(this,e)){let e=this.subs;void 0!==e&&rs(e)}return void 0!==r&&n9(this,r),e}}function r_(){let e=this.deps;for(;void 0!==e;)e=re(e,this);let t=this.subs;void 0!==t&&re(t),this.flags=0}let rg=rc({resource:null}),ry=rc({error:null}),rb=rc({status:"idle"}),rw=rd(()=>{let e=rg().resource,t=ry().error,i=rb().status;return{errors:rA(t),fetchStatus:i,signIn:e?e.__internal_future:null}}),rv=rc({resource:null}),rS=rc({error:null}),rk=rc({status:"idle"}),rC=rd(()=>{let e=rv().resource,t=rS().error,i=rk().status;return{errors:rA(t),fetchStatus:i,signUp:e?e.__internal_future:null}});function rA(e){let t={fields:{firstName:null,lastName:null,emailAddress:null,identifier:null,phoneNumber:null,password:null,username:null,code:null,captcha:null,legalAccepted:null},raw:null,global:null};return e&&(R(e)?e.errors.some(e=>"meta"in e&&e.meta&&"paramName"in e.meta)?e.errors.forEach(e=>{if(t.raw?t.raw.push(e):t.raw=[e],"meta"in e&&e.meta&&"paramName"in e.meta){let i=ee(e.meta.paramName);t.fields[i]=e}}):(t.raw=[e],t.global=[D(e)]):(t.raw=[e],t.global=[D(e)])),t}class rU{signInResourceSignal=rg;signInErrorSignal=ry;signInFetchSignal=rb;signInSignal=rw;signUpResourceSignal=rv;signUpErrorSignal=rS;signUpFetchSignal=rk;signUpSignal=rC;__internal_effect=rh;__internal_computed=rd;constructor(){iC.on("resource:update",this.onResourceUpdated),iC.on("resource:error",this.onResourceError),iC.on("resource:fetch",this.onResourceFetch)}onResourceError=e=>{e.resource instanceof nu&&this.signInErrorSignal({error:e.error}),e.resource instanceof n_&&this.signUpErrorSignal({error:e.error})};onResourceUpdated=e=>{e.resource instanceof nu&&this.signInResourceSignal({resource:e.resource}),e.resource instanceof n_&&this.signUpResourceSignal({resource:e.resource})};onResourceFetch=e=>{e.resource instanceof nu&&this.signInFetchSignal({status:e.status}),e.resource instanceof n_&&this.signUpFetchSignal({status:e.status})}}let rI=e=>`\u{1F512} Clerk:
${e.trim()}
(This notice only appears in development)`,rP={cannotRenderComponentWhenSessionExists:"The <SignUp/> and <SignIn/> components cannot render when a user is already signed in, unless the application allows multiple sessions. Since a user is signed in and this application only allows a single session, Clerk is redirecting to the Home URL instead.",cannotRenderSignUpComponentWhenSessionExists:"The <SignUp/> component cannot render when a user is already signed in, unless the application allows multiple sessions. Since a user is signed in and this application only allows a single session, Clerk is redirecting to the value set in `afterSignUp` URL instead.",cannotRenderSignUpComponentWhenTaskExists:"The <SignUp/> component cannot render when a user has a pending task, unless the application allows multiple sessions. Since a user is signed in and this application only allows a single session, Clerk is redirecting to the task instead.",cannotRenderComponentWhenTaskDoesNotExist:"<TaskChooseOrganization/> cannot render unless a session task is pending. Clerk is redirecting to the value set in `redirectUrlComplete` instead.",cannotRenderSignInComponentWhenSessionExists:"The <SignIn/> component cannot render when a user is already signed in, unless the application allows multiple sessions. Since a user is signed in and this application only allows a single session, Clerk is redirecting to the `afterSignIn` URL instead.",cannotRenderSignInComponentWhenTaskExists:"The <SignIn/> component cannot render when a user has a pending task, unless the application allows multiple sessions. Since a user is signed in and this application only allows a single session, Clerk is redirecting to the task instead.",cannotRenderComponentWhenUserDoesNotExist:"<UserProfile/> cannot render unless a user is signed in. Since no user is signed in, this is no-op.",cannotRenderComponentWhenOrgDoesNotExist:"<OrganizationProfile/> cannot render unless an organization is active. Since no organization is currently active, this is no-op.",cannotRenderAnyOrganizationComponent:e=>rI(`The <${e}/> cannot be rendered when the feature is turned off. Visit 'dashboard.clerk.com' to enable the feature. Since the feature is turned off, this is no-op.`),cannotRenderAnyBillingComponent:e=>rI(`The <${e}/> component cannot be rendered when billing is disabled. Visit 'https://dashboard.clerk.com/last-active?path=billing/settings' to follow the necessary steps to enable billing. Since billing is disabled, this is no-op.`),cannotOpenUserProfile:"The UserProfile modal cannot render unless a user is signed in. Since no user is signed in, this is no-op.",cannotOpenCheckout:"The Checkout drawer cannot render unless a user is signed in. Since no user is signed in, this is no-op.",cannotOpenSignInOrSignUp:"The SignIn or SignUp modals do not render when a user is already signed in, unless the application allows multiple sessions. Since a user is signed in and this application only allows a single session, this is no-op.",cannotRenderAPIKeysComponent:"The <APIKeys/> component cannot be rendered when API keys are disabled. Since API keys are disabled, this is no-op.",cannotRenderAPIKeysComponentForUserWhenDisabled:"The <APIKeys/> component cannot be rendered when user API keys are disabled. Since user API keys are disabled, this is no-op.",cannotRenderAPIKeysComponentForOrgWhenDisabled:"The <APIKeys/> component cannot be rendered when organization API keys are disabled. Since organization API keys are disabled, this is no-op."};for(let e of Object.keys(rP)){let t=rP[e];"function"!=typeof t&&(rP[e]=rI(t))}let rO="cannot_render_billing_disabled",rT="cannot_render_user_missing",rE="cannot_render_organizations_disabled",rx="cannot_render_organization_missing",rR="cannot_render_single_session_enabled",rM={polling:!0,standardBrowser:!0,touchSession:!0,isSatellite:!1,signInUrl:void 0,signUpUrl:void 0,afterSignOutUrl:void 0,signInFallbackRedirectUrl:void 0,signUpFallbackRedirectUrl:void 0,signInForceRedirectUrl:void 0,signUpForceRedirectUrl:void 0,newSubscriptionRedirectUrl:void 0};class rN{static mountComponentRenderer;static version="5.107.0";static sdkMetadata={name:"@clerk/clerk-js",version:"5.107.0"};static _billing;static _apiKeys;_checkout;client;session;organization;user;__internal_country;telemetry;__internal_state=new rU;internal_last_error=null;environment;#N;#F="";#z;#D;#W;#L;#$=null;#j;#J;#K;#B="loading";#V=[];#q=[];#H={};#G=null;#Y=0;#Q=f();get __internal_queryClient(){return this.#N||i.e("437").then(i.bind(i,1522)).then(e=>e.QueryClient).then(e=>{this.#N||(this.#N=new e,this.#Q.emit("queryClientStatus","ready"))}),this.#N?{__tag:"clerk-rq-client",client:this.#N}:void 0}__internal_getCachedResources;__internal_createPublicCredentials;__internal_getPublicCredentials;__internal_isWebAuthnSupported;__internal_isWebAuthnAutofillSupported;__internal_isWebAuthnPlatformAuthenticatorSupported;__internal_setActiveInProgress=!1;get publishableKey(){return this.#F}get version(){return rN.version}set sdkMetadata(e){rN.sdkMetadata=e}get sdkMetadata(){return rN.sdkMetadata}get loaded(){return"degraded"===this.status||"ready"===this.status}get status(){return this.#B}get isSatellite(){return!!tt()&&ey(this.#H.isSatellite,new URL(window.location.href),!1)}get domain(){if(tt()){let e=function(e=""){return(e||"").replace(/^.+:\/\//,"")}(ey(this.#z,new URL(window.location.href)));if("production"===this.#K){let t;if(!e)return"";if(e.match(/^(clerk\.)+\w*$/))t=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;t=/^(clerk\.)*/gi}let i=e.replace(t,"");return`clerk.${i}`}return e}return""}get proxyUrl(){if(tt()){let e=ey(this.#D,new URL(window.location.href));return!e||X(e)||Z(e)||eV.throwInvalidProxyUrl({url:e}),e?Z(e)?new URL(e,window.location.origin).toString():e:""}return""}get frontendApi(){let e=B(this.publishableKey);return e?e.frontendApi:eV.throwInvalidPublishableKeyError({key:this.publishableKey})}get instanceType(){return this.#K}get isStandardBrowser(){return this.#H.standardBrowser||!1}get billing(){return rN._billing||(rN._billing=new t6),rN._billing}get apiKeys(){return rN._apiKeys||(rN._apiKeys=new n0),rN._apiKeys}__experimental_checkout(e){return this._checkout||(this._checkout=e=>(function(e,t){let{for:i,planId:n,planPeriod:r}=t;if(!e.isSignedIn||!e.user)throw Error("Clerk: User is not authenticated");if("organization"===i&&!e.organization)throw Error("Clerk: Use `setActive` to set the organization");let s=function(e){let t=n1.safeGet(e,n1.listeners),i=n1.safeGetOperations(e),n=()=>n1.cache.get(e)||n4,r=i=>{let r=n2({...n(),...i});n1.cache.set(e,Object.freeze(r)),t.forEach(e=>e(n()))};return{subscribe:e=>(t.add(e),()=>{t.delete(e)}),getCacheState:n,async executeOperation(t,n){let s=`${e}-${t}`,a="start"===t?"isStarting":"isConfirming",o=i.get(s);if(o)return await o;let l=(async()=>{let e=null,o=null;try{r({[a]:!0,error:null,..."start"===t?{checkout:null}:{}});let i=await n();r({[a]:!1,error:null,checkout:i}),e=i}catch(e){o=e,r({[a]:!1,error:e})}finally{i.delete(s)}return{data:e,error:o}})();return i.set(s,l),l},clearCheckout(){0===i.size&&r(n4)}}}(function(e){let{userId:t,orgId:i,planId:n,planPeriod:r}=e;return`${t}-${i||"user"}-${n}-${r}`}({userId:e.user.id,orgId:"organization"===i?e.organization?.id:void 0,planId:n,planPeriod:r}));return{start:async()=>s.executeOperation("start",async()=>await e.billing?.startCheckout({..."organization"===i?{orgId:e.organization?.id}:{},planId:n,planPeriod:r})),confirm:async e=>s.executeOperation("confirm",async()=>{let t=s.getCacheState().checkout;if(!t)throw Error("Clerk: Call `start` before `confirm`");return t.confirm(e)}),finalize:t=>{let{navigate:i}=t||{};return e.setActive({session:e.session?.id,navigate:i})},clear:()=>s.clearCheckout(),subscribe:e=>s.subscribe(e),getState:s.getCacheState}})(this,e)),this._checkout(e)}__internal_getOption(e){return this.#H[e]}get isSignedIn(){return this?.session?.status!=="pending"&&!!this.session}constructor(e,t){if(!(e=(e||"").trim()))return eV.throwMissingPublishableKeyError();let i=B(e);if(!i)return eV.throwInvalidPublishableKeyError({key:e});this.#z=t?.domain,this.#D=t?.proxyUrl,this.environment=iI.getInstance(),this.#K=i.instanceType,this.#F=e,this.#J=function(e){let t=[],i=[];async function n(e){for await(let i of["undefined"!=typeof window&&window.__unstable__onBeforeRequest,...t].filter(e=>e))if(await i(e)===!1)return!1;return!0}async function r(e,t){for await(let n of["undefined"!=typeof window&&window.__unstable__onAfterResponse,...i].filter(e=>e))if(await n(e,t)===!1)return!1;return!0}function s({method:t,path:i,sessionId:n,search:r,rotatingTokenNonce:s}){let a=new URLSearchParams(r);return a.append("__clerk_api_version","2025-11-10"),a.append("_clerk_js_version","5.107.0"),s&&a.append("rotating_token_nonce",s),e.domain&&"development"===e.instanceType&&e.isSatellite&&a.append("__domain",e.domain),t&&"GET"!==t&&"POST"!==t&&a.append("_method",t),i&&!nZ.some(e=>i.startsWith(e))&&n&&a.append("_clerk_session_id",n),eG([...a.entries()].reduce((e,[t,i])=>(e[t]=i.includes(",")?i.split(","):i,e),{}))}function a(t){let{path:i,pathPrefix:n="v1"}=t;if(e.proxyUrl){let r=new URL(e.proxyUrl),a=r.pathname.slice(1);return a.endsWith("/")&&(a=a.slice(0,-1)),e1({base:r.origin,pathname:`${a}/${n}${i}`,search:s(t)},{stringify:!1})}let r="production"===e.instanceType?e.domain:"";return e1({base:`https://${r||e.frontendApi}`,pathname:`${n}${i}`,search:s(t)},{stringify:!1})}async function o(t,i){let s,o={...t},{method:l="GET",body:d}=o;!d||"object"!=typeof d||d instanceof FormData||(o.body=function(e){if(!e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype)return e;let t={};for(let[i,n]of Object.entries(e))void 0!==n&&(t[i]=n);return t}(d)),o.url=a({...o,sessionId:e.getSessionId()}),o.headers=new Headers(o.headers),"GET"===l||d instanceof FormData||o.headers.has("content-type")||o.headers.set("content-type","application/x-www-form-urlencoded"),"application/x-www-form-urlencoded"===o.headers.get("content-type")&&(o.body=d?eG(d,{keyEncoder:et}):d);let h=await n(o),u="GET"===l?"GET":"POST",p=o.url,f={...o,method:u,credentials:o.credentials||"include"};try{if(h){let e=i?.fetchMaxTries??(c()?4:11);s=await tR(()=>fetch(p,f),{retryImmediately:!0,initialDelay:700,maxDelayBetweenRetries:5e3,shouldRetry:(t,i)=>"GET"===u&&i<e,onBeforeRetry:e=>{p.searchParams.set("_clerk_retry_attempt",e.toString())}})}else s=new Response("{}",o)}catch(t){let e=p.toString();eU.error("network error",{error:t,url:e,method:l},"fapiClient");throw Error(`${tw} Network error at "${e}" - ${t}. Please try again.`)}let m=204!==s.status?await s.json():null,_=Object.assign(s,{payload:m});return s.ok||eU.error("request failed",{method:l,path:o.path,status:s.status},"fapiClient"),await r(o,_),_}return{buildEmailAddress:function(t){return function({localPart:e,frontendApi:t}){let i=t?t.replace("clerk.",""):"clerk.com";return`${e}@${i}`}({localPart:t,frontendApi:e.frontendApi})},buildUrl:a,onAfterResponse:function(e){i.push(e)},onBeforeRequest:function(e){t.push(e)},request:o}}({domain:this.domain,frontendApi:this.frontendApi,instanceType:this.instanceType,isSatellite:this.isSatellite,getSessionId:()=>this.session?.id,proxyUrl:this.proxyUrl}),this.#Q.emit(m,"loading"),this.#Q.prioritizedOn(m,e=>this.#B=e),tB.clerk=this}getFapiClient=()=>this.#J;load=async e=>{if(eU.info("load() start",{},"clerk"),!this.loaded){if("development"===this.#K&&Y("Clerk: Clerk has been loaded with development keys. Development instances have strict usage limits and should not be used when deploying your application to production. Learn more: https://clerk.com/docs/deployments/overview"),this.#H=this.#X(e),"development"===this.#K&&(this.#H.routerPush||this.#H.routerReplace)&&(!this.#H.routerPush||!this.#H.routerReplace)){let e=this.#H.routerPush?"routerReplace":"routerPush";Y(`Clerk: Both \`routerPush\` and \`routerReplace\` need to be defined, but \`${e}\` is not defined. This may cause issues with navigation in your application.`)}iC.on(ik,()=>{this.#Z(this.session),this.#ee()}),tm(this.#H),this.#H.sdkMetadata&&(rN.sdkMetadata=this.#H.sdkMetadata),!1!==this.#H.telemetry&&(this.telemetry=new ed({clerkVersion:rN.version,samplingRate:1,perEventSampling:!this.#H.__internal_keyless_claimKeylessApplicationUrl&&void 0,publishableKey:this.publishableKey,...this.#H.telemetry}),this.#H.appearance&&this.telemetry.record({event:"THEME_USAGE",eventSamplingRate:1,payload:function(e){let t;if(!e||"object"!=typeof e)return{};let i=e.theme||e.baseTheme;if(!i)return{};if(Array.isArray(i))for(let e of i){let i=e_(e);if(i){t=i;break}}else t=e_(i);return{themeName:t}}(this.#H.appearance)}));try{this.#H.standardBrowser?await this.#et():await this.#ei();let e=this.#H.telemetry,t=!1!==e&&!e?.disabled,i=!!this.#H.__internal_keyless_claimKeylessApplicationUrl,n=!!this.environment?.clientDebugMode,r=this.environment?.isProduction?.()??!1,s=n||i&&!r,a=i&&!n?"error":void 0;s&&function(e={}){if(eS)return;let{enabled:t=!1,...i}=e;t&&(ew=!0,eS=!0,eA(i))}({enabled:!0,...a?{logLevel:a}:{},...t&&this.telemetry?{telemetryCollector:this.telemetry}:{}}),eU.info("load() complete",{},"clerk")}catch(e){throw this.#Q.emit(m,"error"),eU.error("load() failed",{error:e},"clerk"),e}}};#en(){let e;return!!(!this.#H.signUpUrl&&this.#H.signInUrl&&(e=this.#H.signInUrl,!eg.test(e)))}signOut=async(e,t)=>{if(!this.client||0===this.client.sessions.length)return;let i="undefined"!=typeof window&&"function"==typeof window.__unstable__onBeforeSetActive?window.__unstable__onBeforeSetActive:eb,n="undefined"!=typeof window&&"function"==typeof window.__unstable__onAfterSetActive?window.__unstable__onAfterSetActive:eb,r=e&&"object"==typeof e?e:t||{},s=r?.redirectUrl||this.buildAfterSignOutUrl();eU.debug("signOut() start",{hasClient:!!this.client,multiSessionCount:this.client?.signedInSessions.length??0,redirectUrl:s,sessionTarget:r?.sessionId??null},"clerk");let a="function"==typeof e?e:void 0,o=async()=>{let e=eT(this.#H.standardBrowser);iC.emit(iv,null),this.#er(),await e.track(async()=>{a?await a():await this.navigate(s)}),e.isUnloading()||(this.#Z(),this.#ee(),await n())};if(await i(),!r.sessionId||1===this.client.signedInSessions.length){this.#H.experimental?.persistClient??!0?await this.client.removeSessions():await this.client.destroy(),await o(),eU.info("signOut() complete",{redirectUrl:e3(s)},"clerk");return}let l=this.client.signedInSessions.find(e=>e.id===r.sessionId),c=l?.id&&this.session?.id===l.id;await l?.remove(),c&&(await o(),eU.info("signOut() complete",{redirectUrl:e3(s)},"clerk"))};openGoogleOneTap=e=>{let t="GoogleOneTap";this.assertComponentsReady(this.#j),this.#j.ensureMounted({preloadHint:t}).then(t=>t.openModal("googleOneTap",e||{})),this.telemetry?.record(em(t,e))};closeGoogleOneTap=()=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(e=>e.closeModal("googleOneTap"))};openSignIn=e=>{if(this.assertComponentsReady(this.#j),eL(this,this.environment)){if("development"===this.#K)throw new P(rP.cannotOpenSignInOrSignUp,{code:rR});return}let t="SignIn";this.#j.ensureMounted({preloadHint:t}).then(t=>t.openModal("signIn",e||{}));let i={withSignUp:e?.withSignUp??this.#en()};this.telemetry?.record(em(t,e,i))};closeSignIn=()=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(e=>e.closeModal("signIn"))};__internal_openCheckout=e=>{if(this.assertComponentsReady(this.#j),ej(this,this.environment)){if("development"===this.#K)throw new P(rP.cannotRenderAnyBillingComponent("Checkout"),{code:rO});return}if(!this.user){if("development"===this.#K)throw new P(rP.cannotOpenCheckout,{code:rT});return}this.#j.ensureMounted({preloadHint:"Checkout"}).then(t=>t.openDrawer("checkout",e||{}))};__internal_closeCheckout=()=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(e=>e.closeDrawer("checkout"))};__internal_openPlanDetails=e=>{if(this.assertComponentsReady(this.#j),ej(this,this.environment)){if("development"===this.#K)throw new P(rP.cannotRenderAnyBillingComponent("PlanDetails"),{code:rO});return}let t="PlanDetails";this.#j.ensureMounted({preloadHint:t}).then(t=>t.openDrawer("planDetails",e||{})),this.telemetry?.record(em(t,e))};__internal_closePlanDetails=()=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(e=>e.closeDrawer("planDetails"))};__internal_openSubscriptionDetails=e=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted({preloadHint:"SubscriptionDetails"}).then(t=>t.openDrawer("subscriptionDetails",e||{}))};__internal_closeSubscriptionDetails=()=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(e=>e.closeDrawer("subscriptionDetails"))};__internal_openReverification=e=>{if(this.assertComponentsReady(this.#j),!this.user){if("development"===this.#K)throw new P(rP.cannotOpenUserProfile,{code:rT});return}this.#j.ensureMounted({preloadHint:"UserVerification"}).then(t=>t.openModal("userVerification",e||{})),this.telemetry?.record(em("UserVerification",e))};__internal_closeReverification=()=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(e=>e.closeModal("userVerification"))};__internal_openBlankCaptchaModal=()=>(this.assertComponentsReady(this.#j),this.#j.ensureMounted({preloadHint:"BlankCaptchaModal"}).then(e=>e.openModal("blankCaptcha",{})));__internal_closeBlankCaptchaModal=()=>(this.assertComponentsReady(this.#j),this.#j.ensureMounted({preloadHint:"BlankCaptchaModal"}).then(e=>e.closeModal("blankCaptcha")));__internal_loadStripeJs=async()=>{let{loadStripe:e}=await i.e("553").then(i.bind(i,8823));return e};openSignUp=e=>{if(this.assertComponentsReady(this.#j),eL(this,this.environment)){if("development"===this.#K)throw new P(rP.cannotOpenSignInOrSignUp,{code:rR});return}this.#j.ensureMounted({preloadHint:"SignUp"}).then(t=>t.openModal("signUp",e||{})),this.telemetry?.record(em("SignUp",e))};closeSignUp=()=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(e=>e.closeModal("signUp"))};openUserProfile=e=>{if(this.assertComponentsReady(this.#j),!this.user){if("development"===this.#K)throw new P(rP.cannotOpenUserProfile,{code:rT});return}this.#j.ensureMounted({preloadHint:"UserProfile"}).then(t=>t.openModal("userProfile",e||{}));let t=(e?.customPages?.length||0)>0?{customPages:!0}:void 0;this.telemetry?.record(em("UserProfile",e,t))};closeUserProfile=()=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(e=>e.closeModal("userProfile"))};openOrganizationProfile=e=>{if(this.assertComponentsReady(this.#j),e$(this,this.environment)){if("development"===this.#K)throw new P(rP.cannotRenderAnyOrganizationComponent("OrganizationProfile"),{code:rE});return}if(!this.organization){if("development"===this.#K)throw new P(rP.cannotRenderComponentWhenOrgDoesNotExist,{code:rx});return}this.#j.ensureMounted({preloadHint:"OrganizationProfile"}).then(t=>t.openModal("organizationProfile",e||{})),this.telemetry?.record(em("OrganizationProfile",e))};closeOrganizationProfile=()=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(e=>e.closeModal("organizationProfile"))};openCreateOrganization=e=>{if(this.assertComponentsReady(this.#j),e$(this,this.environment)){if("development"===this.#K)throw new P(rP.cannotRenderAnyOrganizationComponent("CreateOrganization"),{code:rE});return}this.#j.ensureMounted({preloadHint:"CreateOrganization"}).then(t=>t.openModal("createOrganization",e||{})),this.telemetry?.record(em("CreateOrganization",e))};closeCreateOrganization=()=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(e=>e.closeModal("createOrganization"))};openWaitlist=e=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted({preloadHint:"Waitlist"}).then(t=>t.openModal("waitlist",e||{})),this.telemetry?.record(em("Waitlist",e))};closeWaitlist=()=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(e=>e.closeModal("waitlist"))};mountSignIn=(e,t)=>{this.assertComponentsReady(this.#j);let i="SignIn";this.#j.ensureMounted({preloadHint:i}).then(n=>n.mountComponent({name:i,appearanceKey:"signIn",node:e,props:t}));let n={withSignUp:t?.withSignUp??this.#en()};this.telemetry?.record(ef(i,t,n))};unmountSignIn=e=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(t=>t.unmountComponent({node:e}))};mountUserAvatar=(e,t)=>{this.assertComponentsReady(this.#j);let i="UserAvatar";this.#j.ensureMounted({preloadHint:i}).then(n=>n.mountComponent({name:i,appearanceKey:"userAvatar",node:e,props:t})),this.telemetry?.record(ef(i,t))};unmountUserAvatar=e=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(t=>t.unmountComponent({node:e}))};mountSignUp=(e,t)=>{this.assertComponentsReady(this.#j);let i="SignUp";this.#j.ensureMounted({preloadHint:i}).then(n=>n.mountComponent({name:i,appearanceKey:"signUp",node:e,props:t})),this.telemetry?.record(ef(i,t))};unmountSignUp=e=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(t=>t.unmountComponent({node:e}))};mountUserProfile=(e,t)=>{if(this.assertComponentsReady(this.#j),!this.user){if("development"===this.#K)throw new P(rP.cannotRenderComponentWhenUserDoesNotExist,{code:rT});return}let i="UserProfile";this.#j.ensureMounted({preloadHint:i}).then(n=>n.mountComponent({name:i,appearanceKey:"userProfile",node:e,props:t}));let n=(t?.customPages?.length||0)>0?{customPages:!0}:void 0;this.telemetry?.record(ef(i,t,n))};unmountUserProfile=e=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(t=>t.unmountComponent({node:e}))};mountOrganizationProfile=(e,t)=>{if(this.assertComponentsReady(this.#j),e$(this,this.environment)){if("development"===this.#K)throw new P(rP.cannotRenderAnyOrganizationComponent("OrganizationProfile"),{code:rE});return}let i=!!this.user;if(!this.organization&&i){if("development"===this.#K)throw new P(rP.cannotRenderComponentWhenOrgDoesNotExist,{code:rx});return}this.#j.ensureMounted({preloadHint:"OrganizationProfile"}).then(i=>i.mountComponent({name:"OrganizationProfile",appearanceKey:"userProfile",node:e,props:t})),this.telemetry?.record(ef("OrganizationProfile",t))};unmountOrganizationProfile=e=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(t=>t.unmountComponent({node:e}))};mountCreateOrganization=(e,t)=>{if(this.assertComponentsReady(this.#j),e$(this,this.environment)){if("development"===this.#K)throw new P(rP.cannotRenderAnyOrganizationComponent("CreateOrganization"),{code:rE});return}this.#j?.ensureMounted({preloadHint:"CreateOrganization"}).then(i=>i.mountComponent({name:"CreateOrganization",appearanceKey:"createOrganization",node:e,props:t})),this.telemetry?.record(ef("CreateOrganization",t))};unmountCreateOrganization=e=>{this.assertComponentsReady(this.#j),this.#j?.ensureMounted().then(t=>t.unmountComponent({node:e}))};mountOrganizationSwitcher=(e,t)=>{if(this.assertComponentsReady(this.#j),e$(this,this.environment)){if("development"===this.#K)throw new P(rP.cannotRenderAnyOrganizationComponent("OrganizationSwitcher"),{code:rE});return}this.#j?.ensureMounted({preloadHint:"OrganizationSwitcher"}).then(i=>i.mountComponent({name:"OrganizationSwitcher",appearanceKey:"organizationSwitcher",node:e,props:t})),this.telemetry?.record(ef("OrganizationSwitcher",{...t,forceOrganizationSelection:this.environment?.organizationSettings.forceOrganizationSelection}))};unmountOrganizationSwitcher=e=>{this.assertComponentsReady(this.#j),this.#j?.ensureMounted().then(t=>t.unmountComponent({node:e}))};__experimental_prefetchOrganizationSwitcher=()=>{this.assertComponentsReady(this.#j),this.#j?.ensureMounted({preloadHint:"OrganizationSwitcher"}).then(e=>e.prefetch("organizationSwitcher"))};mountOrganizationList=(e,t)=>{if(this.assertComponentsReady(this.#j),e$(this,this.environment)){if("development"===this.#K)throw new P(rP.cannotRenderAnyOrganizationComponent("OrganizationList"),{code:rE});return}this.#j?.ensureMounted({preloadHint:"OrganizationList"}).then(i=>i.mountComponent({name:"OrganizationList",appearanceKey:"organizationList",node:e,props:t})),this.telemetry?.record(ef("OrganizationList",{...t,forceOrganizationSelection:this.environment?.organizationSettings.forceOrganizationSelection}))};unmountOrganizationList=e=>{this.assertComponentsReady(this.#j),this.#j?.ensureMounted().then(t=>t.unmountComponent({node:e}))};mountUserButton=(e,t)=>{this.assertComponentsReady(this.#j),this.#j?.ensureMounted({preloadHint:"UserButton"}).then(i=>i.mountComponent({name:"UserButton",appearanceKey:"userButton",node:e,props:t}));let i={...t?.customMenuItems?.length||0?{customItems:!0}:void 0,...t?.__experimental_asStandalone?{standalone:!0}:void 0};this.telemetry?.record(ef("UserButton",t,i))};unmountUserButton=e=>{this.assertComponentsReady(this.#j),this.#j?.ensureMounted().then(t=>t.unmountComponent({node:e}))};mountWaitlist=(e,t)=>{this.assertComponentsReady(this.#j),this.#j?.ensureMounted({preloadHint:"Waitlist"}).then(i=>i.mountComponent({name:"Waitlist",appearanceKey:"waitlist",node:e,props:t})),this.telemetry?.record(ef("Waitlist",t))};unmountWaitlist=e=>{this.assertComponentsReady(this.#j),this.#j?.ensureMounted().then(t=>t.unmountComponent({node:e}))};mountPricingTable=(e,t)=>{if(this.assertComponentsReady(this.#j),ej(this,this.environment)){if("development"===this.#K)throw new P(rP.cannotRenderAnyBillingComponent("PricingTable"),{code:rO});return}let i={...t};void 0!==t?.forOrganizations&&Y('Clerk: [IMPORTANT] <PricingTable /> prop `forOrganizations` is deprecated and will be removed in the coming minors. Use `for="organization"` instead.'),this.#j.ensureMounted({preloadHint:"PricingTable"}).then(t=>t.mountComponent({name:"PricingTable",appearanceKey:"pricingTable",node:e,props:i})),this.telemetry?.record(ef("PricingTable",i))};unmountPricingTable=e=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(t=>t.unmountComponent({node:e}))};__internal_mountOAuthConsent=(e,t)=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted({preloadHint:"OAuthConsent"}).then(i=>i.mountComponent({name:"OAuthConsent",appearanceKey:"__internal_oauthConsent",node:e,props:t}))};__internal_unmountOAuthConsent=e=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(t=>t.unmountComponent({node:e}))};mountApiKeys=(e,t)=>{if(this.assertComponentsReady(this.#j),Y("Clerk: <APIKeys /> component is in early access and not yet recommended for production use."),((e,t)=>eJ(e,t)&&eK(e,t))(this,this.environment)){if("development"===this.#K)throw new P(rP.cannotRenderAPIKeysComponent,{code:"cannot_render_api_keys_disabled"});return}if(this.organization&&eK(this,this.environment)){if("development"===this.#K)throw new P(rP.cannotRenderAPIKeysComponentForOrgWhenDisabled,{code:"cannot_render_api_keys_org_disabled"});return}if(eJ(this,this.environment)){if("development"===this.#K)throw new P(rP.cannotRenderAPIKeysComponentForUserWhenDisabled,{code:"cannot_render_api_keys_user_disabled"});return}this.#j.ensureMounted({preloadHint:"APIKeys"}).then(i=>i.mountComponent({name:"APIKeys",appearanceKey:"apiKeys",node:e,props:t})),this.telemetry?.record(ef("APIKeys",t))};unmountApiKeys=e=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(t=>t.unmountComponent({node:e}))};mountTaskChooseOrganization=(e,t)=>{if(this.assertComponentsReady(this.#j),e$(this,this.environment)){if("development"===this.#K)throw new P(rP.cannotRenderAnyOrganizationComponent("TaskChooseOrganization"),{code:rE});return}this.#j.ensureMounted({preloadHint:"TaskChooseOrganization"}).then(i=>i.mountComponent({name:"TaskChooseOrganization",appearanceKey:"taskChooseOrganization",node:e,props:t})),this.telemetry?.record(ef("TaskChooseOrganization",t))};unmountTaskChooseOrganization=e=>{this.assertComponentsReady(this.#j),this.#j.ensureMounted().then(t=>t.unmountComponent({node:e}))};setActive=async e=>{let{organization:t,beforeEmit:i,redirectUrl:n,navigate:r}=e,{session:s}=e;this.__internal_setActiveInProgress=!0,eU.debug("setActive() start",{hasClient:!!this.client,sessionTarget:"string"==typeof s?s:s?.id??s??null,organizationTarget:"string"==typeof t?t:t?.id??t??null,redirectUrl:n??null},"clerk");try{if(!this.client)throw eU.warn("Clerk setActive called before client is loaded",{},"clerk"),Error("setActive is being called before the client is loaded. Wait for init.");if(void 0===s&&!this.session)throw eU.warn("Clerk setActive precondition not met: no target session and no active session",{},"clerk"),Error("setActive should either be called with a session param or there should be already an active session.");"string"==typeof s&&(s=this.client.sessions.find(e=>e.id===s)||null);let a="undefined"!=typeof window&&"function"==typeof window.__unstable__onBeforeSetActive?window.__unstable__onBeforeSetActive:eb,o="undefined"!=typeof window&&"function"==typeof window.__unstable__onAfterSetActive?window.__unstable__onAfterSetActive:eb,l=void 0===s?this.session:s;l?.status==="pending"&&function(e){let t=["taskUrls","navigate"];Object.keys(e).some(e=>t.includes(e))||Y('Clerk: Session has pending tasks but no handling is configured. To handle pending tasks, provide either "taskUrls" for navigation to custom URLs or "navigate" for programmatic navigation. Without these options, users may get stuck on incomplete flows.')}({...this.#H,...e});let c=void 0!==t;if(l&&c){let e="string"==typeof t?t:t?.id;if(function(e){return"string"==typeof e&&e.startsWith("org_")}(e))l.lastActiveOrganizationId=e||null;else{let t=l.user.organizationMemberships.find(t=>t.organization.slug===e),i=t?.organization.id||null,n=null===i;if(this.environment?.organizationSettings?.forceOrganizationSelection&&n)return;l.lastActiveOrganizationId=i}}l?.status!=="pending"&&await a(null===l?"sign-out":void 0),(tt()&&globalThis.document.hasFocus()||!this.#H.standardBrowser)&&(await this.#es(l),l=this.#ea(l?.id)),await l?.getToken()||(d()||eU.warn("Token is null when setting active session (offline)",{sessionId:l?.id},"clerk"),iC.emit(iw,{token:null}));let h=eT(this.#H.standardBrowser);i&&(((e,t,i)=>{let n=(()=>{try{return!0}catch{}return!1})(),r=i??e;_.has(r)||n||(_.add(r),console.warn(`Clerk - DEPRECATION WARNING: "${e}" is deprecated and will be removed in the next major release.
${t}`))})("Clerk.setActive({beforeEmit})",'Use the `redirectUrl` property instead. Example `Clerk.setActive({redirectUrl:"/"})`'),await h.track(async()=>{this.#er(),await i(l)}));let u=l?.status==="pending"&&l?.currentTask&&this.#H.taskUrls?.[l?.currentTask.key];if(!i&&(n||u||r)&&await h.track(async()=>{if(this.client){if(l?.status!=="pending"&&this.#er(),u){let e=n?e1({base:u,hashSearchParams:{redirectUrl:n}},{stringify:!0}):u;await this.navigate(e)}else if(r&&l)await r({session:l});else if(n){if(this.client.isEligibleForTouch()){let e=new URL(n,window.location.href),t=this.buildUrlWithAuth(this.client.buildTouchUrl({redirectUrl:e}));await this.navigate(t)}await this.navigate(n)}}}),h.isUnloading())return;this.#Z(l),this.#ee(),l?.status!=="pending"&&await o()}finally{this.__internal_setActiveInProgress=!1}};addListener=e=>(e=function(e){let t;return i=>{var n;t||={...i},e(t={...{client:nP((n=t).client,i.client),session:nP(n.session,i.session),user:nP(n.user,i.user),organization:nP(n.organization,i.organization)}})}}(e),this.#V.push(e),this.client&&e({client:this.client,session:this.session,user:this.user,organization:this.organization}),()=>{this.#V=this.#V.filter(t=>t!==e)});on=(...e)=>{this.#Q.on(...e)};off=(...e)=>{this.#Q.off(...e)};__internal_addNavigationListener=e=>(this.#q.push(e),()=>{this.#q=this.#q.filter(t=>t!==e)});navigate=async(e,t)=>{if(!e||!tt())return;setTimeout(()=>{this.#eo()},0);let i=new URL(e,window.location.href);this.#el.includes(i.protocol)||(console.warn(`Clerk: "${i.protocol}" is not a valid protocol. Redirecting to "/" instead. If you think this is a mistake, please open an issue.`),i=new URL("/",window.location.href));let n=t?.replace&&this.#H.routerReplace?this.#H.routerReplace:this.#H.routerPush;if(eU.info(`Clerk is navigating to: ${i}`),this.#H.routerDebug&&console.log(`Clerk is navigating to: ${i}`),"null"!==i.origin&&i.origin!==window.location.origin||!n)return void eO(i);let r={...t?.metadata?{__internal_metadata:t?.metadata}:{},windowNavigate:eO};return await n(e3(i),r)};buildUrlWithAuth(e){if("production"===this.#K)return e;let t=new URL(e,window.location.origin);return t.origin!==window.location.origin&&this.#W?this.#W.decorateUrlWithDevBrowserToken(t).href:t.href}buildSignInUrl(e){return this.#ec("signInUrl",{...e,redirectUrl:e?.redirectUrl||window.location.href},e?.initialValues)}buildSignUpUrl(e){return this.#ec("signUpUrl",{...e,redirectUrl:e?.redirectUrl||window.location.href},e?.initialValues)}buildUserProfileUrl(){return this.environment&&this.environment.displayConfig?this.buildUrlWithAuth(this.environment.displayConfig.userProfileUrl):""}buildHomeUrl(){return this.environment&&this.environment.displayConfig?this.buildUrlWithAuth(this.environment.displayConfig.homeUrl):""}buildAfterSignInUrl({params:e}={}){return this.buildUrlWithAuth(new nE(this.#H,{},e).getAfterSignInUrl())}buildAfterSignUpUrl({params:e}={}){return this.buildUrlWithAuth(new nE(this.#H,{},e).getAfterSignUpUrl())}buildAfterSignOutUrl(){return this.#H.afterSignOutUrl?this.buildUrlWithAuth(this.#H.afterSignOutUrl):"/"}buildNewSubscriptionRedirectUrl(){return this.#H.newSubscriptionRedirectUrl?this.#H.newSubscriptionRedirectUrl:this.buildAfterSignInUrl()}buildWaitlistUrl(e){return this.environment&&this.environment.displayConfig?e1({base:this.#H.waitlistUrl||this.environment.displayConfig.waitlistUrl,hashSearchParams:[new URLSearchParams(e?.initialValues||{})]},{stringify:!0}):""}buildAfterMultiSessionSingleSignOutUrl(){return this.environment?this.#H.afterMultiSessionSingleSignOutUrl?this.buildUrlWithAuth(this.#H.afterMultiSessionSingleSignOutUrl):this.#H.signInUrl?this.buildUrlWithAuth(e1({base:this.#H.signInUrl,hashPath:"choose"},{stringify:!0})):this.buildUrlWithAuth(this.environment.displayConfig.afterSignOutOneUrl):""}buildCreateOrganizationUrl(){return this.environment&&this.environment.displayConfig?this.buildUrlWithAuth(this.environment.displayConfig.createOrganizationUrl):""}buildOrganizationProfileUrl(){return this.environment&&this.environment.displayConfig?this.buildUrlWithAuth(this.environment.displayConfig.organizationProfileUrl):""}buildTasksUrl(e){let t=this.session?.currentTask;if(!t)return"";let i=this.#H.taskUrls?.[t.key];return i||e1({base:this.buildSignInUrl(e),hashPath:n5(t)},{stringify:!0})}#ed=async()=>{if(!tt())return;let e=new URLSearchParams({[eR]:"true"}),t=ez(eN);t&&X(t)||function(){throw Error(`${tw} Invalid redirect_url. A valid http or https url should be used for the redirection.`)}();let i=e1({base:ez(eN),searchParams:e},{stringify:!0});return this.navigate(this.buildUrlWithAuth(i))};redirectWithAuth=async e=>{if(tt())return this.navigate(this.buildUrlWithAuth(e))};redirectToSignIn=async e=>{if(tt())return this.navigate(this.buildSignInUrl(e))};redirectToSignUp=async e=>{if(tt())return this.navigate(this.buildSignUpUrl(e))};redirectToUserProfile=async()=>{if(tt())return this.navigate(this.buildUserProfileUrl())};redirectToCreateOrganization=async()=>{if(tt())return this.navigate(this.buildCreateOrganizationUrl())};redirectToOrganizationProfile=async()=>{if(tt())return this.navigate(this.buildOrganizationProfileUrl())};redirectToAfterSignIn=async()=>{if(tt())return this.navigate(this.buildAfterSignInUrl())};redirectToAfterSignUp=async()=>{if(tt())return this.navigate(this.buildAfterSignUpUrl())};redirectToAfterSignOut=async()=>{if(tt())return this.navigate(this.buildAfterSignOutUrl())};redirectToWaitlist=async()=>{if(tt())return this.navigate(this.buildWaitlistUrl())};redirectToTasks=async e=>{if(tt())return this.navigate(this.buildTasksUrl(e))};handleEmailLinkVerification=async(e,t)=>{if(!this.client)return;let i=ez("__clerk_status");if("expired"===i)throw new A(I.Expired);if("client_mismatch"===i)throw new A(I.ClientMismatch);if("verified"!==i)throw new A(I.Failed);let n=ez("__clerk_created_session"),{signIn:r,signUp:s,sessions:a}=this.client,o=a.some(e=>e.id===n),l="needs_second_factor"===r.status||"missing_requirements"===s.status,c=e=>t&&"function"==typeof t?t(e):this.navigate(e),d=e.redirectUrl?()=>c(e.redirectUrl):eb;return o?this.setActive({session:n,redirectUrl:e.redirectUrlComplete}):l?d():("function"==typeof e.onVerifiedOnOtherDevice&&e.onVerifiedOnOtherDevice(),null)};handleGoogleOneTapCallback=async(e,t,i)=>{if(!this.loaded||!this.environment||!this.client)return;let{signIn:n,signUp:r}=this.client,s="identifier"in(e||{})?e:n,a="missingFields"in(e||{})?e:r,o=e=>i&&"function"==typeof i?i(this.buildUrlWithAuth(e)):this.navigate(this.buildUrlWithAuth(e));return this._handleRedirectCallback(t,{signUp:a,signIn:s,navigate:o})};_handleRedirectCallback=async(e,{signIn:t,signUp:i,navigate:n})=>{if(!this.loaded||!this.environment||!this.client)return;if(!window.opener&&e.reloadResource)try{"signIn"===e.reloadResource?await t.reload():"signUp"===e.reloadResource&&await i.reload()}catch{}let{displayConfig:r}=this.environment,{firstFactorVerification:s}=t,{externalAccount:a}=i.verifications,o={status:i.status,missingFields:i.missingFields,externalAccountStatus:a.status,externalAccountErrorCode:a.error?.code,externalAccountSessionId:a.error?.meta?.sessionId,sessionId:i.createdSessionId},l={status:t.status,firstFactorVerificationStatus:s.status,firstFactorVerificationErrorCode:s.error?.code,firstFactorVerificationSessionId:s.error?.meta?.sessionId,sessionId:t.createdSessionId},c=e=>()=>n(e),d=c(e.signInUrl||r.signInUrl),h=c(e.signUpUrl||r.signUpUrl),u=c(e.firstFactorUrl||e1({base:r.signInUrl,hashPath:"/factor-one"},{stringify:!0})),p=c(e.secondFactorUrl||e1({base:r.signInUrl,hashPath:"/factor-two"},{stringify:!0})),f=c(e.resetPasswordUrl||e1({base:r.signInUrl,hashPath:"/reset-password"},{stringify:!0})),m=new nE(this.#H,e),_=c(e.continueSignUpUrl||e1({base:r.signUpUrl,hashPath:"/continue"},{stringify:!0})),g=({missingFields:t})=>t.length?_():(({signUp:e,verifyEmailPath:t,verifyPhonePath:i,continuePath:n,navigate:r,handleComplete:s,redirectUrl:a="",redirectUrlComplete:o="",oidcPrompt:l})=>{if("complete"===e.status)return s&&s();if("missing_requirements"===e.status){if(e.missingFields.some(e=>"saml"===e||"enterprise_sso"===e))return e.authenticateWithRedirect({strategy:"enterprise_sso",redirectUrl:a,redirectUrlComplete:o,continueSignUp:!0,oidcPrompt:l});let s=eW();if(e.unverifiedFields?.includes("email_address")&&t)return r(t,{searchParams:s});if(e.unverifiedFields?.includes("phone_number")&&i)return r(i,{searchParams:s});if(n)return r(n,{searchParams:s})}})({signUp:i,verifyEmailPath:e.verifyEmailAddressUrl||e1({base:r.signUpUrl,hashPath:"/verify-email-address"},{stringify:!0}),verifyPhonePath:e.verifyPhoneNumberUrl||e1({base:r.signUpUrl,hashPath:"/verify-phone-number"},{stringify:!0}),navigate:n}),y=e.signInUrl||r.signInUrl,b=e.signUpUrl||r.signUpUrl,w=async({session:e,baseUrl:t,redirectUrl:i})=>{if(!e.currentTask)return void await this.navigate(i);await n7(e,{baseUrl:t,navigate:this.navigate})};if("complete"===l.status)return this.setActive({session:l.sessionId,navigate:async({session:e})=>{await w({session:e,baseUrl:y,redirectUrl:m.getAfterSignInUrl()})}});if("transferable"===o.externalAccountStatus&&"external_account_exists"===o.externalAccountErrorCode){let e=await t.create({transfer:!0});switch(e.status){case"complete":return this.setActive({session:e.createdSessionId,navigate:async({session:e})=>{await w({session:e,baseUrl:b,redirectUrl:m.getAfterSignInUrl()})}});case"needs_first_factor":return u();case"needs_second_factor":return p();case"needs_new_password":return f();default:tS("sign in")}}let v="user_locked"===o.externalAccountErrorCode,S="user_locked"===l.firstFactorVerificationErrorCode;if(v)return h();if(S)return d();if("needs_first_factor"===l.status&&!t.supportedFirstFactors?.every(e=>"enterprise_sso"===e.strategy))return u();if("needs_new_password"===l.status)return f();if("transferable"===l.firstFactorVerificationStatus){if(!1===e.transferable)return d();let t=await i.create({transfer:!0});switch(t.status){case"complete":return this.setActive({session:t.createdSessionId,navigate:async({session:e})=>{await w({session:e,baseUrl:b,redirectUrl:m.getAfterSignUpUrl()})}});case"missing_requirements":return g({missingFields:t.missingFields});default:tS("sign in")}}if("complete"===o.status)return this.setActive({session:o.sessionId,navigate:async({session:e})=>{await w({session:e,baseUrl:b,redirectUrl:m.getAfterSignUpUrl()})}});if("needs_second_factor"===l.status)return p();let k=("failed"===o.externalAccountStatus||"unverified"===o.externalAccountStatus)&&"identifier_already_signed_in"===o.externalAccountErrorCode&&o.externalAccountSessionId,C="failed"===l.firstFactorVerificationStatus&&"identifier_already_signed_in"===l.firstFactorVerificationErrorCode&&l.firstFactorVerificationSessionId;if(k||C){let e=l.firstFactorVerificationSessionId||o.externalAccountSessionId;if(e)return this.setActive({session:e,navigate:async({session:e})=>{await w({session:e,baseUrl:k?b:y,redirectUrl:m.getAfterSignInUrl()})}})}return(e=>{let{externalAccount:t}=e.verifications;return!!t.error})(i)?h():"verified"===o.externalAccountStatus&&"missing_requirements"===o.status?g({missingFields:i.missingFields}):this.session?.currentTask?void await this.redirectToTasks({redirectUrl:this.buildAfterSignInUrl()}):d()};handleRedirectCallback=async(e={},t)=>{if(!this.loaded||!this.environment||!this.client)return;let{signIn:i,signUp:n}=this.client,r=e=>t&&"function"==typeof t?t(e):this.navigate(e);return this._handleRedirectCallback(e,{signUp:n,signIn:i,navigate:r})};handleUnauthenticated=async(e={broadcast:!0})=>{if(this.client&&this.session)try{let t=await t2.getOrCreateInstance().fetch();if(this.updateClient(t),this.session)return;return e.broadcast&&iC.emit(iv,null),this.setActive({session:null})}catch(e){if(R(e)&&[403,500].includes(e.status))return this.setActive({session:null});throw e}};authenticateWithGoogleOneTap=async e=>this.client?.signIn.create({strategy:"google_one_tap",token:e.token}).catch(t=>{if(R(t)&&"external_account_not_found"===t.errors[0].code)return this.client?.signUp.create({strategy:"google_one_tap",token:e.token,legalAccepted:e.legalAccepted});throw t});authenticateWithMetamask=async(e={})=>{await this.authenticateWithWeb3({...e,strategy:"web3_metamask_signature"})};authenticateWithCoinbaseWallet=async(e={})=>{await this.authenticateWithWeb3({...e,strategy:"web3_coinbase_wallet_signature"})};authenticateWithBase=async(e={})=>{await this.authenticateWithWeb3({...e,strategy:"web3_base_signature"})};authenticateWithOKXWallet=async(e={})=>{await this.authenticateWithWeb3({...e,strategy:"web3_okx_wallet_signature"})};authenticateWithWeb3=async({redirectUrl:e,signUpContinueUrl:t,customNavigate:i,unsafeMetadata:n,strategy:r,legalAccepted:s,secondFactorUrl:a})=>{let o,l;if(!this.client||!this.environment)return;let{displayConfig:c}=this.environment,d=r.replace("web3_","").replace("_signature",""),h=await tr({provider:d});switch(d){case"metamask":o=td;break;case"base":o=tp;break;case"coinbase_wallet":o=th;break;default:o=tu}let u=e=>()=>i&&"function"==typeof i?i(e):this.navigate(e),p=u(a||e1({base:c.signInUrl,hashPath:"/factor-two"},{stringify:!0})),f=u(t||e1({base:c.signUpUrl,hashPath:"/continue"},{stringify:!0}));try{l=await this.client.signIn.authenticateWithWeb3({identifier:h,generateSignature:o,strategy:r})}catch(e){if(eB(e,"form_identifier_not_found"))l=await this.client.signUp.authenticateWithWeb3({identifier:h,generateSignature:o,unsafeMetadata:n,strategy:r,legalAccepted:s}),t&&"missing_requirements"===l.status&&"verified"===l.verifications.web3Wallet.status&&await f();else throw e}let m=async({session:e,redirectUrl:t})=>{if(!e.currentTask)return void await this.navigate(t);await n7(e,{baseUrl:c.signInUrl,navigate:this.navigate})};switch(l.status){case"needs_second_factor":await p();break;case"complete":l.createdSessionId&&await this.setActive({session:l.createdSessionId,navigate:async({session:t})=>{await m({session:t,redirectUrl:e??this.buildAfterSignInUrl()})}});break;default:return}};createOrganization=async({name:e,slug:t})=>iX.create({name:e,slug:t});getOrganization=async e=>iX.get(e);joinWaitlist=async({emailAddress:e})=>nA.join({emailAddress:e});updateEnvironment(e){this.environment=e}__internal_setCountry=e=>{this.__internal_country||(this.__internal_country=e)};get __internal_last_error(){let e=this.internal_last_error;return this.internal_last_error=null,e}set __internal_last_error(e){this.internal_last_error=e}updateClient=e=>{if(!this.client){let t=this.#H.selectInitialSession?this.#H.selectInitialSession(e):this.#eh(e);this.#Z(t)}if(this.client=e,this.session){let e=this.#ea(this.session.id);"active"===this.session.status&&e?.status==="pending"&&("undefined"!=typeof window&&"function"==typeof window.__unstable__onAfterSetActive?window.__unstable__onAfterSetActive:eb)(),this.#Z(e),this.session?.lastActiveToken||d()||eU.warn("No last active token when updating client (offline)",{sessionId:this.session?.id},"clerk"),iC.emit(iw,{token:this.session?.lastActiveToken})}this.#ee()};get __unstable__environment(){return this.environment}__unstable__setEnvironment=async e=>{this.environment=new iI(e),rN.mountComponentRenderer&&(this.#j=rN.mountComponentRenderer(this,this.environment,this.#H))};__unstable__onBeforeRequest=e=>{this.#J.onBeforeRequest(e)};__unstable__onAfterResponse=e=>{this.#J.onAfterResponse(e)};__unstable__updateProps=e=>{let t={...e,options:this.#X({...this.#H,...e.options})};return this.#j?.ensureMounted().then(e=>e.updateProps(t))};__internal_navigateWithError(e,t){return this.__internal_last_error=t,this.navigate(e)}#eu=()=>{let e=new URLSearchParams({[eN]:window.location.href});return e1({base:this.#H.signInUrl,searchParams:e},{stringify:!0})};#ep=()=>{let e;if(this.proxyUrl){let t=new URL(this.proxyUrl);e=new URL(`${t.pathname}/v1/client/sync`,t.origin)}else this.domain&&(e=new URL("/v1/client/sync",`https://${this.domain}`));return e?.searchParams.append("redirect_url",window.location.href),e?.toString()||""};#ef=()=>"true"!==ez(eR)&&!!this.isSatellite&&!!this.#W?.isSignedOut();#em=()=>"production"!==this.#K&&!this.isSatellite&&!!ez(eN);#e_=async()=>{"development"===this.instanceType?await this.navigate(this.#eu()):"production"===this.instanceType&&await this.navigate(this.#ep())};#eg=(e,t)=>{let i;try{i=new URL(e)}catch{throw Error(`${tw} The signInUrl needs to have a absolute url format.`)}i.origin===t&&function(){throw Error(`${tw} The signInUrl needs to be on a different origin than your satellite application.`)}()};#ey=()=>{this.isSatellite&&("development"!==this.#K||this.#H.signInUrl||function(){throw Error(`${tw} Missing signInUrl. A satellite application needs to specify the signInUrl for development instances.`)}(),this.proxyUrl||this.domain||function(){throw Error(`${tw} Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl.`)}(),this.#H.signInUrl&&this.#eg(this.#H.signInUrl,window.location.origin))};#et=async()=>{if(this.#W=await nQ.create(this,this.#J,this.#K,this.#Q),this.#ey(),this.#ef())return void await this.#e_();if(this.#em())return void await this.#ed();this.#G=(()=>{if(!a())return{onPageFocus:eb};let e=[];return window.addEventListener("focus",()=>{"visible"===document.visibilityState&&e.forEach(e=>e())}),{onPageFocus:t=>{e.push(t)}}})(),"undefined"!=typeof BroadcastChannel&&(this.#$=new BroadcastChannel("clerk")),this.#eb();let e=function(e=window.location.hostname){if(!e)return!1;let t=eZ.get(e);void 0===t&&(t=W.some(t=>e.startsWith("accounts.")&&e.endsWith(t))||L.some(t=>e.endsWith(t)&&!e.endsWith(".clerk"+t)),eZ.set(e,t));return t}(window?.location.hostname),t="development"===this.#K&&!e,i=0,n=0;for(;n<2;){n++;try{var r;let e=iI.getInstance().fetch({touch:t}).then(e=>this.updateEnvironment(e)).catch(()=>{++i;let e=tb.getItem(t_,null);e&&this.updateEnvironment(new iI(e))}),n=async()=>t2.getOrCreateInstance().fetch().then(e=>this.updateClient(e)).catch(async e=>{if(E(e))throw e;++i;let t=this.#W?.getSessionCookie(),n=function(e){let t;try{t=new nb({jwt:e||"",object:"token",id:void 0})}catch{t=null}if(t2.clearInstance(),!t?.jwt)return t2.getOrCreateInstance({object:"client",last_active_session_id:null,id:"client_init",sessions:[]});let{sessionId:i,userId:n,orgId:r,orgRole:s,orgPermissions:a,orgSlug:o,factorVerificationAge:l}=(e=>{let t,i,n,r,s=e.fva??null,a=e.sts??null;if(2===e.v){if(e.o){t=e.o?.id,n=e.o?.slg,e.o?.rol&&(i=`org:${e.o?.rol}`);let{org:s}=i9(e.fea),{permissions:a,featurePermissionMap:o}=(({per:e,fpm:t})=>{if(!e||!t)return{permissions:[],featurePermissionMap:[]};let i=e.split(",").map(e=>e.trim()),n=t.split(",").map(e=>Number.parseInt(e.trim(),10)).map(e=>e.toString(2).padStart(i.length,"0").split("").map(e=>Number.parseInt(e,10)).reverse()).filter(Boolean);return{permissions:i,featurePermissionMap:n}})({per:e.o?.per,fpm:e.o?.fpm});r=function({features:e,permissions:t,featurePermissionMap:i}){if(!e||!t||!i)return[];let n=[];for(let r=0;r<e.length;r++){let s=e[r];if(r>=i.length)continue;let a=i[r];if(a)for(let e=0;e<a.length;e++)1===a[e]&&n.push(`org:${s}:${t[e]}`)}return n}({features:s,featurePermissionMap:o,permissions:a})}}else t=e.org_id,i=e.org_role,n=e.org_slug,r=e.org_permissions;return{sessionClaims:e,sessionId:e.sid,sessionStatus:a,actor:e.act,userId:e.sub,orgId:t,orgRole:i,orgSlug:n,orgPermissions:r,factorVerificationAge:s}})(t.jwt.claims),c={object:"client",last_active_session_id:i,id:"client_init",sessions:[{object:"session",id:i,status:"active",last_active_organization_id:r||null,last_active_token:{id:void 0,object:"token",jwt:e},factor_verification_age:l||null,public_user_data:{user_id:n},user:{object:"user",id:n,organization_memberships:r&&o&&s?[{object:"organization_membership",id:r,role:s,permissions:a||[],organization:{object:"organization",id:r,name:o,slug:o,members_count:1,max_allowed_memberships:1}}]:[]}}]};return t2.getOrCreateInstance(c)}(t);return this.updateClient(n),this.#W?.stopPollingForToken(),await this.session?.getToken({skipCache:!0}).catch(()=>null).finally(()=>{this.#W?.startPollingForToken()}),null}),s=()=>{rN.mountComponentRenderer&&!this.#j&&(this.#j=rN.mountComponentRenderer(this,this.environment,this.#H))},[,a]=await (r=[e,n()],Promise.all(Array.from(r).map(e=>e.then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e})))));if("rejected"===a.status){let e=a.reason;if(eB(e,"requires_captcha"))s(),await n();else throw e}if(this.#W?.setClientUatCookieForDevelopmentInstances(),await this.#ew())return;s();break}catch(e){if(eB(e,"dev_browser_unauthenticated"))await this.#W.handleUnauthenticatedDevBrowser();else if(!d())return void console.warn(e);else throw e}n>=2&&function(){throw Error(`${tw} Something went wrong initializing Clerk.`)}()}this.#L=new nX(this),this.#L.start(),this.#ev(),this.#eS(),this.#ek(),this.#Q.emit(m,i>0?"degraded":"ready")};shouldFallbackToCachedResources=()=>!!this.__internal_getCachedResources;#ei=async()=>{let e,t,i=this.shouldFallbackToCachedResources()?1:void 0,n=0;try{[e,t]=await Promise.all([iI.getInstance().fetch({touch:!1,fetchMaxTries:i}),t2.getOrCreateInstance().fetch({fetchMaxTries:i})])}catch(i){if(M(i)&&"network_error"===i.code&&this.shouldFallbackToCachedResources()){let i=await this.__internal_getCachedResources?.();e=new iI(i?.environment),t2.clearInstance(),t=t2.getOrCreateInstance(i?.client),++n}else throw i}this.updateClient(t),this.updateEnvironment(e),rN.mountComponentRenderer&&(this.#j=rN.mountComponentRenderer(this,this.environment,this.#H)),this.#Q.emit(m,n>0?"degraded":"ready")};__internal_reloadInitialResources=async()=>{let[e,t]=await Promise.all([iI.getInstance().fetch({touch:!1,fetchMaxTries:1}),t2.getOrCreateInstance().fetch({fetchMaxTries:1})]);this.updateClient(t),this.updateEnvironment(e),this.#ee()};#eh=e=>{if(e.lastActiveSessionId){let t=e.signedInSessions.find(t=>t.id===e.lastActiveSessionId);if(t)return t}return e.signedInSessions[0]||null};#eb=()=>{a()&&(this.#G?.onPageFocus(()=>{this.session&&!(!(this.environment&&!this.environment.authConfig.singleSessionMode)&&this.#Y>Date.now())&&(this.#Y=Date.now()+5e3,this.#H.touchSession&&this.#es(this.session))}),this.#$?.addEventListener("message",e=>{e.data?.type==="signout"&&this.handleUnauthenticated({broadcast:!1})}),iC.on(iv,()=>{this.#$?.postMessage({type:"signout"})}),iC.on(iS,()=>{tb.setItem(t_,this.environment?.__internal_toSnapshot(),864e5)}))};#es=async e=>{if(!e)return Promise.resolve();await e.touch().catch(e=>{E(e)&&this.handleUnauthenticated()})};#ee=()=>{if(this.client)for(let e of this.#V)e({client:this.client,session:this.session,user:this.user,organization:this.organization})};#eo=()=>{for(let e of this.#q)e()};#er=()=>{this.session=void 0,this.organization=void 0,this.user=void 0,this.#ee()};#eC=()=>(this.session?.user.organizationMemberships||[]).map(e=>e.organization).find(e=>e.id===this.session?.lastActiveOrganizationId)||null;#Z=e=>{this.session=e||null,this.organization=this.#eC(),this.user=this.session?this.session.user:null};#ea=e=>this.client?.signedInSessions.find(t=>t.id===e)||null;#eS=()=>{this.addListener(({session:e})=>{e?.actor&&this.#j?.ensureMounted().then(e=>e.mountImpersonationFab())})};#ek=()=>{this.#H.__internal_keyless_claimKeylessApplicationUrl&&this.#j?.ensureMounted().then(e=>{e.updateProps({options:{__internal_keyless_claimKeylessApplicationUrl:this.#H.__internal_keyless_claimKeylessApplicationUrl,__internal_keyless_copyInstanceKeysUrl:this.#H.__internal_keyless_copyInstanceKeysUrl,__internal_keyless_dismissPrompt:this.#H.__internal_keyless_dismissPrompt}})})};#ec=(e,t,i)=>{if(!e||!this.loaded||!this.environment||!this.environment.displayConfig)return"";let n=this.#H[e]||this.environment.displayConfig[e];this.#en()&&(n=this.#H.signInUrl);let r=new nE(this.#H,t).toSearchParams(),s=new URLSearchParams(i||{}),a=e1({base:n,hashPath:this.#en()&&"signUpUrl"===e?"/create":"",hashSearchParams:[s,r]},{stringify:!0});return this.buildUrlWithAuth(a)};assertComponentsReady(e){if(!rN.mountComponentRenderer)throw Error("ClerkJS was loaded without UI components.");if(!e)throw Error("ClerkJS components are not ready yet.")}#ew=async()=>{let e=new URLSearchParams(window.location.search).get("redirect_url"),t="production"===this.instanceType,i=null!==e&&function(e,t){let i=new URL(t,eY),n=i.pathname,r=e5.includes(n)||e7.includes(n);return e===i.host&&r}(this.frontendApi,e);if(t||!i)return!1;let n=this.session,r=this.#H.signInUrl||this.environment?.displayConfig.signInUrl,s=r&&window.location.href.startsWith(r),a=this.#H.signUpUrl||this.environment?.displayConfig.signUpUrl,o=a&&window.location.href.startsWith(a);return(!function(e){let t=new URL(e,eY);return e5.includes(t.pathname)}(e)||!!n||!s&&!o)&&(await this.navigate(this.buildUrlWithAuth(e)),!0)};#X=e=>{let t=e?{...e}:{};return t.appearance&&(t.appearance=function(e){let t;if(!e||"object"!=typeof e)return e;let i=void 0!==e.theme?e.theme:e.baseTheme,n=void 0!==e.theme;if(!i)return e;if(Array.isArray(i)){i.forEach(e=>{!t&&"object"==typeof e&&e.cssLayerName&&(t=e.cssLayerName)});let r=i.map(e=>{if("string"==typeof e)return e;let{cssLayerName:t,...i}=e;return i}),s=e.cssLayerName||t,a={...e,[n?"theme":"baseTheme"]:r};return s&&(a.cssLayerName=s),a}{let t;"object"==typeof i&&i.cssLayerName&&(t=i.cssLayerName);let r="string"==typeof i?i:(()=>{let{cssLayerName:e,...t}=i;return t})(),s=e.cssLayerName||t,a={...e,[n?"theme":"baseTheme"]:r};return s&&(a.cssLayerName=s),a}}(t.appearance)),{...rM,...t,allowedRedirectOrigins:function(e,t,i){if(Array.isArray(e)&&e.length)return e;let n=[];return"undefined"!=typeof window&&window.location&&n.push(window.location.origin),n.push(`https://${e0(t)}`),n.push(`https://*.${e0(t)}`),"development"===i&&n.push(`https://${t}`),n}(e?.allowedRedirectOrigins,this.frontendApi,this.instanceType)}};#ev=()=>{try{eD(eR),eD(Q),eD(eM),eD("__clerk_handshake"),eD("__clerk_handshake_nonce"),eD("__clerk_help")}catch{}};get #el(){let e=eP;return this.#H.allowedRedirectProtocols&&(e=e.concat(this.#H.allowedRedirectProtocols)),e}}(e=i.hmd(e)).hot&&e.hot.accept()},2788:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(a,o)}l((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var i,n,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){var l=[s,o];if(i)throw TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){a.label=l[1];break}if(6===l[0]&&a.label<r[1]){a.label=r[1],r=l;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(l);break}r[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{i=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},s=this;Object.defineProperty(t,"__esModule",{value:!0});var a=i(6119),o="browser-tabs-lock-key",l={key:function(e){return n(s,void 0,void 0,function(){return r(this,function(e){throw Error("Unsupported")})})},getItem:function(e){return n(s,void 0,void 0,function(){return r(this,function(e){throw Error("Unsupported")})})},clear:function(){return n(s,void 0,void 0,function(){return r(this,function(e){return[2,window.localStorage.clear()]})})},removeItem:function(e){return n(s,void 0,void 0,function(){return r(this,function(e){throw Error("Unsupported")})})},setItem:function(e,t){return n(s,void 0,void 0,function(){return r(this,function(e){throw Error("Unsupported")})})},keySync:function(e){return window.localStorage.key(e)},getItemSync:function(e){return window.localStorage.getItem(e)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(e){return window.localStorage.removeItem(e)},setItemSync:function(e,t){return window.localStorage.setItem(e,t)}};function c(e){return new Promise(function(t){return setTimeout(t,e)})}function d(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i="",n=0;n<e;n++){var r=Math.floor(Math.random()*t.length);i+=t[r]}return i}t.default=function(){function e(t){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+d(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=t,void 0===e.waiters&&(e.waiters=[])}return e.prototype.acquireLock=function(t,i){return void 0===i&&(i=5e3),n(this,void 0,void 0,function(){var n,s,a,h,u,p,f;return r(this,function(r){switch(r.label){case 0:n=Date.now()+d(4),s=Date.now()+i,a=o+"-"+t,h=void 0===this.storageHandler?l:this.storageHandler,r.label=1;case 1:if(!(Date.now()<s))return[3,8];return[4,c(30)];case 2:if(r.sent(),null!==h.getItemSync(a))return[3,5];return u=this.id+"-"+t+"-"+n,[4,c(Math.floor(25*Math.random()))];case 3:return r.sent(),h.setItemSync(a,JSON.stringify({id:this.id,iat:n,timeoutKey:u,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,c(30)];case 4:if(r.sent(),null!==(p=h.getItemSync(a))&&(f=JSON.parse(p)).id===this.id&&f.iat===n)return this.acquiredIatSet.add(n),this.refreshLockWhileAcquired(a,n),[2,!0];return[3,7];case 5:return e.lockCorrector(void 0===this.storageHandler?l:this.storageHandler),[4,this.waitForSomethingToChange(s)];case 6:r.sent(),r.label=7;case 7:return n=Date.now()+d(4),[3,1];case 8:return[2,!1]}})})},e.prototype.refreshLockWhileAcquired=function(e,t){return n(this,void 0,void 0,function(){var i=this;return r(this,function(s){return setTimeout(function(){return n(i,void 0,void 0,function(){var i,n,s;return r(this,function(r){switch(r.label){case 0:return[4,a.default().lock(t)];case 1:if(r.sent(),!this.acquiredIatSet.has(t)||null===(n=(i=void 0===this.storageHandler?l:this.storageHandler).getItemSync(e)))return a.default().unlock(t),[2];return(s=JSON.parse(n)).timeRefreshed=Date.now(),i.setItemSync(e,JSON.stringify(s)),a.default().unlock(t),this.refreshLockWhileAcquired(e,t),[2]}})})},1e3),[2]})})},e.prototype.waitForSomethingToChange=function(t){return n(this,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return[4,new Promise(function(i){var n=!1,r=Date.now(),s=!1;function a(){if(s||(window.removeEventListener("storage",a),e.removeFromWaiting(a),clearTimeout(o),s=!0),!n){n=!0;var t=50-(Date.now()-r);t>0?setTimeout(i,t):i(null)}}window.addEventListener("storage",a),e.addToWaiting(a);var o=setTimeout(a,Math.max(0,t-Date.now()))})];case 1:return i.sent(),[2]}})})},e.addToWaiting=function(t){this.removeFromWaiting(t),void 0!==e.waiters&&e.waiters.push(t)},e.removeFromWaiting=function(t){void 0!==e.waiters&&(e.waiters=e.waiters.filter(function(e){return e!==t}))},e.notifyWaiters=function(){void 0!==e.waiters&&e.waiters.slice().forEach(function(e){return e()})},e.prototype.releaseLock=function(e){return n(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,this.releaseLock__private__(e)];case 1:return[2,t.sent()]}})})},e.prototype.releaseLock__private__=function(t){return n(this,void 0,void 0,function(){var i,n,s,c;return r(this,function(r){switch(r.label){case 0:if(i=void 0===this.storageHandler?l:this.storageHandler,n=o+"-"+t,null===(s=i.getItemSync(n)))return[2];if((c=JSON.parse(s)).id!==this.id)return[3,2];return[4,a.default().lock(c.iat)];case 1:r.sent(),this.acquiredIatSet.delete(c.iat),i.removeItemSync(n),a.default().unlock(c.iat),e.notifyWaiters(),r.label=2;case 2:return[2]}})})},e.lockCorrector=function(t){for(var i=Date.now()-5e3,n=[],r=0;;){var s=t.keySync(r);if(null===s)break;n.push(s),r++}for(var a=!1,l=0;l<n.length;l++){var c=n[l];if(c.includes(o)){var d=t.getItemSync(c);if(null!==d){var h=JSON.parse(d);(void 0===h.timeRefreshed&&h.timeAcquired<i||void 0!==h.timeRefreshed&&h.timeRefreshed<i)&&(t.removeItemSync(c),a=!0)}}}a&&e.notifyWaiters()},e.waiters=void 0,e}()},6119:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){var e=this;this.locked=new Map,this.addToLocked=function(t,i){var n=e.locked.get(t);void 0===n?void 0===i?e.locked.set(t,[]):e.locked.set(t,[i]):void 0!==i&&(n.unshift(i),e.locked.set(t,n))},this.isLocked=function(t){return e.locked.has(t)},this.lock=function(t){return new Promise(function(i,n){e.isLocked(t)?e.addToLocked(t,i):(e.addToLocked(t),i())})},this.unlock=function(t){var i=e.locked.get(t);if(void 0===i||0===i.length)return void e.locked.delete(t);var n=i.pop();e.locked.set(t,i),void 0!==n&&setTimeout(n,0)}}return e.getInstance=function(){return void 0===e.instance&&(e.instance=new e),e.instance},e}();t.default=function(){return i.getInstance()}},4763:function(e){e.exports=function(e,t){if("string"!=typeof e)throw TypeError("Expected a string");for(var i,n=String(e),r="",s=!!t&&!!t.extended,a=!!t&&!!t.globstar,o=!1,l=t&&"string"==typeof t.flags?t.flags:"",c=0,d=n.length;c<d;c++)switch(i=n[c]){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":r+="\\"+i;break;case"?":if(s){r+=".";break}case"[":case"]":if(s){r+=i;break}case"{":if(s){o=!0,r+="(";break}case"}":if(s){o=!1,r+=")";break}case",":if(o){r+="|";break}r+="\\"+i;break;case"*":for(var h=n[c-1],u=1;"*"===n[c+1];)u++,c++;var p=n[c+1];a?u>1&&("/"===h||void 0===h)&&("/"===p||void 0===p)?(r+="((?:[^/]*(?:/|$))*)",c++):r+="([^/]*)":r+=".*";break;default:r+=i}return l&&~l.indexOf("g")||(r="^"+r+"$"),new RegExp(r,l)}},4096:function(e){var t=function(e){"use strict";var t,i=Object.prototype,n=i.hasOwnProperty,r=Object.defineProperty||function(e,t,i){e[t]=i.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,i){return e[t]=i}}function d(e,i,n,s){var a,o,l,c,d=Object.create((i&&i.prototype instanceof _?i:_).prototype);return r(d,"_invoke",{value:(a=e,o=n,l=new I(s||[]),c=u,function(e,i){if(c===p)throw Error("Generator is already running");if(c===f){if("throw"===e)throw i;return{value:t,done:!0}}for(l.method=e,l.arg=i;;){var n=l.delegate;if(n){var r=function e(i,n){var r=n.method,s=i.iterator[r];if(t===s)return(n.delegate=null,"throw"===r&&i.iterator.return&&(n.method="return",n.arg=t,e(i,n),"throw"===n.method))?m:("return"!==r&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+r+"' method")),m);var a=h(s,i.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var o=a.arg;return o?o.done?(n[i.resultName]=o.value,n.next=i.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,m)}(n,l);if(r){if(r===m)continue;return r}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(c===u)throw c=f,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);c=p;var s=h(a,o,l);if("normal"===s.type){if(c=l.done?f:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:l.done}}"throw"===s.type&&(c=f,l.method="throw",l.arg=s.arg)}})}),d}function h(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var u="suspendedStart",p="executing",f="completed",m={};function _(){}function g(){}function y(){}var b={};c(b,a,function(){return this});var w=Object.getPrototypeOf,v=w&&w(w(P([])));v&&v!==i&&n.call(v,a)&&(b=v);var S=y.prototype=_.prototype=Object.create(b);function k(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function C(e,t){var i;r(this,"_invoke",{value:function(r,s){function a(){return new t(function(i,a){!function i(r,s,a,o){var l=h(e[r],e,s);if("throw"===l.type)o(l.arg);else{var c=l.arg,d=c.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){i("next",e,a,o)},function(e){i("throw",e,a,o)}):t.resolve(d).then(function(e){c.value=e,a(c)},function(e){return i("throw",e,a,o)})}}(r,s,i,a)})}return i=i?i.then(a,a):a()}})}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function U(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function P(e){if(null!=e){var i=e[a];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,s=function i(){for(;++r<e.length;)if(n.call(e,r))return i.value=e[r],i.done=!1,i;return i.value=t,i.done=!0,i};return s.next=s}}throw TypeError(typeof e+" is not iterable")}return g.prototype=y,r(S,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:g,configurable:!0}),g.displayName=c(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},k(C.prototype),c(C.prototype,o,function(){return this}),e.AsyncIterator=C,e.async=function(t,i,n,r,s){void 0===s&&(s=Promise);var a=new C(d(t,i,n,r),s);return e.isGeneratorFunction(i)?a:a.next().then(function(e){return e.done?e.value:a.next()})},k(S),c(S,l,"Generator"),c(S,a,function(){return this}),c(S,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(U),!e)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function r(n,r){return o.type="throw",o.arg=e,i.next=n,r&&(i.method="next",i.arg=t),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);else if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else if(c){if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return(a.type=e,a.arg=t,s)?(this.method="next",this.next=s.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),U(i),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;U(i)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:P(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}return i.m=e,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;i.t=function(n,r){if(1&r&&(n=this(n)),8&r||"object"==typeof n&&n&&(4&r&&n.__esModule||16&r&&"function"==typeof n.then))return n;var s=Object.create(null);i.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>{a[e]=()=>n[e]});return a.default=()=>n,i.d(s,a),s}})(),i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce((t,n)=>(i.f[n](e,t),t),[])),i.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),i.u=e=>""+("199"===e?"cookieSuffix":e)+"_clerk.headless_"+i.h().slice(0,6)+"_5.107.0.js",i.h=()=>"ca3fa73e4fc85bf3",i.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="@clerk/clerk-js:";i.l=function(n,r,s,a){if(e[n])return void e[n].push(r);if(void 0!==s)for(var o,l,c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var h=c[d];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")==t+s){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",t+s),o.src=n),e[n]=[r];var u=function(t,i){o.onerror=o.onload=null,clearTimeout(p);var r=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach(function(e){return e(i)}),t)return t(i)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),l&&document.head.appendChild(o)}})(),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="",(()=>{var e={994:0};i.f.j=function(t,n){var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var s=new Promise((i,n)=>r=e[t]=[i,n]);n.push(r[2]=s);var a=i.p+i.u(t),o=Error();i.l(a,function(n){if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,r[1](o)}},"chunk-"+t,t)}};var t=(t,n)=>{var r,s,a=n[0],o=n[1],l=n[2],c=0;if(a.some(t=>0!==e[t])){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);l&&l(i)}for(t&&t(n);c<a.length;c++)s=a[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0},n=globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i(2318)})());